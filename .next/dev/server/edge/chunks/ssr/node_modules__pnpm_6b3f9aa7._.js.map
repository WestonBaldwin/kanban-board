{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/node_modules/.pnpm/@swc+helpers@0.5.15/node_modules/@swc/helpers/cjs/_interop_require_default.cjs"],"sourcesContent":["\"use strict\";\n\nfunction _interop_require_default(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\nexports._ = _interop_require_default;\n"],"names":[],"mappings":"AAEA,SAAS,yBAAyB,GAAG;IACjC,OAAO,OAAO,IAAI,UAAU,GAAG,MAAM;QAAE,SAAS;IAAI;AACxD;AACA,QAAQ,CAAC,GAAG","ignoreList":[0]}},
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/node_modules/.pnpm/jwt-decode@4.0.0/node_modules/jwt-decode/build/esm/index.js"],"sourcesContent":["export class InvalidTokenError extends Error {\n}\nInvalidTokenError.prototype.name = \"InvalidTokenError\";\nfunction b64DecodeUnicode(str) {\n    return decodeURIComponent(atob(str).replace(/(.)/g, (m, p) => {\n        let code = p.charCodeAt(0).toString(16).toUpperCase();\n        if (code.length < 2) {\n            code = \"0\" + code;\n        }\n        return \"%\" + code;\n    }));\n}\nfunction base64UrlDecode(str) {\n    let output = str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    switch (output.length % 4) {\n        case 0:\n            break;\n        case 2:\n            output += \"==\";\n            break;\n        case 3:\n            output += \"=\";\n            break;\n        default:\n            throw new Error(\"base64 string is not of the correct length\");\n    }\n    try {\n        return b64DecodeUnicode(output);\n    }\n    catch (err) {\n        return atob(output);\n    }\n}\nexport function jwtDecode(token, options) {\n    if (typeof token !== \"string\") {\n        throw new InvalidTokenError(\"Invalid token specified: must be a string\");\n    }\n    options || (options = {});\n    const pos = options.header === true ? 0 : 1;\n    const part = token.split(\".\")[pos];\n    if (typeof part !== \"string\") {\n        throw new InvalidTokenError(`Invalid token specified: missing part #${pos + 1}`);\n    }\n    let decoded;\n    try {\n        decoded = base64UrlDecode(part);\n    }\n    catch (e) {\n        throw new InvalidTokenError(`Invalid token specified: invalid base64 for part #${pos + 1} (${e.message})`);\n    }\n    try {\n        return JSON.parse(decoded);\n    }\n    catch (e) {\n        throw new InvalidTokenError(`Invalid token specified: invalid json for part #${pos + 1} (${e.message})`);\n    }\n}\n"],"names":[],"mappings":";;;;;;AAAO,MAAM,0BAA0B;AACvC;AACA,kBAAkB,SAAS,CAAC,IAAI,GAAG;AACnC,SAAS,iBAAiB,GAAG;IACzB,OAAO,mBAAmB,KAAK,KAAK,OAAO,CAAC,QAAQ,CAAC,GAAG;QACpD,IAAI,OAAO,EAAE,UAAU,CAAC,GAAG,QAAQ,CAAC,IAAI,WAAW;QACnD,IAAI,KAAK,MAAM,GAAG,GAAG;YACjB,OAAO,MAAM;QACjB;QACA,OAAO,MAAM;IACjB;AACJ;AACA,SAAS,gBAAgB,GAAG;IACxB,IAAI,SAAS,IAAI,OAAO,CAAC,MAAM,KAAK,OAAO,CAAC,MAAM;IAClD,OAAQ,OAAO,MAAM,GAAG;QACpB,KAAK;YACD;QACJ,KAAK;YACD,UAAU;YACV;QACJ,KAAK;YACD,UAAU;YACV;QACJ;YACI,MAAM,IAAI,MAAM;IACxB;IACA,IAAI;QACA,OAAO,iBAAiB;IAC5B,EACA,OAAO,KAAK;QACR,OAAO,KAAK;IAChB;AACJ;AACO,SAAS,UAAU,KAAK,EAAE,OAAO;IACpC,IAAI,OAAO,UAAU,UAAU;QAC3B,MAAM,IAAI,kBAAkB;IAChC;IACA,WAAW,CAAC,UAAU,CAAC,CAAC;IACxB,MAAM,MAAM,QAAQ,MAAM,KAAK,OAAO,IAAI;IAC1C,MAAM,OAAO,MAAM,KAAK,CAAC,IAAI,CAAC,IAAI;IAClC,IAAI,OAAO,SAAS,UAAU;QAC1B,MAAM,IAAI,kBAAkB,CAAC,uCAAuC,EAAE,MAAM,GAAG;IACnF;IACA,IAAI;IACJ,IAAI;QACA,UAAU,gBAAgB;IAC9B,EACA,OAAO,GAAG;QACN,MAAM,IAAI,kBAAkB,CAAC,kDAAkD,EAAE,MAAM,EAAE,EAAE,EAAE,EAAE,OAAO,CAAC,CAAC,CAAC;IAC7G;IACA,IAAI;QACA,OAAO,KAAK,KAAK,CAAC;IACtB,EACA,OAAO,GAAG;QACN,MAAM,IAAI,kBAAkB,CAAC,gDAAgD,EAAE,MAAM,EAAE,EAAE,EAAE,EAAE,OAAO,CAAC,CAAC,CAAC;IAC3G;AACJ","ignoreList":[0]}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/node_modules/.pnpm/js-cookie@3.0.5/node_modules/js-cookie/dist/js.cookie.mjs"],"sourcesContent":["/*! js-cookie v3.0.5 | MIT */\n/* eslint-disable no-var */\nfunction assign (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target\n}\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\nvar defaultConverter = {\n  read: function (value) {\n    if (value[0] === '\"') {\n      value = value.slice(1, -1);\n    }\n    return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n  },\n  write: function (value) {\n    return encodeURIComponent(value).replace(\n      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n      decodeURIComponent\n    )\n  }\n};\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\n\nfunction init (converter, defaultAttributes) {\n  function set (name, value, attributes) {\n    if (typeof document === 'undefined') {\n      return\n    }\n\n    attributes = assign({}, defaultAttributes, attributes);\n\n    if (typeof attributes.expires === 'number') {\n      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n    }\n    if (attributes.expires) {\n      attributes.expires = attributes.expires.toUTCString();\n    }\n\n    name = encodeURIComponent(name)\n      .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n      .replace(/[()]/g, escape);\n\n    var stringifiedAttributes = '';\n    for (var attributeName in attributes) {\n      if (!attributes[attributeName]) {\n        continue\n      }\n\n      stringifiedAttributes += '; ' + attributeName;\n\n      if (attributes[attributeName] === true) {\n        continue\n      }\n\n      // Considers RFC 6265 section 5.2:\n      // ...\n      // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n      //     character:\n      // Consume the characters of the unparsed-attributes up to,\n      // not including, the first %x3B (\";\") character.\n      // ...\n      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n    }\n\n    return (document.cookie =\n      name + '=' + converter.write(value, name) + stringifiedAttributes)\n  }\n\n  function get (name) {\n    if (typeof document === 'undefined' || (arguments.length && !name)) {\n      return\n    }\n\n    // To prevent the for loop in the first place assign an empty array\n    // in case there are no cookies at all.\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\n    var jar = {};\n    for (var i = 0; i < cookies.length; i++) {\n      var parts = cookies[i].split('=');\n      var value = parts.slice(1).join('=');\n\n      try {\n        var found = decodeURIComponent(parts[0]);\n        jar[found] = converter.read(value, found);\n\n        if (name === found) {\n          break\n        }\n      } catch (e) {}\n    }\n\n    return name ? jar[name] : jar\n  }\n\n  return Object.create(\n    {\n      set,\n      get,\n      remove: function (name, attributes) {\n        set(\n          name,\n          '',\n          assign({}, attributes, {\n            expires: -1\n          })\n        );\n      },\n      withAttributes: function (attributes) {\n        return init(this.converter, assign({}, this.attributes, attributes))\n      },\n      withConverter: function (converter) {\n        return init(assign({}, this.converter, converter), this.attributes)\n      }\n    },\n    {\n      attributes: { value: Object.freeze(defaultAttributes) },\n      converter: { value: Object.freeze(converter) }\n    }\n  )\n}\n\nvar api = init(defaultConverter, { path: '/' });\n/* eslint-enable no-var */\n\nexport { api as default };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 186, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/node_modules/.pnpm/fetch-ponyfill@7.1.0/node_modules/fetch-ponyfill/build/fetch-browser.js"],"sourcesContent":["(function (global) {\n  'use strict';\n\n  function fetchPonyfill(options) {\n    var Promise = options && options.Promise || global.Promise;\n    var XMLHttpRequest = options && options.XMLHttpRequest || global.XMLHttpRequest;\n\n    return (function () {\n      var globalThis = Object.create(global, {\n        fetch: {\n          value: undefined,\n          writable: true\n        }\n      });\n\n      (function (global, factory) {\n        typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n        typeof define === 'function' && define.amd ? define(['exports'], factory) :\n        (factory((global.WHATWGFetch = {})));\n      }(this, (function (exports) { 'use strict';\n\n        var global =\n          (typeof globalThis !== 'undefined' && globalThis) ||\n          (typeof self !== 'undefined' && self) ||\n          (typeof global !== 'undefined' && global);\n\n        var support = {\n          searchParams: 'URLSearchParams' in global,\n          iterable: 'Symbol' in global && 'iterator' in Symbol,\n          blob:\n            'FileReader' in global &&\n            'Blob' in global &&\n            (function() {\n              try {\n                new Blob();\n                return true\n              } catch (e) {\n                return false\n              }\n            })(),\n          formData: 'FormData' in global,\n          arrayBuffer: 'ArrayBuffer' in global\n        };\n\n        function isDataView(obj) {\n          return obj && DataView.prototype.isPrototypeOf(obj)\n        }\n\n        if (support.arrayBuffer) {\n          var viewClasses = [\n            '[object Int8Array]',\n            '[object Uint8Array]',\n            '[object Uint8ClampedArray]',\n            '[object Int16Array]',\n            '[object Uint16Array]',\n            '[object Int32Array]',\n            '[object Uint32Array]',\n            '[object Float32Array]',\n            '[object Float64Array]'\n          ];\n\n          var isArrayBufferView =\n            ArrayBuffer.isView ||\n            function(obj) {\n              return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n            };\n        }\n\n        function normalizeName(name) {\n          if (typeof name !== 'string') {\n            name = String(name);\n          }\n          if (/[^a-z0-9\\-#$%&'*+.^_`|~!]/i.test(name) || name === '') {\n            throw new TypeError('Invalid character in header field name')\n          }\n          return name.toLowerCase()\n        }\n\n        function normalizeValue(value) {\n          if (typeof value !== 'string') {\n            value = String(value);\n          }\n          return value\n        }\n\n        // Build a destructive iterator for the value list\n        function iteratorFor(items) {\n          var iterator = {\n            next: function() {\n              var value = items.shift();\n              return {done: value === undefined, value: value}\n            }\n          };\n\n          if (support.iterable) {\n            iterator[Symbol.iterator] = function() {\n              return iterator\n            };\n          }\n\n          return iterator\n        }\n\n        function Headers(headers) {\n          this.map = {};\n\n          if (headers instanceof Headers) {\n            headers.forEach(function(value, name) {\n              this.append(name, value);\n            }, this);\n          } else if (Array.isArray(headers)) {\n            headers.forEach(function(header) {\n              this.append(header[0], header[1]);\n            }, this);\n          } else if (headers) {\n            Object.getOwnPropertyNames(headers).forEach(function(name) {\n              this.append(name, headers[name]);\n            }, this);\n          }\n        }\n\n        Headers.prototype.append = function(name, value) {\n          name = normalizeName(name);\n          value = normalizeValue(value);\n          var oldValue = this.map[name];\n          this.map[name] = oldValue ? oldValue + ', ' + value : value;\n        };\n\n        Headers.prototype['delete'] = function(name) {\n          delete this.map[normalizeName(name)];\n        };\n\n        Headers.prototype.get = function(name) {\n          name = normalizeName(name);\n          return this.has(name) ? this.map[name] : null\n        };\n\n        Headers.prototype.has = function(name) {\n          return this.map.hasOwnProperty(normalizeName(name))\n        };\n\n        Headers.prototype.set = function(name, value) {\n          this.map[normalizeName(name)] = normalizeValue(value);\n        };\n\n        Headers.prototype.forEach = function(callback, thisArg) {\n          for (var name in this.map) {\n            if (this.map.hasOwnProperty(name)) {\n              callback.call(thisArg, this.map[name], name, this);\n            }\n          }\n        };\n\n        Headers.prototype.keys = function() {\n          var items = [];\n          this.forEach(function(value, name) {\n            items.push(name);\n          });\n          return iteratorFor(items)\n        };\n\n        Headers.prototype.values = function() {\n          var items = [];\n          this.forEach(function(value) {\n            items.push(value);\n          });\n          return iteratorFor(items)\n        };\n\n        Headers.prototype.entries = function() {\n          var items = [];\n          this.forEach(function(value, name) {\n            items.push([name, value]);\n          });\n          return iteratorFor(items)\n        };\n\n        if (support.iterable) {\n          Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n        }\n\n        function consumed(body) {\n          if (body.bodyUsed) {\n            return Promise.reject(new TypeError('Already read'))\n          }\n          body.bodyUsed = true;\n        }\n\n        function fileReaderReady(reader) {\n          return new Promise(function(resolve, reject) {\n            reader.onload = function() {\n              resolve(reader.result);\n            };\n            reader.onerror = function() {\n              reject(reader.error);\n            };\n          })\n        }\n\n        function readBlobAsArrayBuffer(blob) {\n          var reader = new FileReader();\n          var promise = fileReaderReady(reader);\n          reader.readAsArrayBuffer(blob);\n          return promise\n        }\n\n        function readBlobAsText(blob) {\n          var reader = new FileReader();\n          var promise = fileReaderReady(reader);\n          reader.readAsText(blob);\n          return promise\n        }\n\n        function readArrayBufferAsText(buf) {\n          var view = new Uint8Array(buf);\n          var chars = new Array(view.length);\n\n          for (var i = 0; i < view.length; i++) {\n            chars[i] = String.fromCharCode(view[i]);\n          }\n          return chars.join('')\n        }\n\n        function bufferClone(buf) {\n          if (buf.slice) {\n            return buf.slice(0)\n          } else {\n            var view = new Uint8Array(buf.byteLength);\n            view.set(new Uint8Array(buf));\n            return view.buffer\n          }\n        }\n\n        function Body() {\n          this.bodyUsed = false;\n\n          this._initBody = function(body) {\n            /*\n              fetch-mock wraps the Response object in an ES6 Proxy to\n              provide useful test harness features such as flush. However, on\n              ES5 browsers without fetch or Proxy support pollyfills must be used;\n              the proxy-pollyfill is unable to proxy an attribute unless it exists\n              on the object before the Proxy is created. This change ensures\n              Response.bodyUsed exists on the instance, while maintaining the\n              semantic of setting Request.bodyUsed in the constructor before\n              _initBody is called.\n            */\n            this.bodyUsed = this.bodyUsed;\n            this._bodyInit = body;\n            if (!body) {\n              this._bodyText = '';\n            } else if (typeof body === 'string') {\n              this._bodyText = body;\n            } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n              this._bodyBlob = body;\n            } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n              this._bodyFormData = body;\n            } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n              this._bodyText = body.toString();\n            } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n              this._bodyArrayBuffer = bufferClone(body.buffer);\n              // IE 10-11 can't handle a DataView body.\n              this._bodyInit = new Blob([this._bodyArrayBuffer]);\n            } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n              this._bodyArrayBuffer = bufferClone(body);\n            } else {\n              this._bodyText = body = Object.prototype.toString.call(body);\n            }\n\n            if (!this.headers.get('content-type')) {\n              if (typeof body === 'string') {\n                this.headers.set('content-type', 'text/plain;charset=UTF-8');\n              } else if (this._bodyBlob && this._bodyBlob.type) {\n                this.headers.set('content-type', this._bodyBlob.type);\n              } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n                this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n              }\n            }\n          };\n\n          if (support.blob) {\n            this.blob = function() {\n              var rejected = consumed(this);\n              if (rejected) {\n                return rejected\n              }\n\n              if (this._bodyBlob) {\n                return Promise.resolve(this._bodyBlob)\n              } else if (this._bodyArrayBuffer) {\n                return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n              } else if (this._bodyFormData) {\n                throw new Error('could not read FormData body as blob')\n              } else {\n                return Promise.resolve(new Blob([this._bodyText]))\n              }\n            };\n\n            this.arrayBuffer = function() {\n              if (this._bodyArrayBuffer) {\n                var isConsumed = consumed(this);\n                if (isConsumed) {\n                  return isConsumed\n                }\n                if (ArrayBuffer.isView(this._bodyArrayBuffer)) {\n                  return Promise.resolve(\n                    this._bodyArrayBuffer.buffer.slice(\n                      this._bodyArrayBuffer.byteOffset,\n                      this._bodyArrayBuffer.byteOffset + this._bodyArrayBuffer.byteLength\n                    )\n                  )\n                } else {\n                  return Promise.resolve(this._bodyArrayBuffer)\n                }\n              } else {\n                return this.blob().then(readBlobAsArrayBuffer)\n              }\n            };\n          }\n\n          this.text = function() {\n            var rejected = consumed(this);\n            if (rejected) {\n              return rejected\n            }\n\n            if (this._bodyBlob) {\n              return readBlobAsText(this._bodyBlob)\n            } else if (this._bodyArrayBuffer) {\n              return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n            } else if (this._bodyFormData) {\n              throw new Error('could not read FormData body as text')\n            } else {\n              return Promise.resolve(this._bodyText)\n            }\n          };\n\n          if (support.formData) {\n            this.formData = function() {\n              return this.text().then(decode)\n            };\n          }\n\n          this.json = function() {\n            return this.text().then(JSON.parse)\n          };\n\n          return this\n        }\n\n        // HTTP methods whose capitalization should be normalized\n        var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n        function normalizeMethod(method) {\n          var upcased = method.toUpperCase();\n          return methods.indexOf(upcased) > -1 ? upcased : method\n        }\n\n        function Request(input, options) {\n          if (!(this instanceof Request)) {\n            throw new TypeError('Please use the \"new\" operator, this DOM object constructor cannot be called as a function.')\n          }\n\n          options = options || {};\n          var body = options.body;\n\n          if (input instanceof Request) {\n            if (input.bodyUsed) {\n              throw new TypeError('Already read')\n            }\n            this.url = input.url;\n            this.credentials = input.credentials;\n            if (!options.headers) {\n              this.headers = new Headers(input.headers);\n            }\n            this.method = input.method;\n            this.mode = input.mode;\n            this.signal = input.signal;\n            if (!body && input._bodyInit != null) {\n              body = input._bodyInit;\n              input.bodyUsed = true;\n            }\n          } else {\n            this.url = String(input);\n          }\n\n          this.credentials = options.credentials || this.credentials || 'same-origin';\n          if (options.headers || !this.headers) {\n            this.headers = new Headers(options.headers);\n          }\n          this.method = normalizeMethod(options.method || this.method || 'GET');\n          this.mode = options.mode || this.mode || null;\n          this.signal = options.signal || this.signal;\n          this.referrer = null;\n\n          if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n            throw new TypeError('Body not allowed for GET or HEAD requests')\n          }\n          this._initBody(body);\n\n          if (this.method === 'GET' || this.method === 'HEAD') {\n            if (options.cache === 'no-store' || options.cache === 'no-cache') {\n              // Search for a '_' parameter in the query string\n              var reParamSearch = /([?&])_=[^&]*/;\n              if (reParamSearch.test(this.url)) {\n                // If it already exists then set the value with the current time\n                this.url = this.url.replace(reParamSearch, '$1_=' + new Date().getTime());\n              } else {\n                // Otherwise add a new '_' parameter to the end with the current time\n                var reQueryString = /\\?/;\n                this.url += (reQueryString.test(this.url) ? '&' : '?') + '_=' + new Date().getTime();\n              }\n            }\n          }\n        }\n\n        Request.prototype.clone = function() {\n          return new Request(this, {body: this._bodyInit})\n        };\n\n        function decode(body) {\n          var form = new FormData();\n          body\n            .trim()\n            .split('&')\n            .forEach(function(bytes) {\n              if (bytes) {\n                var split = bytes.split('=');\n                var name = split.shift().replace(/\\+/g, ' ');\n                var value = split.join('=').replace(/\\+/g, ' ');\n                form.append(decodeURIComponent(name), decodeURIComponent(value));\n              }\n            });\n          return form\n        }\n\n        function parseHeaders(rawHeaders) {\n          var headers = new Headers();\n          // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n          // https://tools.ietf.org/html/rfc7230#section-3.2\n          var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n          // Avoiding split via regex to work around a common IE11 bug with the core-js 3.6.0 regex polyfill\n          // https://github.com/github/fetch/issues/748\n          // https://github.com/zloirock/core-js/issues/751\n          preProcessedHeaders\n            .split('\\r')\n            .map(function(header) {\n              return header.indexOf('\\n') === 0 ? header.substr(1, header.length) : header\n            })\n            .forEach(function(line) {\n              var parts = line.split(':');\n              var key = parts.shift().trim();\n              if (key) {\n                var value = parts.join(':').trim();\n                headers.append(key, value);\n              }\n            });\n          return headers\n        }\n\n        Body.call(Request.prototype);\n\n        function Response(bodyInit, options) {\n          if (!(this instanceof Response)) {\n            throw new TypeError('Please use the \"new\" operator, this DOM object constructor cannot be called as a function.')\n          }\n          if (!options) {\n            options = {};\n          }\n\n          this.type = 'default';\n          this.status = options.status === undefined ? 200 : options.status;\n          this.ok = this.status >= 200 && this.status < 300;\n          this.statusText = 'statusText' in options ? options.statusText : '';\n          this.headers = new Headers(options.headers);\n          this.url = options.url || '';\n          this._initBody(bodyInit);\n        }\n\n        Body.call(Response.prototype);\n\n        Response.prototype.clone = function() {\n          return new Response(this._bodyInit, {\n            status: this.status,\n            statusText: this.statusText,\n            headers: new Headers(this.headers),\n            url: this.url\n          })\n        };\n\n        Response.error = function() {\n          var response = new Response(null, {status: 0, statusText: ''});\n          response.type = 'error';\n          return response\n        };\n\n        var redirectStatuses = [301, 302, 303, 307, 308];\n\n        Response.redirect = function(url, status) {\n          if (redirectStatuses.indexOf(status) === -1) {\n            throw new RangeError('Invalid status code')\n          }\n\n          return new Response(null, {status: status, headers: {location: url}})\n        };\n\n        exports.DOMException = global.DOMException;\n        try {\n          new exports.DOMException();\n        } catch (err) {\n          exports.DOMException = function(message, name) {\n            this.message = message;\n            this.name = name;\n            var error = Error(message);\n            this.stack = error.stack;\n          };\n          exports.DOMException.prototype = Object.create(Error.prototype);\n          exports.DOMException.prototype.constructor = exports.DOMException;\n        }\n\n        function fetch(input, init) {\n          return new Promise(function(resolve, reject) {\n            var request = new Request(input, init);\n\n            if (request.signal && request.signal.aborted) {\n              return reject(new exports.DOMException('Aborted', 'AbortError'))\n            }\n\n            var xhr = new XMLHttpRequest();\n\n            function abortXhr() {\n              xhr.abort();\n            }\n\n            xhr.onload = function() {\n              var options = {\n                status: xhr.status,\n                statusText: xhr.statusText,\n                headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n              };\n              options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n              var body = 'response' in xhr ? xhr.response : xhr.responseText;\n              setTimeout(function() {\n                resolve(new Response(body, options));\n              }, 0);\n            };\n\n            xhr.onerror = function() {\n              setTimeout(function() {\n                reject(new TypeError('Network request failed'));\n              }, 0);\n            };\n\n            xhr.ontimeout = function() {\n              setTimeout(function() {\n                reject(new TypeError('Network request failed'));\n              }, 0);\n            };\n\n            xhr.onabort = function() {\n              setTimeout(function() {\n                reject(new exports.DOMException('Aborted', 'AbortError'));\n              }, 0);\n            };\n\n            function fixUrl(url) {\n              try {\n                return url === '' && global.location.href ? global.location.href : url\n              } catch (e) {\n                return url\n              }\n            }\n\n            xhr.open(request.method, fixUrl(request.url), true);\n\n            if (request.credentials === 'include') {\n              xhr.withCredentials = true;\n            } else if (request.credentials === 'omit') {\n              xhr.withCredentials = false;\n            }\n\n            if ('responseType' in xhr) {\n              if (support.blob) {\n                xhr.responseType = 'blob';\n              } else if (\n                support.arrayBuffer &&\n                request.headers.get('Content-Type') &&\n                request.headers.get('Content-Type').indexOf('application/octet-stream') !== -1\n              ) {\n                xhr.responseType = 'arraybuffer';\n              }\n            }\n\n            if (init && typeof init.headers === 'object' && !(init.headers instanceof Headers)) {\n              Object.getOwnPropertyNames(init.headers).forEach(function(name) {\n                xhr.setRequestHeader(name, normalizeValue(init.headers[name]));\n              });\n            } else {\n              request.headers.forEach(function(value, name) {\n                xhr.setRequestHeader(name, value);\n              });\n            }\n\n            if (request.signal) {\n              request.signal.addEventListener('abort', abortXhr);\n\n              xhr.onreadystatechange = function() {\n                // DONE (success or failure)\n                if (xhr.readyState === 4) {\n                  request.signal.removeEventListener('abort', abortXhr);\n                }\n              };\n            }\n\n            xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n          })\n        }\n\n        fetch.polyfill = true;\n\n        if (!global.fetch) {\n          global.fetch = fetch;\n          global.Headers = Headers;\n          global.Request = Request;\n          global.Response = Response;\n        }\n\n        exports.Headers = Headers;\n        exports.Request = Request;\n        exports.Response = Response;\n        exports.fetch = fetch;\n\n        Object.defineProperty(exports, '__esModule', { value: true });\n\n      })));\n\n\n      return {\n        fetch: globalThis.fetch,\n        Headers: globalThis.Headers,\n        Request: globalThis.Request,\n        Response: globalThis.Response,\n        DOMException: globalThis.DOMException\n      };\n    }());\n  }\n\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return fetchPonyfill;\n    });\n  } else if (typeof exports === 'object') {\n    module.exports = fetchPonyfill;\n  } else {\n    global.fetchPonyfill = fetchPonyfill;\n  }\n}(typeof globalThis !== 'undefined' ? globalThis : typeof self !== 'undefined' ? self : typeof global !== 'undefined' ? global : this));\n\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 770, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@nhost+hasura-storage-js@2.9.0/node_modules/@nhost/hasura-storage-js/dist/index.esm.js","sources":["turbopack:///[project]/node_modules/.pnpm/@nhost+hasura-storage-js@2.9.0/node_modules/@nhost/hasura-storage-js/src/utils/upload.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+hasura-storage-js@2.9.0/node_modules/@nhost/hasura-storage-js/src/utils/appendImageTransformationParameters/appendImageTransformationParameters.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+hasura-storage-js@2.9.0/node_modules/@nhost/hasura-storage-js/src/hasura-storage-api.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+hasura-storage-js@2.9.0/node_modules/@nhost/hasura-storage-js/src/hasura-storage-client.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+hasura-storage-js@2.9.0/node_modules/@nhost/hasura-storage-js/src/machines/file-upload.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+hasura-storage-js@2.9.0/node_modules/@nhost/hasura-storage-js/src/machines/multiple-files-upload.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+hasura-storage-js@2.9.0/node_modules/@nhost/hasura-storage-js/src/promises/file-upload.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+hasura-storage-js@2.9.0/node_modules/@nhost/hasura-storage-js/src/promises/multiple-files-upload.ts"],"sourcesContent":["import { StorageErrorPayload, StorageUploadResponse } from './types'\n\n/** Convert any string into ISO-8859-1 */\nexport const toIso88591 = (fileName: string) => {\n  try {\n    btoa(fileName)\n    return fileName\n  } catch {\n    return encodeURIComponent(fileName)\n  }\n}\n\nexport const fetchUpload = async (\n  backendUrl: string,\n  data: FormData,\n  {\n    accessToken,\n    name,\n    fileId,\n    bucketId,\n    adminSecret,\n    onUploadProgress,\n    headers: initialHeaders = {}\n  }: {\n    accessToken?: string\n    name?: string\n    fileId?: string\n    bucketId?: string\n    adminSecret?: string\n    onUploadProgress?: (event: { total: number; loaded: number }) => void\n    headers?: Record<string, string>\n  } = {}\n): Promise<StorageUploadResponse> => {\n  const headers: HeadersInit = {\n    ...initialHeaders\n  }\n  if (bucketId) {\n    data.append('bucket-id', bucketId)\n  }\n  if (adminSecret) {\n    headers['x-hasura-admin-secret'] = adminSecret\n  }\n  if (accessToken) {\n    headers['Authorization'] = `Bearer ${accessToken}`\n  }\n\n  if ((name || fileId) && !data.has('metadata[]')) {\n    const metadata: Record<string, string> = {}\n    if (name) {\n      metadata.name = name\n    }\n    if (fileId) {\n      metadata.id = fileId\n    }\n    data.append(\n        'metadata[]',\n        new Blob([JSON.stringify(metadata)], { type: 'application/json' }),\n        \"\",\n    )\n  }\n\n  const url = `${backendUrl}/files`\n  if (typeof XMLHttpRequest === 'undefined') {\n    // * Non-browser environment: XMLHttpRequest is not available\n    try {\n      const response = await fetch(url, {\n        method: 'POST',\n        headers,\n        body: data as any // * https://github.com/form-data/form-data/issues/513\n      })\n\n      const responseData = await response.json()\n\n      if (!response.ok) {\n        const error: StorageErrorPayload = {\n          status: response.status,\n          message: responseData?.error?.message || response.statusText,\n          // * errors from hasura-storage are not codified\n          error: response.statusText\n        }\n        return { error, fileMetadata: null }\n      }\n      const fileMetadata = responseData\n      return { fileMetadata, error: null }\n    } catch (e) {\n      const error: StorageErrorPayload = {\n        status: 0,\n        message: (e as Error).message,\n        error: (e as Error).message\n      }\n      return { error, fileMetadata: null }\n    }\n  }\n\n  // * Browser environment: XMLHttpRequest is available\n  return new Promise((resolve) => {\n    let xhr = new XMLHttpRequest()\n    xhr.responseType = 'json'\n\n    xhr.onload = () => {\n      if (xhr.status < 200 || xhr.status >= 300) {\n        const error: StorageErrorPayload = {\n          error: xhr.response?.error?.message ?? xhr.response?.error ?? xhr.response,\n          message: xhr.response?.error?.message ?? xhr.response,\n          status: xhr.status\n        }\n        return resolve({\n          fileMetadata: null,\n          error\n        })\n      }\n      return resolve({ fileMetadata: xhr.response, error: null })\n    }\n\n    xhr.onerror = () => {\n      // only triggers if the request couldn't be made at all e.g. network error\n      const error: StorageErrorPayload = {\n        error: xhr.statusText,\n        message: xhr.statusText,\n        status: xhr.status\n      }\n      return resolve({\n        fileMetadata: null,\n        error\n      })\n    }\n\n    if (onUploadProgress) {\n      xhr.upload.addEventListener('progress', onUploadProgress, false)\n    }\n\n    xhr.open('POST', url, true)\n\n    Object.entries(headers).forEach(([key, value]) => {\n      xhr.setRequestHeader(key, value)\n    })\n\n    xhr.send(data as any) // * https://github.com/form-data/form-data/issues/513\n  })\n}\n","import { StorageImageTransformationParams } from '../types'\n\n/**\n * Appends image transformation parameters to the URL. If the URL already\n * contains query parameters, the transformation parameters are appended to\n * the existing query parameters.\n *\n * @internal\n * @param url - The URL to append the transformation parameters to.\n * @param params - The image transformation parameters.\n * @returns The URL with the transformation parameters appended.\n */\nexport default function appendImageTransformationParameters(\n  url: string,\n  params?: StorageImageTransformationParams\n): string {\n  if (!params || Object.keys(params).length === 0) {\n    return url\n  }\n\n  const urlObject = new URL(url)\n\n  // create an object with the transformation parameters by using the first\n  // character of the parameter name as the key\n  const imageTransformationParams = Object.entries(params).reduce(\n    (accumulator, [key, value]) => ({ ...accumulator, [key.charAt(0)]: value }),\n    {} as Record<string, any>\n  )\n\n  // set the query parameters in the URL object\n  Object.entries(imageTransformationParams).forEach(([key, value]) => {\n    if (!value) {\n      return\n    }\n\n    urlObject.searchParams.set(key, value)\n  })\n\n  return urlObject.toString()\n}\n","import {\n  ApiDeleteParams,\n  ApiDeleteResponse,\n  ApiGetPresignedUrlParams,\n  ApiGetPresignedUrlResponse,\n  StorageDownloadFileParams,\n  StorageDownloadFileResponse,\n  StorageUploadFileParams,\n  StorageUploadFileResponse,\n  StorageUploadFormDataParams,\n  StorageUploadFormDataResponse\n} from './utils/types'\nimport { fetchUpload } from './utils/upload'\nimport { appendImageTransformationParameters } from './utils'\n\n/**\n * @internal\n * This is an internal class.\n */\nexport class HasuraStorageApi {\n  private url: string\n  private accessToken?: string\n  private adminSecret?: string\n  private headers: Record<string, string> = {}\n\n  constructor({ url }: { url: string }) {\n    this.url = url\n  }\n\n  async uploadFormData({\n    formData,\n    bucketId,\n    headers: extraHeaders\n  }: StorageUploadFormDataParams): Promise<StorageUploadFormDataResponse> {\n    const { error, fileMetadata } = await fetchUpload(this.url, formData, {\n      bucketId,\n      headers: {\n        ...this.headers, // global nhost storage client headers to be sent with all `uploadFormData` calls\n        ...extraHeaders // extra headers to be sent with a specific call\n      },\n      accessToken: this.accessToken,\n      adminSecret: this.adminSecret\n    })\n\n    if (error) {\n      return { fileMetadata: null, error }\n    }\n\n    if (fileMetadata && !('processedFiles' in fileMetadata)) {\n      return {\n        fileMetadata: {\n          processedFiles: [fileMetadata]\n        },\n        error: null\n      }\n    }\n\n    return { fileMetadata, error: null }\n  }\n\n  async uploadFile({\n    file,\n    bucketId,\n    id,\n    name,\n    headers: extraHeaders\n  }: StorageUploadFileParams): Promise<StorageUploadFileResponse> {\n    const formData = new FormData()\n\n    formData.append('file[]', file)\n    formData.append(\n      'metadata[]',\n      new Blob([JSON.stringify({ id, name })], { type: 'application/json' }),\n      ''\n    )\n\n    const { error, fileMetadata } = await fetchUpload(this.url, formData, {\n      accessToken: this.accessToken,\n      adminSecret: this.adminSecret,\n      bucketId,\n      headers: {\n        ...this.headers, // global nhost storage client headers to be sent with all `uploadFile` calls\n        ...extraHeaders // extra headers to be sent with a specific call\n      }\n    })\n\n    if (error) {\n      return { fileMetadata: null, error }\n    }\n\n    if (fileMetadata && 'processedFiles' in fileMetadata) {\n      return {\n        fileMetadata: fileMetadata.processedFiles[0],\n        error: null\n      }\n    }\n\n    return { fileMetadata, error: null }\n  }\n\n  async downloadFile(params: StorageDownloadFileParams): Promise<StorageDownloadFileResponse> {\n    try {\n      const { fileId, headers: extraHeaders, ...imageTransformationParams } = params\n\n      const urlWithParams = appendImageTransformationParameters(\n        `${this.url}/files/${fileId}`,\n        imageTransformationParams\n      )\n\n      const response = await fetch(urlWithParams, {\n        method: 'GET',\n        headers: {\n          ...this.generateAuthHeaders(),\n          ...this.headers, // global nhost storage client headers to be sent with all `downloadFile` calls\n          ...extraHeaders // extra headers to be sent with a specific call\n        }\n      })\n\n      if (!response.ok) {\n        throw new Error(await response.text())\n      }\n\n      const file = await response.blob()\n\n      return { file, error: null }\n    } catch (error) {\n      return { file: null, error: error as Error }\n    }\n  }\n\n  async getPresignedUrl(params: ApiGetPresignedUrlParams): Promise<ApiGetPresignedUrlResponse> {\n    try {\n      const { fileId, headers: extraHeaders } = params\n\n      const response = await fetch(`${this.url}/files/${fileId}/presignedurl`, {\n        method: 'GET',\n        headers: {\n          ...this.generateAuthHeaders(),\n          ...this.headers, // global nhost storage client headers to be sent with all `getPresignedUrl` calls\n          ...extraHeaders // extra headers to be sent with a specific call\n        }\n      })\n      if (!response.ok) {\n        throw new Error(await response.text())\n      }\n      const presignedUrl = await response.json()\n      return { presignedUrl, error: null }\n    } catch (error) {\n      return { presignedUrl: null, error: error as Error }\n    }\n  }\n\n  async delete(params: ApiDeleteParams): Promise<ApiDeleteResponse> {\n    try {\n      const { fileId, headers: extraHeaders } = params\n      const response = await fetch(`${this.url}/files/${fileId}`, {\n        method: 'DELETE',\n        headers: {\n          ...this.generateAuthHeaders(),\n          ...this.headers, // global nhost storage client headers to be sent with all `delete` calls\n          ...extraHeaders // extra headers to be sent with a specific call\n        }\n      })\n      if (!response.ok) {\n        throw new Error(await response.text())\n      }\n      return { error: null }\n    } catch (error) {\n      return { error: error as Error }\n    }\n  }\n\n  /**\n   * Set the access token to use for authentication.\n   *\n   * @param accessToken Access token\n   * @returns Hasura Storage API instance\n   */\n  setAccessToken(accessToken?: string): HasuraStorageApi {\n    this.accessToken = accessToken\n\n    return this\n  }\n\n  /**\n   * Set the admin secret to use for authentication.\n   *\n   * @param adminSecret Hasura admin secret\n   * @returns Hasura Storage API instance\n   */\n  setAdminSecret(adminSecret?: string): HasuraStorageApi {\n    this.adminSecret = adminSecret\n\n    return this\n  }\n\n  /**\n   * Get global headers sent with all requests.\n   *\n   * @returns Record<string, string>\n   */\n  getHeaders(): Record<string, string> {\n    return this.headers\n  }\n\n  /**\n   * Set global headers to be sent with all requests.\n   *\n   * @param headers a key value pair headers object\n   * @returns Hasura Storage API instance\n   */\n  setHeaders(headers?: Record<string, string>): HasuraStorageApi {\n    if (!headers) {\n      return this\n    }\n\n    this.headers = {\n      ...this.headers,\n      ...headers\n    }\n\n    return this\n  }\n\n  /**\n   * Remove global headers sent with all requests, except for the role header to preserve\n   * the role set by 'setRole' method.\n   *\n   * @returns {HasuraStorageApi} - Hasura Storage API instance.\n   */\n  unsetHeaders(): HasuraStorageApi {\n    const userRole = this.headers['x-hasura-role']\n\n    // preserve the user role header to avoid invalidating preceding 'setRole' call.\n    this.headers = userRole ? { 'x-hasura-role': userRole } : {}\n\n    return this\n  }\n\n  private generateAuthHeaders(): HeadersInit | undefined {\n    if (!this.adminSecret && !this.accessToken) {\n      return undefined\n    }\n\n    if (this.adminSecret) {\n      return {\n        'x-hasura-admin-secret': this.adminSecret\n      }\n    }\n\n    return {\n      Authorization: `Bearer ${this.accessToken}`\n    }\n  }\n}\n","import { HasuraStorageApi } from './hasura-storage-api'\nimport {\n  appendImageTransformationParameters,\n  StorageDeleteParams,\n  StorageDeleteResponse,\n  StorageGetPresignedUrlParams,\n  StorageGetPresignedUrlResponse,\n  StorageGetUrlParams,\n  StorageUploadFileParams,\n  StorageUploadFileResponse,\n  StorageUploadFormDataParams,\n  StorageUploadFormDataResponse,\n  StorageUploadParams,\n  StorageUploadResponse,\n  StorageDownloadFileParams,\n  StorageDownloadFileResponse\n} from './utils'\n\nexport interface NhostStorageConstructorParams {\n  /**\n   * Storage endpoint.\n   */\n  url: string\n  /**\n   * Admin secret. When set, it is sent as an `x-hasura-admin-secret` header for all requests.\n   */\n  adminSecret?: string\n}\n/**\n * @alias Storage\n */\nexport class HasuraStorageClient {\n  readonly url: string\n  private api: HasuraStorageApi\n\n  constructor({ url, adminSecret }: NhostStorageConstructorParams) {\n    this.url = url\n    this.api = new HasuraStorageApi({ url })\n    this.setAdminSecret(adminSecret)\n  }\n\n  /**\n   * Use `nhost.storage.upload` to upload a file. \n   * \n   * It's possible to use [`File`](https://developer.mozilla.org/en-US/docs/Web/API/File) or [`FormData`](https://developer.mozilla.org/en-US/docs/Web/API/FormData) to upload a file. The `File` instance is only available in the browser while `FormData` with [`form-data`](https://www.npmjs.com/package/form-data) works both in the browser and in NodeJS (server).\n   * \n   * If no `bucketId` is specified the bucket `default` is used.\n   *\n   * @example\n   * \n   * Upload a file from a browser using `File`.\n   * \n   * ```ts\n   * await nhost.storage.upload({ file })\n   * ```\n   * \n   * Upload a file from a browser using `File` to a specific Bucket.\n   * \n    @example\n   * ```ts\n   * await nhost.storage.upload({ file, bucketId: '<Bucket-ID>' })\n   * ```\n   * \n   * Upload a file from a server using `FormData` with [`form-data`](https://www.npmjs.com/package/form-data).\n   *\n   * @example\n   * ```ts\n   * const fd = new FormData() \n   * fd.append('file', fs.createReadStream('./tests/assets/sample.pdf'))\n   * \n   * await storage.upload({\n   *   formData: fd\n   * })\n   * ```\n   * \n   * @docs https://docs.nhost.io/reference/javascript/storage/upload\n   */\n\n  async upload(params: StorageUploadFileParams): Promise<StorageUploadFileResponse>\n  async upload(params: StorageUploadFormDataParams): Promise<StorageUploadFormDataResponse>\n  async upload(params: StorageUploadParams): Promise<StorageUploadResponse> {\n    if ('file' in params) {\n      return this.api.uploadFile(params)\n    }\n\n    return this.api.uploadFormData(params)\n  }\n\n  /**\n   * Use `nhost.storage.getPublicUrl` to get the public URL of a file. The public URL can be used for un-authenticated users to access files. To access public files the `public` role must have permissions to select the file in the `storage.files` table.\n   *\n   * @example\n   * ```ts\n   * const publicUrl = nhost.storage.getPublicUrl({ fileId: '<File-ID>' })\n   * ```\n   *\n   * @docs https://docs.nhost.io/reference/javascript/storage/get-public-url\n   */\n  getPublicUrl(params: StorageGetUrlParams): string {\n    const { fileId, ...imageTransformationParams } = params\n    return appendImageTransformationParameters(\n      `${this.url}/files/${fileId}`,\n      imageTransformationParams\n    )\n  }\n\n  /**\n   * Use `nhost.storage.getPresignedUrl` to get a presigned URL of a file. To get a presigned URL the user must have permission to select the file in the `storage.files` table.\n   *\n   * @example\n   * ```ts\n   * const { presignedUrl, error} = await nhost.storage.getPresignedUrl({ fileId: '<File-ID>' })\n   *\n   * if (error) {\n   *   throw error;\n   * }\n   *\n   * console.log('url: ', presignedUrl.url)\n   * console.log('expiration: ', presignedUrl.expiration)\n   * ```\n   *\n   * @docs https://docs.nhost.io/reference/javascript/storage/get-presigned-url\n   */\n  async getPresignedUrl(\n    params: StorageGetPresignedUrlParams\n  ): Promise<StorageGetPresignedUrlResponse> {\n    const { fileId, headers, ...imageTransformationParams } = params\n    const { presignedUrl, error } = await this.api.getPresignedUrl(params)\n\n    if (error) {\n      return { presignedUrl: null, error }\n    }\n\n    if (!presignedUrl) {\n      return { presignedUrl: null, error: new Error('Invalid file id') }\n    }\n\n    const urlWithTransformationParams = appendImageTransformationParameters(\n      presignedUrl.url,\n      imageTransformationParams\n    )\n\n    return {\n      presignedUrl: {\n        ...presignedUrl,\n        url: urlWithTransformationParams\n      },\n      error: null\n    }\n  }\n\n  /**\n   * Use `nhost.storage.download` to download a file. To download a file the user must have permission to select the file in the `storage.files` table.\n   *\n   * @example\n   * ```ts\n   * const { file, error} = await nhost.storage.download({ fileId: '<File-ID>' })\n   * ```\n   *\n   * @docs https://docs.nhost.io/reference/javascript/storage/download\n   */\n  async download(params: StorageDownloadFileParams): Promise<StorageDownloadFileResponse> {\n    const { file, error } = await this.api.downloadFile(params)\n\n    if (error) {\n      return { file: null, error }\n    }\n\n    if (!file) {\n      return { file: null, error: new Error('File does not exist') }\n    }\n\n    return {\n      file,\n      error: null\n    }\n  }\n\n  /**\n   * Use `nhost.storage.delete` to delete a file. To delete a file the user must have permissions to delete the file in the `storage.files` table. Deleting the file using `nhost.storage.delete()` will delete both the file and its metadata.\n   *\n   * @example\n   * ```ts\n   * const { error } = await nhost.storage.delete({ fileId: 'uuid' })\n   * ```\n   *\n   * @docs https://docs.nhost.io/reference/javascript/storage/delete\n   */\n  async delete(params: StorageDeleteParams): Promise<StorageDeleteResponse> {\n    const { error } = await this.api.delete(params)\n    if (error) {\n      return { error }\n    }\n\n    return { error: null }\n  }\n\n  /**\n   * Use `nhost.storage.setAccessToken` to a set an access token to be used in subsequent storage requests. Note that if you're signin in users with `nhost.auth.signIn()` the access token will be set automatically.\n   *\n   * @example\n   * ```ts\n   * nhost.storage.setAccessToken('some-access-token')\n   * ```\n   *\n   * @param accessToken Access token\n   *\n   * @docs https://docs.nhost.io/reference/javascript/storage/set-access-token\n   */\n  setAccessToken(accessToken?: string): HasuraStorageClient {\n    this.api.setAccessToken(accessToken)\n\n    return this\n  }\n\n  /**\n   * Use `nhost.storage.adminSecret` to set the admin secret to be used for subsequent storage requests. This is useful if you want to run storage in \"admin mode\".\n   *\n   * @example\n   * ```ts\n   * nhost.storage.setAdminSecret('some-admin-secret')\n   * ```\n   *\n   * @param adminSecret Hasura admin secret\n   *\n   * @docs https://docs.nhost.io/reference/javascript/storage/set-admin-secret\n   */\n  setAdminSecret(adminSecret?: string): HasuraStorageClient {\n    this.api.setAdminSecret(adminSecret)\n\n    return this\n  }\n\n  /**\n   * Use `nhost.storage.getHeaders` to get global headers sent with all storage requests.\n   *\n   * @example\n   * ```ts\n   * nhost.storage.getHeaders()\n   * ```\n   *\n   * @docs https://docs.nhost.io/reference/javascript/storage/get-headers\n   */\n  getHeaders(): Record<string, string> {\n    return this.api.getHeaders()\n  }\n\n  /**\n   * Use `nhost.storage.setHeaders` to set global headers to be sent for all subsequent storage requests.\n   *\n   * @example\n   * ```ts\n   * nhost.storage.setHeaders({\n   *  'x-hasura-role': 'admin'\n   * })\n   * ```\n   *\n   * @param headers key value headers object\n   *\n   * @docs https://docs.nhost.io/reference/javascript/storage/set-headers\n   */\n  setHeaders(headers?: Record<string, string>): HasuraStorageClient {\n    this.api.setHeaders(headers)\n\n    return this\n  }\n\n  /**\n   * Use `nhost.storage.unsetHeaders` to remove the global headers sent for all subsequent storage requests.\n   *\n   * @example\n   * ```ts\n   * nhost.storage.unsetHeaders()\n   * ```\n   *\n   * @param headers key value headers object\n   *\n   * @docs https://docs.nhost.io/reference/javascript/storage/unset-headers\n   */\n  unsetHeaders(): HasuraStorageClient {\n    this.api.unsetHeaders()\n    return this\n  }\n}\n","import { assign, createMachine } from 'xstate'\nimport { FileUploadConfig, StorageErrorPayload } from '../utils'\nimport { fetchUpload } from '../utils/upload'\n\nexport type FileUploadContext = {\n  progress: number | null\n  loaded: number\n  error: StorageErrorPayload | null\n  id?: string\n  bucketId?: string\n  file?: File\n}\n\nexport type FileUploadEventPayload = {}\nexport type FileUploadEvents =\n  | { type: 'ADD'; file: File; id?: string; bucketId?: string; name?: string }\n  | ({\n      type: 'UPLOAD'\n      file?: File\n      id?: string\n      name?: string\n      bucketId?: string\n    } & FileUploadConfig)\n  | { type: 'UPLOAD_PROGRESS'; progress: number; loaded: number; additions: number }\n  | { type: 'UPLOAD_DONE'; id: string; bucketId: string }\n  | { type: 'UPLOAD_ERROR'; error: StorageErrorPayload }\n  | { type: 'CANCEL' }\n  | { type: 'DESTROY' }\n\nexport const INITIAL_FILE_CONTEXT: FileUploadContext = {\n  progress: null,\n  loaded: 0,\n  error: null,\n  bucketId: undefined,\n  file: undefined,\n  id: undefined\n}\n\nexport type FileUploadMachine = ReturnType<typeof createFileUploadMachine>\nexport const createFileUploadMachine = () =>\n  createMachine(\n    {\n      predictableActionArguments: true,\n      schema: {\n        context: {} as FileUploadContext,\n        events: {} as FileUploadEvents\n      },\n      tsTypes: {} as import('./file-upload.typegen').Typegen0,\n      context: { ...INITIAL_FILE_CONTEXT },\n      initial: 'idle',\n      on: {\n        DESTROY: { actions: 'sendDestroy', target: 'stopped' }\n      },\n      states: {\n        idle: {\n          on: {\n            ADD: { actions: 'addFile' },\n            UPLOAD: { cond: 'hasFile', target: 'uploading' }\n          }\n        },\n        uploading: {\n          entry: 'resetProgress',\n          on: {\n            UPLOAD_PROGRESS: { actions: ['incrementProgress', 'sendProgress'] },\n            UPLOAD_DONE: 'uploaded',\n            UPLOAD_ERROR: 'error',\n            CANCEL: 'idle'\n          },\n          invoke: { src: 'uploadFile' }\n        },\n        uploaded: {\n          entry: ['setFileMetadata', 'sendDone'],\n          on: {\n            ADD: { actions: 'addFile', target: 'idle' },\n            UPLOAD: { actions: 'resetContext', target: 'uploading' }\n          }\n        },\n        error: {\n          entry: ['setError', 'sendError'],\n          on: {\n            ADD: { actions: 'addFile', target: 'idle' },\n            UPLOAD: { actions: 'resetContext', target: 'uploading' }\n          }\n        },\n        stopped: { type: 'final' }\n      }\n    },\n    {\n      guards: {\n        hasFile: (context, event) => !!context.file || !!event.file\n      },\n\n      actions: {\n        incrementProgress: assign({\n          loaded: (_, { loaded }) => loaded,\n          progress: (_, { progress }) => progress\n        }),\n        setFileMetadata: assign({\n          id: (_, { id }) => id,\n          bucketId: (_, { bucketId }) => bucketId,\n          progress: (_) => 100\n        }),\n        setError: assign({ error: (_, { error }) => error }),\n        sendProgress: () => {},\n        sendError: () => {},\n        sendDestroy: () => {},\n        sendDone: () => {},\n        resetProgress: assign({ progress: (_) => null, loaded: (_) => 0 }),\n        resetContext: assign((_) => INITIAL_FILE_CONTEXT),\n        addFile: assign({\n          file: (_, { file }) => file,\n          bucketId: (_, { bucketId }) => bucketId,\n          id: (_, { id }) => id\n        })\n      },\n      services: {\n        uploadFile: (context, event) => (callback) => {\n          const file = (event.file || context.file)!\n          const data = new FormData()\n          data.append('file[]', file)\n\n          let currentLoaded = 0\n\n          fetchUpload(event.url, data, {\n            fileId: event.id || context.id,\n            bucketId: event.bucketId || context.bucketId,\n            accessToken: event.accessToken,\n            adminSecret: event.adminSecret,\n            name: event.name || file.name,\n            onUploadProgress: (event) => {\n              const loaded = event.total ? Math.round((event.loaded * file.size!) / event.total) : 0\n              const additions = loaded - currentLoaded\n              currentLoaded = loaded\n              callback({\n                type: 'UPLOAD_PROGRESS',\n                progress: event.total ? Math.round((loaded * 100) / event.total) : 0,\n                loaded,\n                additions\n              })\n            }\n          }).then(({ fileMetadata, error }) => {\n            if (error) {\n              callback({ type: 'UPLOAD_ERROR', error })\n            }\n            if (fileMetadata && !('processedFiles' in fileMetadata)) {\n              const { id, bucketId } = fileMetadata\n              callback({ type: 'UPLOAD_DONE', id, bucketId })\n            }\n\n            if (fileMetadata && 'processedFiles' in fileMetadata) {\n              // TODO: Add support for multiple files\n              const { id, bucketId } = fileMetadata.processedFiles[0]\n              callback({ type: 'UPLOAD_DONE', id, bucketId })\n            }\n          })\n\n          return () => {}\n        }\n      }\n    }\n  )\n","import { actions, ActorRefFrom, assign, createMachine, send, spawn } from 'xstate'\n\nimport { FileUploadConfig } from '../utils'\n\nimport { createFileUploadMachine, FileUploadMachine, INITIAL_FILE_CONTEXT } from './file-upload'\n\nconst { pure, sendParent } = actions\n\nexport type FileItemRef = ActorRefFrom<FileUploadMachine>\n\nexport type AnyFileList = File | File[] | FileList\n\nexport type MultipleFilesUploadContext = {\n  progress: number | null\n  files: FileItemRef[]\n  loaded: number\n  total: number\n}\n\nexport type MultipleFilesUploadEvents =\n  | { type: 'ADD'; files: AnyFileList; bucketId?: string }\n  | ({\n      type: 'UPLOAD'\n      files?: AnyFileList\n      bucketId?: string\n    } & FileUploadConfig)\n  | { type: 'UPLOAD_PROGRESS'; additions: number }\n  | { type: 'UPLOAD_DONE' }\n  | { type: 'UPLOAD_ERROR' }\n  | { type: 'CANCEL' }\n  | { type: 'REMOVE' }\n  | { type: 'CLEAR' }\n\nexport type MultipleFilesUploadMachine = ReturnType<typeof createMultipleFilesUploadMachine>\n\nexport const createMultipleFilesUploadMachine = () => {\n  return createMachine(\n    {\n      id: 'files-list',\n      schema: {\n        context: {} as MultipleFilesUploadContext,\n        events: {} as MultipleFilesUploadEvents\n      },\n      tsTypes: {} as import('./multiple-files-upload.typegen').Typegen0,\n      predictableActionArguments: true,\n      context: {\n        progress: null,\n        files: [],\n        loaded: 0,\n        total: 0\n      },\n      initial: 'idle',\n      on: {\n        UPLOAD: { cond: 'hasFileToDownload', actions: 'addItem', target: 'uploading' },\n        ADD: { actions: 'addItem' },\n        REMOVE: { actions: 'removeItem' }\n      },\n      states: {\n        idle: {\n          entry: ['resetProgress', 'resetLoaded', 'resetTotal'],\n          on: {\n            CLEAR: { actions: 'clearList', target: 'idle' }\n          }\n        },\n        uploading: {\n          entry: ['upload', 'startProgress', 'resetLoaded', 'resetTotal'],\n          on: {\n            UPLOAD_PROGRESS: { actions: ['incrementProgress'] },\n            UPLOAD_DONE: [\n              { cond: 'isAllUploaded', target: 'uploaded' },\n              { cond: 'isAllUploadedOrError', target: 'error' }\n            ],\n            UPLOAD_ERROR: [\n              { cond: 'isAllUploaded', target: 'uploaded' },\n              { cond: 'isAllUploadedOrError', target: 'error' }\n            ],\n            CANCEL: { actions: 'cancel', target: 'idle' }\n          }\n        },\n        uploaded: {\n          entry: 'setUploaded',\n          on: {\n            CLEAR: { actions: 'clearList', target: 'idle' }\n          }\n        },\n        error: {\n          on: {\n            CLEAR: { actions: 'clearList', target: 'idle' }\n          }\n        }\n      }\n    },\n    {\n      guards: {\n        hasFileToDownload: (context, event) =>\n          context.files.some((ref) => ref.getSnapshot()!.matches('idle')) || !!event.files,\n        isAllUploaded: (context) =>\n          context.files.every((item) => item.getSnapshot()?.matches('uploaded')),\n        isAllUploadedOrError: (context) =>\n          context.files.every((item) => {\n            const snap = item.getSnapshot()\n            return snap?.matches('error') || snap?.matches('uploaded')\n          })\n      },\n\n      actions: {\n        incrementProgress: assign((context, event) => {\n          const loaded: number = context.loaded + event.additions\n          const progress = Math.round((loaded * 100) / context.total)\n          return { ...context, loaded, progress }\n        }),\n        setUploaded: assign({\n          progress: (_) => 100,\n          loaded: ({ files }) =>\n            files\n              .map((ref) => ref.getSnapshot()!)\n              .filter((snap) => snap.matches('uploaded'))\n              .reduce((agg, curr) => agg + curr.context.file?.size!, 0)\n        }),\n        resetTotal: assign({\n          total: ({ files }) =>\n            files\n              .map((ref) => ref.getSnapshot()!)\n              .filter((snap) => !snap.matches('uploaded'))\n              .reduce((agg, curr) => agg + curr.context.file?.size!, 0)\n        }),\n        resetLoaded: assign({ loaded: (_) => 0 }),\n        startProgress: assign({ progress: (_) => 0 }),\n        resetProgress: assign({ progress: (_) => null }),\n        addItem: assign((context, { files, bucketId }) => {\n          const additions = files\n            ? Array.isArray(files)\n              ? files // File[]\n              : 'item' in files // FileList\n              ? Array.from(files)\n              : [files] // File\n            : [] // No file\n          const total = context.total + additions.reduce((agg, curr) => agg + curr.size, 0)\n          const progress = Math.round((context.loaded * 100) / total)\n          return {\n            files: [\n              ...context.files,\n              ...additions.map((file) =>\n                spawn(\n                  createFileUploadMachine()\n                    .withConfig({\n                      actions: {\n                        sendProgress: sendParent((_, { additions }) => ({\n                          type: 'UPLOAD_PROGRESS',\n                          additions\n                        })),\n                        sendDone: sendParent('UPLOAD_DONE'),\n                        sendError: sendParent('UPLOAD_ERROR'),\n                        sendDestroy: sendParent('REMOVE')\n                      }\n                    })\n                    .withContext({ ...INITIAL_FILE_CONTEXT, file, bucketId }),\n                  { sync: true }\n                )\n              )\n            ],\n            total,\n            loaded: context.loaded,\n            progress\n          }\n        }),\n        removeItem: assign({\n          files: (context) =>\n            context.files.filter((ref) => {\n              const stopped = ref.getSnapshot()?.matches('stopped')\n              if (stopped) {\n                ref.stop?.()\n              }\n              return !stopped\n            })\n        }),\n        clearList: pure((context) =>\n          context.files.map((ref) => send({ type: 'DESTROY' }, { to: ref.id }))\n        ),\n        upload: pure((context, event) => context.files.map((ref) => send(event, { to: ref.id }))),\n        cancel: pure((context) =>\n          context.files.map((ref) => send({ type: 'CANCEL' }, { to: ref.id }))\n        )\n      }\n    }\n  )\n}\n","import { InterpreterFrom } from 'xstate'\n\nimport { FileItemRef, FileUploadMachine } from '../machines'\nimport { FileUploadConfig, StorageActionErrorState, StorageUploadFileParams } from '../utils'\n\nexport interface UploadProgressState {\n  /**\n   * Returns `true` when the file is being uploaded.\n   */\n  isUploading: boolean\n  /**\n   * Returns the progress of the upload, from 0 to 100. Returns null if the upload has not started yet.\n   */\n  progress: number | null\n}\n\nexport interface UploadFileHandlerResult extends StorageActionErrorState {\n  /**\n   * Returns `true` when the file has been successfully uploaded.\n   */\n  isUploaded: boolean\n  /**\n   * Returns the id of the file.\n   */\n  id?: string\n  /**\n   * Returns the bucket id.\n   */\n  bucketId?: string\n  /**\n   * Returns the name of the file.\n   */\n  name?: string\n}\n\nexport interface FileUploadState extends UploadFileHandlerResult, UploadProgressState {}\n\nexport const uploadFilePromise = async (\n  params: FileUploadConfig & Partial<StorageUploadFileParams>,\n  interpreter: FileItemRef | InterpreterFrom<FileUploadMachine>\n): Promise<UploadFileHandlerResult> =>\n  new Promise<UploadFileHandlerResult>((resolve) => {\n    interpreter.send({\n      type: 'UPLOAD',\n      ...params\n    })\n    interpreter.subscribe((s) => {\n      if (s.matches('error')) {\n        resolve({\n          error: s.context.error,\n          isError: true,\n          isUploaded: false\n        })\n      } else if (s.matches('uploaded')) {\n        resolve({\n          error: null,\n          isError: false,\n          isUploaded: true,\n          id: s.context.id,\n          bucketId: s.context.id,\n          name: s.context.file?.name\n        })\n      }\n    })\n  })\n","import { InterpreterFrom } from 'xstate'\n\nimport { AnyFileList, FileItemRef, MultipleFilesUploadMachine } from '../machines'\nimport { FileUploadConfig } from '../utils'\n\nexport interface MultipleUploadProgressState {\n  /**\n   * Returns `true` when the files are being uploaded.\n   */\n  isUploading: boolean\n  /**\n   * Returns the overall progress of the upload, from 0 to 100. Returns null if the upload has not started yet.\n   */\n  progress: number | null\n}\n\nexport interface MultipleFilesHandlerResult {\n  /**\n   * The list of file uploads. The properties can be accessed through `item.getSnapshot()` of with the `useFileUploadItem` hook.\n   */\n  files: FileItemRef[]\n  /**\n   * Returns `true` when all upload request are processed, but at least one of them has failed.\n   */\n  isError: boolean\n  /**\n   * Returns the list of file uploads that have failed\n   */\n  errors: FileItemRef[]\n}\n\nexport interface MultipleFilesUploadState\n  extends MultipleFilesHandlerResult,\n    MultipleUploadProgressState {\n  /**\n   * Returns `true` when all the files have been successfully uploaded.\n   */\n  isUploaded: boolean\n}\n\nexport type UploadMultipleFilesActionParams = {\n  files?: AnyFileList\n  bucketId?: string\n}\n\nexport const uploadMultipleFilesPromise = async (\n  params: FileUploadConfig & UploadMultipleFilesActionParams,\n  service: InterpreterFrom<MultipleFilesUploadMachine>\n): Promise<MultipleFilesHandlerResult> =>\n  new Promise((resolve) => {\n    service.send({\n      type: 'UPLOAD',\n      ...params,\n      files: params.files\n    })\n    service.onTransition((s) => {\n      if (s.matches('error')) {\n        resolve({\n          errors: s.context.files.filter((ref) => ref.getSnapshot()?.context.error),\n          isError: true,\n          files: []\n        })\n      } else if (s.matches('uploaded')) {\n        resolve({ errors: [], isError: false, files: s.context.files })\n      }\n    })\n  })\n"],"names":["fetchUpload","backendUrl","data","accessToken","name","fileId","bucketId","adminSecret","onUploadProgress","initialHeaders","headers","metadata","url","response","responseData","_a","e","resolve","xhr","error","_e","_d","_b","_c","_h","_g","_f","key","value","appendImageTransformationParameters","params","urlObject","imageTransformationParams","accumulator","HasuraStorageApi","__publicField","formData","extraHeaders","fileMetadata","file","id","urlWithParams","userRole","HasuraStorageClient","presignedUrl","urlWithTransformationParams","INITIAL_FILE_CONTEXT","createFileUploadMachine","createMachine","context","event","assign","_","loaded","progress","callback","currentLoaded","additions","pure","sendParent","actions","createMultipleFilesUploadMachine","ref","item","snap","files","agg","curr","total","spawn","stopped","send","uploadFilePromise","interpreter","uploadMultipleFilesPromise","service"],"mappings":"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"}},
    {"offset": {"line": 1643, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@nhost+graphql-js@0.3.0_graphql@16.8.1/node_modules/@nhost/graphql-js/dist/index.esm.js","sources":["turbopack:///[project]/node_modules/.pnpm/@nhost+graphql-js@0.3.0_graphql@16.8.1/node_modules/@nhost/graphql-js/src/parse-args.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+graphql-js@0.3.0_graphql@16.8.1/node_modules/@nhost/graphql-js/src/resolve-request-document.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+graphql-js@0.3.0_graphql@16.8.1/node_modules/@nhost/graphql-js/src/client.ts"],"sourcesContent":["import { RequestDocument, RequestOptions, Variables } from './types'\n\nexport function parseRequestArgs<V extends Variables = Variables>(\n  documentOrOptions: RequestDocument | RequestOptions<V>,\n  variables?: V,\n  config?: RequestInit\n): RequestOptions<V> {\n  return (\n    (documentOrOptions as RequestOptions<V>).document\n      ? documentOrOptions\n      : {\n          document: documentOrOptions,\n          variables,\n          config\n        }\n  ) as RequestOptions<V>\n}\n","import { DocumentNode, OperationDefinitionNode, parse, print } from 'graphql'\nimport { RequestDocument } from './types'\n\n/**\n * helpers\n */\n\nfunction extractOperationName(document: DocumentNode): string | undefined {\n  let operationName = undefined\n\n  const operationDefinitions = document.definitions.filter(\n    (definition) => definition.kind === 'OperationDefinition'\n  ) as OperationDefinitionNode[]\n\n  if (operationDefinitions.length === 1) {\n    operationName = operationDefinitions[0].name?.value\n  }\n\n  return operationName\n}\n\nexport function resolveRequestDocument(document: RequestDocument): {\n  query: string\n  operationName?: string\n} {\n  if (typeof document === 'string') {\n    let operationName = undefined\n\n    try {\n      const parsedDocument = parse(document)\n      operationName = extractOperationName(parsedDocument)\n    } catch (err) {\n      // Failed parsing the document, the operationName will be undefined\n    }\n\n    return { query: document, operationName }\n  }\n\n  const operationName = extractOperationName(document)\n\n  return { query: print(document), operationName }\n}\n","import { TypedDocumentNode } from '@graphql-typed-document-node/core'\nimport fetch from 'isomorphic-unfetch'\nimport { parseRequestArgs } from './parse-args'\nimport { resolveRequestDocument } from './resolve-request-document'\nimport {\n  NhostGraphqlConstructorParams,\n  NhostGraphqlRequestConfig,\n  NhostGraphqlRequestResponse,\n  RemoveIndex,\n  RequestDocument,\n  RequestOptions,\n  Variables\n} from './types'\n\nimport { jwtDecode, JwtPayload } from 'jwt-decode'\n\n/**\n * @alias GraphQL\n */\nexport class NhostGraphqlClient {\n  readonly _url: string\n  private accessToken: string | null\n  private adminSecret?: string\n  private headers: Record<string, string> = {}\n\n  constructor(params: NhostGraphqlConstructorParams) {\n    const { url, adminSecret } = params\n\n    this._url = url\n    this.accessToken = null\n    this.adminSecret = adminSecret\n  }\n\n  private isAccessTokenValidOrNull = () => {\n    if (!this.accessToken) {\n      return true\n    }\n\n    try {\n      const decodedToken = jwtDecode(this.accessToken) as JwtPayload\n      return decodedToken.exp != null && decodedToken.exp * 1000 > Date.now()\n    } catch (error) {\n      console.error('Error decoding token:', error)\n      return false\n    }\n  }\n\n  private awaitForValidAccessTokenOrNull = async () => {\n    if (this.isAccessTokenValidOrNull()) {\n      return true\n    }\n\n    const waitForValidTokenOrNull = () => {\n      if (this.isAccessTokenValidOrNull()) {\n        return Promise.resolve(true)\n      }\n      return new Promise((resolve) => {\n        setTimeout(() => waitForValidTokenOrNull().then(resolve), 100)\n      })\n    }\n\n    return waitForValidTokenOrNull()\n  }\n\n  /**\n   * Use `nhost.graphql.request` to send a GraphQL request. For more serious GraphQL usage we recommend using a GraphQL client such as Apollo Client (https://www.apollographql.com/docs/react).\n   *\n   * @example\n   * ```ts\n   * const CUSTOMERS = gql`\n   *  query {\n   *   customers {\n   *    id\n   *    name\n   *  }\n   * }\n   * `\n   * const { data, error } = await nhost.graphql.request(CUSTOMERS)\n   * ```\n   *\n   * @docs https://docs.nhost.io/reference/javascript/graphql/request\n   */\n  request<T = any, V = Variables>(\n    document: RequestDocument | TypedDocumentNode<T, V>,\n    ...variablesAndRequestHeaders: V extends Record<any, never>\n      ? [variables?: V, config?: NhostGraphqlRequestConfig]\n      : keyof RemoveIndex<V> extends never\n      ? [variables?: V, config?: NhostGraphqlRequestConfig]\n      : [variables: V, config?: NhostGraphqlRequestConfig]\n  ): Promise<NhostGraphqlRequestResponse<T>>\n  async request<T = any, V extends Variables = Variables>(\n    options: RequestOptions<V, T>\n  ): Promise<NhostGraphqlRequestResponse<T>>\n  async request<T = any, V extends Variables = Variables>(\n    documentOrOptions: RequestDocument | TypedDocumentNode<T, V> | RequestOptions<V>,\n    ...variablesAndRequestHeaders: V extends Record<any, never>\n      ? [variables?: V, config?: NhostGraphqlRequestConfig]\n      : keyof RemoveIndex<V> extends never\n      ? [variables?: V, config?: NhostGraphqlRequestConfig]\n      : [variables: V, config?: NhostGraphqlRequestConfig]\n  ): Promise<NhostGraphqlRequestResponse<T>> {\n    const [variables, config] = variablesAndRequestHeaders\n    const requestOptions = parseRequestArgs(documentOrOptions, variables, config)\n\n    const { headers: extraHeaders, ...otherOptions } = config || {}\n    const { query, operationName } = resolveRequestDocument(requestOptions.document)\n\n    if (typeof process !== 'undefined' && !process.env.TEST_MODE) {\n      // We skip this while running unit tests because the accessToken is generated using faker\n      await this.awaitForValidAccessTokenOrNull()\n    }\n\n    try {\n      const response = await fetch(this.httpUrl, {\n        method: 'POST',\n        body: JSON.stringify({\n          operationName,\n          query,\n          variables\n        }),\n        headers: {\n          'Content-Type': 'application/json',\n          ...this.generateAccessTokenHeaders(),\n          ...this.headers, // graphql client headers to be sent with all `request` calls\n          ...extraHeaders // extra headers to be sent with a specific call\n        },\n        ...otherOptions\n      })\n      if (!response.ok) {\n        return {\n          data: null,\n          error: {\n            error: response.statusText,\n            message: response.statusText,\n            status: response.status\n          }\n        }\n      }\n      const { data, errors } = await response.json()\n\n      if (errors) {\n        return {\n          data: null,\n          error: errors\n        }\n      }\n      if (typeof data !== 'object' || Array.isArray(data) || data === null) {\n        return {\n          data: null,\n          error: {\n            error: 'invalid-response',\n            message: 'incorrect response data from GraphQL server',\n            status: 0\n          }\n        }\n      }\n\n      return { data, error: null }\n    } catch (e) {\n      const error = e as Error\n      return {\n        data: null,\n        error: {\n          message: error.message,\n          status: error.name === 'AbortError' ? 0 : 500,\n          error: error.name === 'AbortError' ? 'abort-error' : 'unknown'\n        }\n      }\n    }\n  }\n\n  /**\n   * Use `nhost.graphql.httpUrl` to get the GraphQL HTTP URL.\n   * @example\n   * ```ts\n   * const url = nhost.graphql.httpUrl;\n   * ```\n   *\n   * @docs https://docs.nhost.io/reference/javascript/graphql/get-http-url\n   */\n  get httpUrl(): string {\n    return this._url\n  }\n\n  /**\n   * Use `nhost.graphql.wsUrl` to get the GraphQL WebSocket URL.\n   * @example\n   * ```ts\n   * const url = nhost.graphql.wsUrl;\n   * ```\n   *\n   * @docs https://docs.nhost.io/reference/javascript/graphql/get-ws-url\n   */\n  get wsUrl(): string {\n    return this._url.replace(/^(http)(s?):\\/\\//, 'ws$2://')\n  }\n\n  /**\n   * Use `nhost.graphql.url` to get the GraphQL URL.\n   * @deprecated Use `nhost.graphql.httpUrl` and `nhost.graphql.wsUrl` instead.\n   */\n  get url(): string {\n    return this._url\n  }\n\n  /**\n   * Use `nhost.graphql.getUrl()` to get the GraphQL URL.\n   * @deprecated Use `nhost.graphql.httpUrl` and `nhost.graphql.wsUrl` instead.\n   */\n  getUrl(): string {\n    return this._url\n  }\n\n  /**\n   * Use `nhost.graphql.setAccessToken` to a set an access token to be used in subsequent graphql requests. Note that if you're signin in users with `nhost.auth.signIn()` the access token will be set automatically.\n   *\n   * @example\n   * ```ts\n   * nhost.graphql.setAccessToken('some-access-token')\n   * ```\n   *\n   * @docs https://docs.nhost.io/reference/javascript/graphql/set-access-token\n   */\n  setAccessToken(accessToken: string | undefined) {\n    if (!accessToken) {\n      this.accessToken = null\n      return\n    }\n\n    this.accessToken = accessToken\n  }\n\n  /**\n   * Use `nhost.graphql.getHeaders` to get the global headers sent with all graphql requests\n   *\n   * @example\n   * ```ts\n   * nhost.graphql.getHeaders()\n   * ```\n   *\n   * @docs https://docs.nhost.io/reference/javascript/graphql/get-headers\n   */\n  getHeaders(): Record<string, string> {\n    return this.headers\n  }\n\n  /**\n   * Use `nhost.graphql.setHeaders` to set global headers to be sent in all subsequent graphql requests\n   *\n   * @example\n   * ```ts\n   * nhost.graphql.setHeaders({\n   *  'x-hasura-role': 'admin'\n   * })\n   * ```\n   *\n   * @docs https://docs.nhost.io/reference/javascript/graphql/set-headers\n   */\n  setHeaders(headers?: Record<string, string>) {\n    if (!headers) {\n      return\n    }\n\n    this.headers = {\n      ...this.headers,\n      ...headers\n    }\n  }\n\n  /**\n   * Use `nhost.graphql.unsetHeaders` to remove global headers sent with all requests, except for the role header to preserve\n   * the role set by 'setRole' method.\n   *\n   * @example\n   * ```ts\n   * nhost.graphql.unsetHeaders()\n   * ```\n   *\n   * @docs https://docs.nhost.io/reference/javascript/graphql/unset-headers\n   */\n  unsetHeaders() {\n    const userRole = this.headers['x-hasura-role']\n\n    // preserve the user role header to avoid invalidating preceding 'setRole' call.\n    this.headers = userRole ? { 'x-hasura-role': userRole } : {}\n  }\n\n  private generateAccessTokenHeaders(): NhostGraphqlRequestConfig['headers'] {\n    if (this.adminSecret) {\n      return {\n        'x-hasura-admin-secret': this.adminSecret\n      }\n    }\n    if (this.accessToken) {\n      return {\n        Authorization: `Bearer ${this.accessToken}`\n      }\n    }\n    return {}\n  }\n}\n"],"names":["parseRequestArgs","documentOrOptions","variables","config","extractOperationName","document","operationName","operationDefinitions","definition","_a","resolveRequestDocument","parsedDocument","parse","print","NhostGraphqlClient","params","decodedToken","jwtDecode","error","waitForValidTokenOrNull","resolve","url","adminSecret","variablesAndRequestHeaders","requestOptions","extraHeaders","otherOptions","query","response","fetch","data","errors","e","accessToken","headers","userRole"],"mappings":"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"}},
    {"offset": {"line": 1869, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@nhost+nhost-js@3.3.1_graphql@16.8.1/node_modules/@nhost/nhost-js/dist/index.esm.js","sources":["turbopack:///[project]/node_modules/.pnpm/@nhost+nhost-js@3.3.1_graphql@16.8.1/node_modules/@nhost/nhost-js/src/utils/helpers.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+nhost-js@3.3.1_graphql@16.8.1/node_modules/@nhost/nhost-js/src/clients/auth.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+nhost-js@3.3.1_graphql@16.8.1/node_modules/@nhost/nhost-js/src/clients/functions/index.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+nhost-js@3.3.1_graphql@16.8.1/node_modules/@nhost/nhost-js/src/clients/graphql.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+nhost-js@3.3.1_graphql@16.8.1/node_modules/@nhost/nhost-js/src/clients/storage.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+nhost-js@3.3.1_graphql@16.8.1/node_modules/@nhost/nhost-js/src/clients/nhost.ts"],"sourcesContent":["import { NhostClientConstructorParams } from './types'\n\n// a port can be a number or a placeholder string with leading and trailing double underscores, f.e. \"8080\" or \"__PLACEHOLDER_NAME__\"\nexport const LOCALHOST_REGEX =\n  /^((?<protocol>http[s]?):\\/\\/)?(?<host>(localhost|local))(:(?<port>(\\d+|__\\w+__)))?$/\n\n/**\n * \\`subdomain\\` and `region` should be used when running the Nhost platform\n *\n * @param subdomainAndRegion\n * @param service\n * @returns\n */\nexport function urlFromSubdomain(\n  subdomainAndRegion: Pick<NhostClientConstructorParams, 'region' | 'subdomain'>,\n  service: string\n): string {\n  const { subdomain, region } = subdomainAndRegion\n\n  if (!subdomain) {\n    throw new Error('A `subdomain` must be set.')\n  }\n\n  // check if subdomain is [http[s]://]localhost[:port] or [http[s]://]local[:port]\n  const subdomainLocalhostFound = subdomain.match(LOCALHOST_REGEX)\n  if (subdomainLocalhostFound?.groups) {\n    const { protocol, host, port } = subdomainLocalhostFound.groups\n\n    const urlFromEnv = getValueFromEnv(service)\n    if (urlFromEnv) {\n      return urlFromEnv\n    }\n\n    if (host === 'localhost') {\n      console.warn(\n        'The `subdomain` is set to \"localhost\". Support for this will be removed in a future release. Please use \"local\" instead.'\n      )\n\n      return `${protocol || 'http'}://localhost:${port || 1337}/v1/${service}`\n    }\n\n    return port\n      ? `${protocol || 'https'}://local.${service}.local.nhost.run:${port}/v1`\n      : `${protocol || 'https'}://local.${service}.local.nhost.run/v1`\n  }\n\n  if (!region) {\n    throw new Error('`region` must be set when using a `subdomain` other than \"local\".')\n  }\n\n  return `https://${subdomain}.${service}.${region}.nhost.run/v1`\n}\n\n/**\n *\n * @returns whether the code is running in a browser\n */\nfunction isBrowser(): boolean {\n  return typeof window !== 'undefined'\n}\n\n/**\n *\n * @returns whether the code is running in a Node.js environment\n */\nfunction environmentIsAvailable() {\n  return typeof process !== 'undefined' && process.env\n}\n\n/**\n *\n * @param service auth | storage | graphql | functions\n * @returns the service's url if the corresponding env var is set\n * NHOST_${service}_URL\n */\nfunction getValueFromEnv(service: string) {\n  if (isBrowser() || !environmentIsAvailable()) {\n    return null\n  }\n\n  return process.env[`NHOST_${service.toUpperCase()}_URL`]\n}\n\n/**\n * Combines a base URL and a path into a single URL string.\n *\n * @param baseUrl - The base URL to use.\n * @param path - The path to append to the base URL.\n * @returns The combined URL string.\n */\nexport function buildUrl(baseUrl: string, path: string) {\n  const hasLeadingSlash = path.startsWith('/')\n  const urlPath = hasLeadingSlash ? path : `/${path}`\n  return baseUrl + urlPath\n}\n","import { HasuraAuthClient } from '@nhost/hasura-auth-js'\n\nimport { urlFromSubdomain } from '../utils/helpers'\nimport { NhostClientConstructorParams } from '../utils/types'\n\n/**\n * Creates a client for Auth from either a subdomain or a URL\n */\nexport function createAuthClient(params: NhostClientConstructorParams) {\n  const authUrl = 'subdomain' in params ? urlFromSubdomain(params, 'auth') : params.authUrl\n\n  const { subdomain, region } = params\n\n  if (!authUrl) {\n    throw new Error('Please provide `subdomain` or `authUrl`.')\n  }\n\n  return new HasuraAuthClient({\n    url: authUrl,\n    broadcastKey: `${subdomain}${region ?? 'local'}`,\n    ...params\n  })\n}\n","import fetch from 'isomorphic-unfetch'\nimport { buildUrl, urlFromSubdomain } from '../../utils/helpers'\nimport { NhostClientConstructorParams } from '../../utils/types'\nimport {\n  NhostFunctionCallConfig,\n  NhostFunctionCallResponse,\n  NhostFunctionsConstructorParams\n} from './types'\n/**\n * Creates a client for Functions from either a subdomain or a URL\n */\nexport function createFunctionsClient(params: NhostClientConstructorParams) {\n  const functionsUrl =\n    'subdomain' in params ? urlFromSubdomain(params, 'functions') : params.functionsUrl\n\n  if (!functionsUrl) {\n    throw new Error('Please provide `subdomain` or `functionsUrl`.')\n  }\n\n  return new NhostFunctionsClient({ url: functionsUrl, ...params })\n}\n\n/**\n * @alias Functions\n */\nexport class NhostFunctionsClient {\n  readonly url: string\n  private accessToken: string | null\n  private adminSecret?: string\n  private headers: Record<string, string> = {}\n\n  constructor(params: NhostFunctionsConstructorParams) {\n    const { url, adminSecret } = params\n\n    this.url = url\n    this.accessToken = null\n    this.adminSecret = adminSecret\n  }\n\n  /**\n   * Use `nhost.functions.call` to call (sending a POST request to) a serverless function. Use generic\n   * types to specify the expected response data, request body and error message.\n   *\n   * @example\n   * ### Without generic types\n   * ```ts\n   * await nhost.functions.call('send-welcome-email', { email: 'joe@example.com', name: 'Joe Doe' })\n   * ```\n   *\n   * @example\n   * ### Using generic types\n   * ```ts\n   * type Data = {\n   *   message: string\n   * }\n   *\n   * type Body = {\n   *   email: string\n   *   name: string\n   * }\n   *\n   * type ErrorMessage = {\n   *   details: string\n   * }\n   *\n   * // The function will only accept a body of type `Body`\n   * const { res, error } = await nhost.functions.call<Data, Body, ErrorMessage>(\n   *   'send-welcome-email',\n   *   { email: 'joe@example.com', name: 'Joe Doe' }\n   * )\n   *\n   * // Now the response data is typed as `Data`\n   * console.log(res?.data.message)\n   *\n   * // Now the error message is typed as `ErrorMessage`\n   * console.log(error?.message.details)\n   * ```\n   *\n   * @docs https://docs.nhost.io/reference/javascript/nhost-js/functions/call\n   */\n  async call<TData = unknown, TBody = any, TErrorMessage = any>(\n    url: string,\n    body?: TBody | null,\n    config?: NhostFunctionCallConfig\n  ): Promise<NhostFunctionCallResponse<TData, TErrorMessage>> {\n    const headers: HeadersInit = {\n      'Content-Type': 'application/json',\n      ...this.generateAccessTokenHeaders(),\n      ...config?.headers,\n      ...this.headers // nhost functions client headers to be sent with all calls\n    }\n\n    const fullUrl = buildUrl(this.url, url)\n\n    try {\n      const result = await fetch(fullUrl, {\n        body: body ? JSON.stringify(body) : null,\n        headers,\n        method: 'POST'\n      })\n\n      if (!result.ok) {\n        let message: TErrorMessage\n\n        if (result.headers.get('content-type')?.includes('application/json')) {\n          message = await result.json()\n        } else {\n          message = (await result.text()) as unknown as TErrorMessage\n        }\n\n        return {\n          res: null,\n          error: {\n            message,\n            error: result.statusText,\n            status: result.status\n          }\n        }\n      }\n\n      let data: TData\n\n      if (result.headers.get('content-type')?.includes('application/json')) {\n        data = await result.json()\n      } else {\n        data = (await result.text()) as unknown as TData\n      }\n\n      return {\n        res: { data, status: result.status, statusText: result.statusText },\n        error: null\n      }\n    } catch (e) {\n      const error = e as Error\n      return {\n        res: null,\n        error: {\n          message: error.message as unknown as TErrorMessage,\n          status: error.name === 'AbortError' ? 0 : 500,\n          error: error.name === 'AbortError' ? 'abort-error' : 'unknown'\n        }\n      }\n    }\n  }\n\n  /**\n   * Use `nhost.functions.setAccessToken` to a set an access token to be used in subsequent functions requests. Note that if you're signin in users with `nhost.auth.signIn()` the access token will be set automatically.\n   *\n   * @example\n   * ```ts\n   * nhost.functions.setAccessToken('some-access-token')\n   * ```\n   *\n   * @docs https://docs.nhost.io/reference/javascript/nhost-js/functions/set-access-token\n   */\n  setAccessToken(accessToken: string | undefined) {\n    if (!accessToken) {\n      this.accessToken = null\n      return\n    }\n\n    this.accessToken = accessToken\n  }\n\n  /**\n   * Use `nhost.functions.getHeaders` to get the global headers sent with all functions requests.\n   *\n   * @example\n   * ```ts\n   * nhost.functions.getHeaders()\n   * ```\n   *\n   * @docs https://docs.nhost.io/reference/javascript/nhost-js/functions/get-headers\n   */\n  getHeaders(): Record<string, string> {\n    return this.headers\n  }\n\n  /**\n   * Use `nhost.functions.setHeaders` to a set global headers to be sent in all subsequent functions requests.\n   *\n   * @example\n   * ```ts\n   * nhost.functions.setHeaders({\n   *  'x-hasura-role': 'admin'\n   * })\n   * ```\n   *\n   * @docs https://docs.nhost.io/reference/javascript/nhost-js/functions/set-headers\n   */\n  setHeaders(headers?: Record<string, string>) {\n    if (!headers) {\n      return\n    }\n\n    this.headers = {\n      ...this.headers,\n      ...headers\n    }\n  }\n\n  /**\n   * Use `nhost.functions.unsetHeaders` to a unset global headers sent with all functions requests.\n   *\n   * @example\n   * ```ts\n   * nhost.functions.unsetHeaders()\n   * ```\n   *\n   * @docs https://docs.nhost.io/reference/javascript/nhost-js/functions/unset-headers\n   */\n  unsetHeaders() {\n    const userRole = this.headers['x-hasura-role']\n\n    // preserve the user role header to avoid invalidating preceding 'setRole' call.\n    this.headers = userRole ? { 'x-hasura-role': userRole } : {}\n  }\n\n  generateAccessTokenHeaders(): NhostFunctionCallConfig['headers'] {\n    if (this.adminSecret) {\n      return {\n        'x-hasura-admin-secret': this.adminSecret\n      }\n    }\n    if (this.accessToken) {\n      return {\n        Authorization: `Bearer ${this.accessToken}`\n      }\n    }\n    return {}\n  }\n}\n","import { NhostGraphqlClient } from '@nhost/graphql-js'\nimport { urlFromSubdomain } from '../utils/helpers'\nimport { NhostClientConstructorParams } from '../utils/types'\n\n/**\n * Creates a client for GraphQL from either a subdomain or a URL\n */\nexport function createGraphqlClient(params: NhostClientConstructorParams) {\n  const graphqlUrl = 'subdomain' in params ? urlFromSubdomain(params, 'graphql') : params.graphqlUrl\n\n  if (!graphqlUrl) {\n    throw new Error('Please provide `subdomain` or `graphqlUrl`.')\n  }\n\n  return new NhostGraphqlClient({ url: graphqlUrl, ...params })\n}\n","import { HasuraStorageClient } from '@nhost/hasura-storage-js'\n\nimport { urlFromSubdomain } from '../utils/helpers'\nimport { NhostClientConstructorParams } from '../utils/types'\n\n/**\n * Creates a client for Storage from either a subdomain or a URL\n */\nexport function createStorageClient(params: NhostClientConstructorParams) {\n  const storageUrl = 'subdomain' in params ? urlFromSubdomain(params, 'storage') : params.storageUrl\n\n  if (!storageUrl) {\n    throw new Error('Please provide `subdomain` or `storageUrl`.')\n  }\n\n  return new HasuraStorageClient({ url: storageUrl, ...params })\n}\n","import { NhostGraphqlClient } from '@nhost/graphql-js'\nimport { HasuraAuthClient } from '@nhost/hasura-auth-js'\nimport { HasuraStorageClient } from '@nhost/hasura-storage-js'\nimport { NhostClientConstructorParams } from '../utils/types'\nimport { createAuthClient } from './auth'\nimport { createFunctionsClient, NhostFunctionsClient } from './functions'\nimport { createGraphqlClient } from './graphql'\nimport { createStorageClient } from './storage'\n\nexport const createNhostClient = (params: NhostClientConstructorParams) => new NhostClient(params)\n\nexport class NhostClient {\n  auth: HasuraAuthClient\n  storage: HasuraStorageClient\n  functions: NhostFunctionsClient\n  graphql: NhostGraphqlClient\n  private _adminSecret?: string\n  readonly devTools?: boolean\n\n  /**\n   *\n   * @example\n   * ```ts\n   * // Create a new Nhost client from subdomain and region.\n   * const nhost = new NhostClient({ subdomain, region });\n   * ```\n   *\n   *\n   * ```ts\n   * // Create a new Nhost client from individual service URLs (custom domains, self-hosting, etc).\n   * const nhost = new NhostClient({\n   *   authUrl: \"my-auth-service-url\",\n   *   storageUrl: \"my-storage-service-url\",\n   *   graphqlUrl: \"my-graphql-service-url\",\n   *   functionsUrl: \"my-functions-service-url\",\n   * });\n   * ```\n   *\n   *\n   * ```ts\n   * // Create a new Nhost client for local development.\n   * const nhost = new NhostClient({ subdomain: \"local\" });\n   * ```\n   *\n   * @docs https://docs.nhost.io/reference/javascript\n   */\n  constructor({\n    refreshIntervalTime,\n    clientStorage,\n    clientStorageType,\n    autoRefreshToken,\n    autoSignIn,\n    adminSecret,\n    devTools,\n    start = true,\n    ...urlParams\n  }: NhostClientConstructorParams) {\n    // * Set clients for all services\n    this.auth = createAuthClient({\n      refreshIntervalTime,\n      clientStorage,\n      clientStorageType,\n      autoRefreshToken,\n      autoSignIn,\n      start,\n      ...urlParams\n    })\n    this.storage = createStorageClient({ adminSecret, ...urlParams })\n    this.functions = createFunctionsClient({ adminSecret, ...urlParams })\n    this.graphql = createGraphqlClient({ adminSecret, ...urlParams })\n\n    this.auth.onAuthStateChanged((event, session) => {\n      if (event === 'SIGNED_OUT') {\n        this.storage.setAccessToken(undefined)\n        this.functions.setAccessToken(undefined)\n        this.graphql.setAccessToken(undefined)\n\n        return\n      }\n\n      const accessToken = session?.accessToken\n      this.storage.setAccessToken(accessToken)\n      this.functions.setAccessToken(accessToken)\n      this.graphql.setAccessToken(accessToken)\n    })\n\n    // * Update access token for clients, including when signin in\n    this.auth.onTokenChanged((session) => {\n      const accessToken = session?.accessToken\n      this.storage.setAccessToken(accessToken)\n      this.functions.setAccessToken(accessToken)\n      this.graphql.setAccessToken(accessToken)\n    })\n\n    this._adminSecret = adminSecret\n    this.devTools = devTools\n  }\n\n  get adminSecret(): string | undefined {\n    return this._adminSecret\n  }\n\n  set adminSecret(newValue: string | undefined) {\n    this._adminSecret = newValue\n    this.storage.setAdminSecret(newValue)\n    // TODO inconsistent API: storage can change admin secret, but functions/graphql cannot\n    // this.functions.setAdminSecret(newValue)\n    // this.graphql.setAdminSecret(newValue)\n  }\n\n  /**\n   * Use `nhost.setRole` to set the user role for all subsequent GraphQL, storage, and functions calls.\n   * Underneath, this method sets the `x-hasura-role` header on the graphql, storage,\n   * and functions clients.\n   *\n   * ```ts\n   * nhost.graphql.setHeaders({ 'x-hasura-role': role })\n   * nhost.storage.setHeaders({ 'x-hasura-role': role })\n   * nhost.functions.setHeaders({ 'x-hasura-role': role })\n   * ```\n   *\n   * Note: Exercise caution when mixing the use of `setRole` along with `setHeaders` when setting the\n   * `x-hasura-role` header, as the last call will override any previous ones.\n   *\n   * @example\n   * ```ts\n   * nhost.setRole('admin')\n   * ```\n   *\n   * @docs https://docs.nhost.io/reference/javascript/nhost-js/set-role\n   */\n  setRole(role: string) {\n    this.graphql.setHeaders({ 'x-hasura-role': role })\n    this.storage.setHeaders({ 'x-hasura-role': role })\n    this.functions.setHeaders({ 'x-hasura-role': role })\n  }\n\n  /**\n   * Use `nhost.unsetRole` to unset the user role for all subsequent graphql, storage and functions calls.\n   * Underneath, this method removes the `x-hasura-role` header from the graphql, storage and functions clients.\n   *\n   * Note: Exercise caution when mixing the use of `unsetRole` along with `setHeaders` when setting the\n   * `x-hasura-role` header, as the last call will override any previous ones.\n   *\n   * @example\n   * ```ts\n   * nhost.unsetRole()\n   * ```\n   *\n   * @docs https://docs.nhost.io/reference/javascript/nhost-js/unset-role\n   */\n  unsetRole() {\n    this.graphql.setHeaders((({ 'x-hasura-role': _, ...rest }) => rest)(this.graphql.getHeaders()))\n    this.storage.setHeaders((({ 'x-hasura-role': _, ...rest }) => rest)(this.storage.getHeaders()))\n    this.functions.setHeaders(\n      (({ 'x-hasura-role': _, ...rest }) => rest)(this.functions.getHeaders())\n    )\n  }\n}\n"],"names":["LOCALHOST_REGEX","urlFromSubdomain","subdomainAndRegion","service","subdomain","region","subdomainLocalhostFound","protocol","host","port","urlFromEnv","getValueFromEnv","isBrowser","environmentIsAvailable","buildUrl","baseUrl","path","urlPath","createAuthClient","params","authUrl","HasuraAuthClient","createFunctionsClient","functionsUrl","NhostFunctionsClient","__publicField","url","adminSecret","body","config","headers","fullUrl","result","fetch","message","_a","data","_b","e","error","accessToken","userRole","createGraphqlClient","graphqlUrl","NhostGraphqlClient","createStorageClient","storageUrl","HasuraStorageClient","createNhostClient","NhostClient","refreshIntervalTime","clientStorage","clientStorageType","autoRefreshToken","autoSignIn","devTools","start","urlParams","event","session","newValue","role","_","rest"],"mappings":"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"}},
    {"offset": {"line": 2248, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/node_modules/.pnpm/use-isomorphic-layout-effect@1.2.1_@types+react@19.2.7_react@19.2.3/node_modules/use-isomorphic-layout-effect/dist/use-isomorphic-layout-effect.browser.esm.js"],"sourcesContent":["import { useLayoutEffect } from 'react';\n\nvar index = useLayoutEffect ;\n\nexport { index as default };\n"],"names":[],"mappings":";;;;AAAA;;AAEA,IAAI,QAAQ,sVAAe","ignoreList":[0]}},
    {"offset": {"line": 2260, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/node_modules/.pnpm/@xstate+react@3.2.2_@types+react@19.2.7_react@19.2.3_xstate@4.38.3/node_modules/@xstate/react/es/useConstant.js"],"sourcesContent":["import * as React from 'react';\nexport default function useConstant(fn) {\n    var ref = React.useRef();\n    if (!ref.current) {\n        ref.current = { v: fn() };\n    }\n    return ref.current.v;\n}\n"],"names":[],"mappings":";;;;AAAA;;AACe,SAAS,YAAY,EAAE;IAClC,IAAI,MAAM,6UAAY;IACtB,IAAI,CAAC,IAAI,OAAO,EAAE;QACd,IAAI,OAAO,GAAG;YAAE,GAAG;QAAK;IAC5B;IACA,OAAO,IAAI,OAAO,CAAC,CAAC;AACxB","ignoreList":[0]}},
    {"offset": {"line": 2279, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/node_modules/.pnpm/@xstate+react@3.2.2_@types+react@19.2.7_react@19.2.3_xstate@4.38.3/node_modules/@xstate/react/es/useInterpret.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { useEffect, useState } from 'react';\nimport useIsomorphicLayoutEffect from 'use-isomorphic-layout-effect';\nimport { interpret, InterpreterStatus, State, toObserver } from 'xstate';\nimport useConstant from './useConstant';\nexport function useIdleInterpreter(getMachine, options) {\n    var machine = useConstant(function () {\n        return typeof getMachine === 'function' ? getMachine() : getMachine;\n    });\n    if (process.env.NODE_ENV !== 'production' &&\n        typeof getMachine !== 'function') {\n        var _a = __read(useState(machine), 1), initialMachine = _a[0];\n        if (getMachine !== initialMachine) {\n            console.warn('Machine given to `useMachine` has changed between renders. This is not supported and might lead to unexpected results.\\n' +\n                'Please make sure that you pass the same Machine as argument each time.');\n        }\n    }\n    var context = options.context, guards = options.guards, actions = options.actions, activities = options.activities, services = options.services, delays = options.delays, rehydratedState = options.state, interpreterOptions = __rest(options, [\"context\", \"guards\", \"actions\", \"activities\", \"services\", \"delays\", \"state\"]);\n    var service = useConstant(function () {\n        var machineConfig = {\n            context: context,\n            guards: guards,\n            actions: actions,\n            activities: activities,\n            services: services,\n            delays: delays\n        };\n        var machineWithConfig = machine.withConfig(machineConfig, function () { return (__assign(__assign({}, machine.context), context)); });\n        return interpret(machineWithConfig, interpreterOptions);\n    });\n    // Make sure options are kept updated when they change.\n    // This mutation assignment is safe because the service instance is only used\n    // in one place -- this hook's caller.\n    useIsomorphicLayoutEffect(function () {\n        Object.assign(service.machine.options.actions, actions);\n        Object.assign(service.machine.options.guards, guards);\n        Object.assign(service.machine.options.activities, activities);\n        Object.assign(service.machine.options.services, services);\n        Object.assign(service.machine.options.delays, delays);\n    }, [actions, guards, activities, services, delays]);\n    return service;\n}\nexport function useInterpret(getMachine) {\n    var _a = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        _a[_i - 1] = arguments[_i];\n    }\n    var _b = __read(_a, 2), _c = _b[0], options = _c === void 0 ? {} : _c, observerOrListener = _b[1];\n    var service = useIdleInterpreter(getMachine, options);\n    useEffect(function () {\n        if (!observerOrListener) {\n            return;\n        }\n        var sub = service.subscribe(toObserver(observerOrListener));\n        return function () {\n            sub.unsubscribe();\n        };\n    }, [observerOrListener]);\n    useEffect(function () {\n        var rehydratedState = options.state;\n        service.start(rehydratedState ? State.create(rehydratedState) : undefined);\n        return function () {\n            service.stop();\n            service.status = InterpreterStatus.NotStarted;\n        };\n    }, []);\n    return service;\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 2415, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/node_modules/.pnpm/@xstate+react@3.2.2_@types+react@19.2.7_react@19.2.3_xstate@4.38.3/node_modules/@xstate/react/es/utils.js"],"sourcesContent":["var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport { InterpreterStatus } from 'xstate';\nexport function partition(items, predicate) {\n    var e_1, _a;\n    var _b = __read([[], []], 2), truthy = _b[0], falsy = _b[1];\n    try {\n        for (var items_1 = __values(items), items_1_1 = items_1.next(); !items_1_1.done; items_1_1 = items_1.next()) {\n            var item = items_1_1.value;\n            if (predicate(item)) {\n                truthy.push(item);\n            }\n            else {\n                falsy.push(item);\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (items_1_1 && !items_1_1.done && (_a = items_1.return)) _a.call(items_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return [truthy, falsy];\n}\nexport function getServiceSnapshot(service) {\n    return service.status !== 0\n        ? service.getSnapshot()\n        : service.machine.initialState;\n}\n// From https://github.com/reduxjs/react-redux/blob/master/src/utils/shallowEqual.ts\nfunction is(x, y) {\n    if (x === y) {\n        return x !== 0 || y !== 0 || 1 / x === 1 / y;\n    }\n    else {\n        return x !== x && y !== y;\n    }\n}\nexport function shallowEqual(objA, objB) {\n    if (is(objA, objB))\n        return true;\n    if (typeof objA !== 'object' ||\n        objA === null ||\n        typeof objB !== 'object' ||\n        objB === null) {\n        return false;\n    }\n    var keysA = Object.keys(objA);\n    var keysB = Object.keys(objB);\n    if (keysA.length !== keysB.length)\n        return false;\n    for (var i = 0; i < keysA.length; i++) {\n        if (!Object.prototype.hasOwnProperty.call(objB, keysA[i]) ||\n            !is(objA[keysA[i]], objB[keysA[i]])) {\n            return false;\n        }\n    }\n    return true;\n}\nexport function isService(actor) {\n    return 'state' in actor && 'machine' in actor;\n}\nexport function isInterpreterStateEqual(service, prevState, nextState) {\n    if (service.status === InterpreterStatus.NotStarted) {\n        return true;\n    }\n    // Only change the current state if:\n    // - the incoming state is the \"live\" initial state (since it might have new actors)\n    // - OR the incoming state actually changed.\n    //\n    // The \"live\" initial state will have .changed === undefined.\n    var initialStateChanged = nextState.changed === undefined &&\n        (Object.keys(nextState.children).length > 0 ||\n            typeof prevState.changed === 'boolean');\n    return !(nextState.changed || initialStateChanged);\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 2538, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/node_modules/.pnpm/@xstate+react@3.2.2_@types+react@19.2.7_react@19.2.3_xstate@4.38.3/node_modules/@xstate/react/es/useActor.js"],"sourcesContent":["import { useRef, useCallback } from 'react';\nimport useIsomorphicLayoutEffect from 'use-isomorphic-layout-effect';\nimport useConstant from './useConstant';\nimport { useSyncExternalStoreWithSelector } from 'use-sync-external-store/shim/with-selector';\nimport { getServiceSnapshot, isInterpreterStateEqual, isService } from './utils';\nfunction identity(a) {\n    return a;\n}\nexport function isActorWithState(actorRef) {\n    return 'state' in actorRef;\n}\nfunction isDeferredActor(actorRef) {\n    return 'deferred' in actorRef;\n}\nfunction defaultGetSnapshot(actorRef) {\n    return 'getSnapshot' in actorRef\n        ? isService(actorRef)\n            ? getServiceSnapshot(actorRef)\n            : actorRef.getSnapshot()\n        : isActorWithState(actorRef)\n            ? actorRef.state\n            : undefined;\n}\nexport function useActor(actorRef, getSnapshot) {\n    if (getSnapshot === void 0) { getSnapshot = defaultGetSnapshot; }\n    var actorRefRef = useRef(actorRef);\n    var deferredEventsRef = useRef([]);\n    var subscribe = useCallback(function (handleStoreChange) {\n        var unsubscribe = actorRef.subscribe(handleStoreChange).unsubscribe;\n        return unsubscribe;\n    }, [actorRef]);\n    var boundGetSnapshot = useCallback(function () { return getSnapshot(actorRef); }, [actorRef, getSnapshot]);\n    var isEqual = useCallback(function (prevState, nextState) {\n        if (isService(actorRef)) {\n            return isInterpreterStateEqual(actorRef, prevState, nextState);\n        }\n        return prevState === nextState;\n    }, [actorRef]);\n    var storeSnapshot = useSyncExternalStoreWithSelector(subscribe, boundGetSnapshot, boundGetSnapshot, identity, isEqual);\n    var send = useConstant(function () { return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var event = args[0];\n        if (process.env.NODE_ENV !== 'production' && args.length > 1) {\n            console.warn(\"Unexpected payload: \".concat(JSON.stringify(args[1]), \". Only a single event object can be sent to actor send() functions.\"));\n        }\n        var currentActorRef = actorRefRef.current;\n        // If the previous actor is a deferred actor,\n        // queue the events so that they can be replayed\n        // on the non-deferred actor.\n        if (isDeferredActor(currentActorRef) && currentActorRef.deferred) {\n            deferredEventsRef.current.push(event);\n        }\n        else {\n            currentActorRef.send(event);\n        }\n    }; });\n    useIsomorphicLayoutEffect(function () {\n        actorRefRef.current = actorRef;\n        // Dequeue deferred events from the previous deferred actorRef\n        while (deferredEventsRef.current.length > 0) {\n            var deferredEvent = deferredEventsRef.current.shift();\n            actorRef.send(deferredEvent);\n        }\n    }, [actorRef]);\n    return [storeSnapshot, send];\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;;;;;;AACA,SAAS,SAAS,CAAC;IACf,OAAO;AACX;AACO,SAAS,iBAAiB,QAAQ;IACrC,OAAO,WAAW;AACtB;AACA,SAAS,gBAAgB,QAAQ;IAC7B,OAAO,cAAc;AACzB;AACA,SAAS,mBAAmB,QAAQ;IAChC,OAAO,iBAAiB,WAClB,IAAA,mTAAS,EAAC,YACN,IAAA,4TAAkB,EAAC,YACnB,SAAS,WAAW,KACxB,iBAAiB,YACb,SAAS,KAAK,GACd;AACd;AACO,SAAS,SAAS,QAAQ,EAAE,WAAW;IAC1C,IAAI,gBAAgB,KAAK,GAAG;QAAE,cAAc;IAAoB;IAChE,IAAI,cAAc,IAAA,6UAAM,EAAC;IACzB,IAAI,oBAAoB,IAAA,6UAAM,EAAC,EAAE;IACjC,IAAI,YAAY,IAAA,kVAAW,EAAC,SAAU,iBAAiB;QACnD,IAAI,cAAc,SAAS,SAAS,CAAC,mBAAmB,WAAW;QACnE,OAAO;IACX,GAAG;QAAC;KAAS;IACb,IAAI,mBAAmB,IAAA,kVAAW,EAAC;QAAc,OAAO,YAAY;IAAW,GAAG;QAAC;QAAU;KAAY;IACzG,IAAI,UAAU,IAAA,kVAAW,EAAC,SAAU,SAAS,EAAE,SAAS;QACpD,IAAI,IAAA,mTAAS,EAAC,WAAW;YACrB,OAAO,IAAA,iUAAuB,EAAC,UAAU,WAAW;QACxD;QACA,OAAO,cAAc;IACzB,GAAG;QAAC;KAAS;IACb,IAAI,gBAAgB,IAAA,2TAAgC,EAAC,WAAW,kBAAkB,kBAAkB,UAAU;IAC9G,IAAI,OAAO,IAAA,uTAAW,EAAC;QAAc,OAAO;YACxC,IAAI,OAAO,EAAE;YACb,IAAK,IAAI,KAAK,GAAG,KAAK,UAAU,MAAM,EAAE,KAAM;gBAC1C,IAAI,CAAC,GAAG,GAAG,SAAS,CAAC,GAAG;YAC5B;YACA,IAAI,QAAQ,IAAI,CAAC,EAAE;YACnB,IAAI,oDAAyB,gBAAgB,KAAK,MAAM,GAAG,GAAG;gBAC1D,QAAQ,IAAI,CAAC,uBAAuB,MAAM,CAAC,KAAK,SAAS,CAAC,IAAI,CAAC,EAAE,GAAG;YACxE;YACA,IAAI,kBAAkB,YAAY,OAAO;YACzC,6CAA6C;YAC7C,gDAAgD;YAChD,6BAA6B;YAC7B,IAAI,gBAAgB,oBAAoB,gBAAgB,QAAQ,EAAE;gBAC9D,kBAAkB,OAAO,CAAC,IAAI,CAAC;YACnC,OACK;gBACD,gBAAgB,IAAI,CAAC;YACzB;QACJ;IAAG;IACH,IAAA,sXAAyB,EAAC;QACtB,YAAY,OAAO,GAAG;QACtB,8DAA8D;QAC9D,MAAO,kBAAkB,OAAO,CAAC,MAAM,GAAG,EAAG;YACzC,IAAI,gBAAgB,kBAAkB,OAAO,CAAC,KAAK;YACnD,SAAS,IAAI,CAAC;QAClB;IACJ,GAAG;QAAC;KAAS;IACb,OAAO;QAAC;QAAe;KAAK;AAChC","ignoreList":[0]}},
    {"offset": {"line": 2633, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/node_modules/.pnpm/@xstate+react@3.2.2_@types+react@19.2.7_react@19.2.3_xstate@4.38.3/node_modules/@xstate/react/es/useSelector.js"],"sourcesContent":["import { useCallback, useRef } from 'react';\nimport { useSyncExternalStoreWithSelector } from 'use-sync-external-store/shim/with-selector';\nimport { isActorWithState } from './useActor';\nimport { getServiceSnapshot, isService } from './utils';\nvar defaultCompare = function (a, b) { return a === b; };\nvar defaultGetSnapshot = function (a, initialStateCacheRef) {\n    if (isService(a)) {\n        // A status of 0 = interpreter not started\n        if (a.status === 0 && initialStateCacheRef.current) {\n            return initialStateCacheRef.current;\n        }\n        var snapshot = getServiceSnapshot(a);\n        initialStateCacheRef.current = a.status === 0 ? snapshot : null;\n        return snapshot;\n    }\n    return isActorWithState(a) ? a.state : undefined;\n};\nexport function useSelector(actor, selector, compare, getSnapshot) {\n    if (compare === void 0) { compare = defaultCompare; }\n    var initialStateCacheRef = useRef(null);\n    var subscribe = useCallback(function (handleStoreChange) {\n        var unsubscribe = actor.subscribe(handleStoreChange).unsubscribe;\n        return unsubscribe;\n    }, [actor]);\n    var boundGetSnapshot = useCallback(function () {\n        if (getSnapshot) {\n            return getSnapshot(actor);\n        }\n        return defaultGetSnapshot(actor, initialStateCacheRef);\n    }, [actor, getSnapshot]);\n    var selectedSnapshot = useSyncExternalStoreWithSelector(subscribe, boundGetSnapshot, boundGetSnapshot, selector, compare);\n    return selectedSnapshot;\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AACA,IAAI,iBAAiB,SAAU,CAAC,EAAE,CAAC;IAAI,OAAO,MAAM;AAAG;AACvD,IAAI,qBAAqB,SAAU,CAAC,EAAE,oBAAoB;IACtD,IAAI,IAAA,mTAAS,EAAC,IAAI;QACd,0CAA0C;QAC1C,IAAI,EAAE,MAAM,KAAK,KAAK,qBAAqB,OAAO,EAAE;YAChD,OAAO,qBAAqB,OAAO;QACvC;QACA,IAAI,WAAW,IAAA,4TAAkB,EAAC;QAClC,qBAAqB,OAAO,GAAG,EAAE,MAAM,KAAK,IAAI,WAAW;QAC3D,OAAO;IACX;IACA,OAAO,IAAA,6TAAgB,EAAC,KAAK,EAAE,KAAK,GAAG;AAC3C;AACO,SAAS,YAAY,KAAK,EAAE,QAAQ,EAAE,OAAO,EAAE,WAAW;IAC7D,IAAI,YAAY,KAAK,GAAG;QAAE,UAAU;IAAgB;IACpD,IAAI,uBAAuB,IAAA,6UAAM,EAAC;IAClC,IAAI,YAAY,IAAA,kVAAW,EAAC,SAAU,iBAAiB;QACnD,IAAI,cAAc,MAAM,SAAS,CAAC,mBAAmB,WAAW;QAChE,OAAO;IACX,GAAG;QAAC;KAAM;IACV,IAAI,mBAAmB,IAAA,kVAAW,EAAC;QAC/B,IAAI,aAAa;YACb,OAAO,YAAY;QACvB;QACA,OAAO,mBAAmB,OAAO;IACrC,GAAG;QAAC;QAAO;KAAY;IACvB,IAAI,mBAAmB,IAAA,2TAAgC,EAAC,WAAW,kBAAkB,kBAAkB,UAAU;IACjH,OAAO;AACX","ignoreList":[0]}},
    {"offset": {"line": 2687, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/node_modules/.pnpm/use-sync-external-store@1.6.0_react@19.2.3/node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.development.js"],"sourcesContent":["/**\n * @license React\n * use-sync-external-store-shim.development.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\n\"production\" !== process.env.NODE_ENV &&\n  (function () {\n    function is(x, y) {\n      return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n    }\n    function useSyncExternalStore$2(subscribe, getSnapshot) {\n      didWarnOld18Alpha ||\n        void 0 === React.startTransition ||\n        ((didWarnOld18Alpha = !0),\n        console.error(\n          \"You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release.\"\n        ));\n      var value = getSnapshot();\n      if (!didWarnUncachedGetSnapshot) {\n        var cachedValue = getSnapshot();\n        objectIs(value, cachedValue) ||\n          (console.error(\n            \"The result of getSnapshot should be cached to avoid an infinite loop\"\n          ),\n          (didWarnUncachedGetSnapshot = !0));\n      }\n      cachedValue = useState({\n        inst: { value: value, getSnapshot: getSnapshot }\n      });\n      var inst = cachedValue[0].inst,\n        forceUpdate = cachedValue[1];\n      useLayoutEffect(\n        function () {\n          inst.value = value;\n          inst.getSnapshot = getSnapshot;\n          checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n        },\n        [subscribe, value, getSnapshot]\n      );\n      useEffect(\n        function () {\n          checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n          return subscribe(function () {\n            checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n          });\n        },\n        [subscribe]\n      );\n      useDebugValue(value);\n      return value;\n    }\n    function checkIfSnapshotChanged(inst) {\n      var latestGetSnapshot = inst.getSnapshot;\n      inst = inst.value;\n      try {\n        var nextValue = latestGetSnapshot();\n        return !objectIs(inst, nextValue);\n      } catch (error) {\n        return !0;\n      }\n    }\n    function useSyncExternalStore$1(subscribe, getSnapshot) {\n      return getSnapshot();\n    }\n    \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n      \"function\" ===\n        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart &&\n      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());\n    var React = require(\"react\"),\n      objectIs = \"function\" === typeof Object.is ? Object.is : is,\n      useState = React.useState,\n      useEffect = React.useEffect,\n      useLayoutEffect = React.useLayoutEffect,\n      useDebugValue = React.useDebugValue,\n      didWarnOld18Alpha = !1,\n      didWarnUncachedGetSnapshot = !1,\n      shim =\n        \"undefined\" === typeof window ||\n        \"undefined\" === typeof window.document ||\n        \"undefined\" === typeof window.document.createElement\n          ? useSyncExternalStore$1\n          : useSyncExternalStore$2;\n    exports.useSyncExternalStore =\n      void 0 !== React.useSyncExternalStore ? React.useSyncExternalStore : shim;\n    \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n      \"function\" ===\n        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&\n      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error());\n  })();\n"],"names":[],"mappings":"AAAA;;;;;;;;CAQC,GAGD,oEACE,AAAC;IACC,SAAS,GAAG,CAAC,EAAE,CAAC;QACd,OAAO,AAAC,MAAM,KAAK,CAAC,MAAM,KAAK,IAAI,MAAM,IAAI,CAAC,KAAO,MAAM,KAAK,MAAM;IACxE;IACA,SAAS,uBAAuB,SAAS,EAAE,WAAW;QACpD,qBACE,KAAK,MAAM,MAAM,eAAe,IAChC,CAAC,AAAC,oBAAoB,CAAC,GACvB,QAAQ,KAAK,CACX,iMACD;QACH,IAAI,QAAQ;QACZ,IAAI,CAAC,4BAA4B;YAC/B,IAAI,cAAc;YAClB,SAAS,OAAO,gBACd,CAAC,QAAQ,KAAK,CACZ,yEAED,6BAA6B,CAAC,CAAE;QACrC;QACA,cAAc,SAAS;YACrB,MAAM;gBAAE,OAAO;gBAAO,aAAa;YAAY;QACjD;QACA,IAAI,OAAO,WAAW,CAAC,EAAE,CAAC,IAAI,EAC5B,cAAc,WAAW,CAAC,EAAE;QAC9B,gBACE;YACE,KAAK,KAAK,GAAG;YACb,KAAK,WAAW,GAAG;YACnB,uBAAuB,SAAS,YAAY;gBAAE,MAAM;YAAK;QAC3D,GACA;YAAC;YAAW;YAAO;SAAY;QAEjC,UACE;YACE,uBAAuB,SAAS,YAAY;gBAAE,MAAM;YAAK;YACzD,OAAO,UAAU;gBACf,uBAAuB,SAAS,YAAY;oBAAE,MAAM;gBAAK;YAC3D;QACF,GACA;YAAC;SAAU;QAEb,cAAc;QACd,OAAO;IACT;IACA,SAAS,uBAAuB,IAAI;QAClC,IAAI,oBAAoB,KAAK,WAAW;QACxC,OAAO,KAAK,KAAK;QACjB,IAAI;YACF,IAAI,YAAY;YAChB,OAAO,CAAC,SAAS,MAAM;QACzB,EAAE,OAAO,OAAO;YACd,OAAO,CAAC;QACV;IACF;IACA,SAAS,uBAAuB,SAAS,EAAE,WAAW;QACpD,OAAO;IACT;IACA,gBAAgB,OAAO,kCACrB,eACE,OAAO,+BAA+B,2BAA2B,IACnE,+BAA+B,2BAA2B,CAAC;IAC7D,IAAI,uNACF,WAAW,eAAe,OAAO,OAAO,EAAE,GAAG,OAAO,EAAE,GAAG,IACzD,WAAW,MAAM,QAAQ,EACzB,YAAY,MAAM,SAAS,EAC3B,kBAAkB,MAAM,eAAe,EACvC,gBAAgB,MAAM,aAAa,EACnC,oBAAoB,CAAC,GACrB,6BAA6B,CAAC,GAC9B,OACE,uCAGI,yBACA;IACR,QAAQ,oBAAoB,GAC1B,KAAK,MAAM,MAAM,oBAAoB,GAAG,MAAM,oBAAoB,GAAG;IACvE,gBAAgB,OAAO,kCACrB,eACE,OAAO,+BAA+B,0BAA0B,IAClE,+BAA+B,0BAA0B,CAAC;AAC9D","ignoreList":[0]}},
    {"offset": {"line": 2761, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/node_modules/.pnpm/use-sync-external-store@1.6.0_react@19.2.3/node_modules/use-sync-external-store/shim/index.js"],"sourcesContent":["'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim.production.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim.development.js');\n}\n"],"names":[],"mappings":"AAEA;;KAEO;IACL,OAAO,OAAO;AAChB","ignoreList":[0]}},
    {"offset": {"line": 2770, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/node_modules/.pnpm/use-sync-external-store@1.6.0_react@19.2.3/node_modules/use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.development.js"],"sourcesContent":["/**\n * @license React\n * use-sync-external-store-shim/with-selector.development.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\n\"production\" !== process.env.NODE_ENV &&\n  (function () {\n    function is(x, y) {\n      return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n    }\n    \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n      \"function\" ===\n        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart &&\n      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());\n    var React = require(\"react\"),\n      shim = require(\"use-sync-external-store/shim\"),\n      objectIs = \"function\" === typeof Object.is ? Object.is : is,\n      useSyncExternalStore = shim.useSyncExternalStore,\n      useRef = React.useRef,\n      useEffect = React.useEffect,\n      useMemo = React.useMemo,\n      useDebugValue = React.useDebugValue;\n    exports.useSyncExternalStoreWithSelector = function (\n      subscribe,\n      getSnapshot,\n      getServerSnapshot,\n      selector,\n      isEqual\n    ) {\n      var instRef = useRef(null);\n      if (null === instRef.current) {\n        var inst = { hasValue: !1, value: null };\n        instRef.current = inst;\n      } else inst = instRef.current;\n      instRef = useMemo(\n        function () {\n          function memoizedSelector(nextSnapshot) {\n            if (!hasMemo) {\n              hasMemo = !0;\n              memoizedSnapshot = nextSnapshot;\n              nextSnapshot = selector(nextSnapshot);\n              if (void 0 !== isEqual && inst.hasValue) {\n                var currentSelection = inst.value;\n                if (isEqual(currentSelection, nextSnapshot))\n                  return (memoizedSelection = currentSelection);\n              }\n              return (memoizedSelection = nextSnapshot);\n            }\n            currentSelection = memoizedSelection;\n            if (objectIs(memoizedSnapshot, nextSnapshot))\n              return currentSelection;\n            var nextSelection = selector(nextSnapshot);\n            if (void 0 !== isEqual && isEqual(currentSelection, nextSelection))\n              return (memoizedSnapshot = nextSnapshot), currentSelection;\n            memoizedSnapshot = nextSnapshot;\n            return (memoizedSelection = nextSelection);\n          }\n          var hasMemo = !1,\n            memoizedSnapshot,\n            memoizedSelection,\n            maybeGetServerSnapshot =\n              void 0 === getServerSnapshot ? null : getServerSnapshot;\n          return [\n            function () {\n              return memoizedSelector(getSnapshot());\n            },\n            null === maybeGetServerSnapshot\n              ? void 0\n              : function () {\n                  return memoizedSelector(maybeGetServerSnapshot());\n                }\n          ];\n        },\n        [getSnapshot, getServerSnapshot, selector, isEqual]\n      );\n      var value = useSyncExternalStore(subscribe, instRef[0], instRef[1]);\n      useEffect(\n        function () {\n          inst.hasValue = !0;\n          inst.value = value;\n        },\n        [value]\n      );\n      useDebugValue(value);\n      return value;\n    };\n    \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n      \"function\" ===\n        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&\n      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error());\n  })();\n"],"names":[],"mappings":"AAAA;;;;;;;;CAQC,GAGD,oEACE,AAAC;IACC,SAAS,GAAG,CAAC,EAAE,CAAC;QACd,OAAO,AAAC,MAAM,KAAK,CAAC,MAAM,KAAK,IAAI,MAAM,IAAI,CAAC,KAAO,MAAM,KAAK,MAAM;IACxE;IACA,gBAAgB,OAAO,kCACrB,eACE,OAAO,+BAA+B,2BAA2B,IACnE,+BAA+B,2BAA2B,CAAC;IAC7D,IAAI,uNACF,0LACA,WAAW,eAAe,OAAO,OAAO,EAAE,GAAG,OAAO,EAAE,GAAG,IACzD,uBAAuB,KAAK,oBAAoB,EAChD,SAAS,MAAM,MAAM,EACrB,YAAY,MAAM,SAAS,EAC3B,UAAU,MAAM,OAAO,EACvB,gBAAgB,MAAM,aAAa;IACrC,QAAQ,gCAAgC,GAAG,SACzC,SAAS,EACT,WAAW,EACX,iBAAiB,EACjB,QAAQ,EACR,OAAO;QAEP,IAAI,UAAU,OAAO;QACrB,IAAI,SAAS,QAAQ,OAAO,EAAE;YAC5B,IAAI,OAAO;gBAAE,UAAU,CAAC;gBAAG,OAAO;YAAK;YACvC,QAAQ,OAAO,GAAG;QACpB,OAAO,OAAO,QAAQ,OAAO;QAC7B,UAAU,QACR;YACE,SAAS,iBAAiB,YAAY;gBACpC,IAAI,CAAC,SAAS;oBACZ,UAAU,CAAC;oBACX,mBAAmB;oBACnB,eAAe,SAAS;oBACxB,IAAI,KAAK,MAAM,WAAW,KAAK,QAAQ,EAAE;wBACvC,IAAI,mBAAmB,KAAK,KAAK;wBACjC,IAAI,QAAQ,kBAAkB,eAC5B,OAAQ,oBAAoB;oBAChC;oBACA,OAAQ,oBAAoB;gBAC9B;gBACA,mBAAmB;gBACnB,IAAI,SAAS,kBAAkB,eAC7B,OAAO;gBACT,IAAI,gBAAgB,SAAS;gBAC7B,IAAI,KAAK,MAAM,WAAW,QAAQ,kBAAkB,gBAClD,OAAO,AAAC,mBAAmB,cAAe;gBAC5C,mBAAmB;gBACnB,OAAQ,oBAAoB;YAC9B;YACA,IAAI,UAAU,CAAC,GACb,kBACA,mBACA,yBACE,KAAK,MAAM,oBAAoB,OAAO;YAC1C,OAAO;gBACL;oBACE,OAAO,iBAAiB;gBAC1B;gBACA,SAAS,yBACL,KAAK,IACL;oBACE,OAAO,iBAAiB;gBAC1B;aACL;QACH,GACA;YAAC;YAAa;YAAmB;YAAU;SAAQ;QAErD,IAAI,QAAQ,qBAAqB,WAAW,OAAO,CAAC,EAAE,EAAE,OAAO,CAAC,EAAE;QAClE,UACE;YACE,KAAK,QAAQ,GAAG,CAAC;YACjB,KAAK,KAAK,GAAG;QACf,GACA;YAAC;SAAM;QAET,cAAc;QACd,OAAO;IACT;IACA,gBAAgB,OAAO,kCACrB,eACE,OAAO,+BAA+B,0BAA0B,IAClE,+BAA+B,0BAA0B,CAAC;AAC9D","ignoreList":[0]}},
    {"offset": {"line": 2843, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/node_modules/.pnpm/use-sync-external-store@1.6.0_react@19.2.3/node_modules/use-sync-external-store/shim/with-selector.js"],"sourcesContent":["'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.production.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.development.js');\n}\n"],"names":[],"mappings":"AAEA;;KAEO;IACL,OAAO,OAAO;AAChB","ignoreList":[0]}},
    {"offset": {"line": 2852, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/dist/index.esm.js","sources":["turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/client.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/provider.tsx","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useAuthInterpreter.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useAuthenticationStatus.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/components/SignedIn.tsx","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/components/SignedOut.tsx","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useAccessToken.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useNhostClient.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useAddSecurityKey.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useAuthenticated.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useChangeEmail.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useChangePassword.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useConfigMfa.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useDecodedAccessToken.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useFileUpload.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useHasuraClaims.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useHasuraClaim.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useMultipleFilesUpload.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useProviderLink.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useResetPassword.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useSendVerificationEmail.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useSignInAnonymous.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useSignInEmailPassword.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useSignInEmailPasswordless.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useSignInEmailSecurityKey.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useUserData.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useElevateSecurityKeyEmail.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useSignInPAT.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useSignInSmsPasswordless.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useSignOut.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useSignUpEmailPassword.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useSignUpEmailSecurityKey.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useUserAvatarUrl.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useUserDefaultRole.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useUserDisplayName.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useUserEmail.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useUserId.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useUserIsAnonymous.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useUserLocale.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useUserRoles.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useSignInEmailOTP.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useSignInIdToken.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useLinkIdToken.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+react@3.11.2_@types+react@19.2.7_graphql@16.8.1_react-dom@19.2.3_react@19.2.3__react@19.2.3/node_modules/@nhost/react/src/useSignInSecurityKey.ts"],"sourcesContent":["import {\n  NhostClient as _VanillaNhostClient,\n  NhostClientConstructorParams as VanillaNhostClientConstructorParams\n} from '@nhost/nhost-js'\n\n/** @internal */\nexport const VanillaNhostClient = _VanillaNhostClient\n\nexport interface NhostReactClientConstructorParams\n  extends Omit<VanillaNhostClientConstructorParams, 'start' | 'client'> {}\n\nexport class NhostClient extends VanillaNhostClient {\n  constructor(params: NhostReactClientConstructorParams) {\n    super({ ...params, start: false })\n  }\n}\n\n// * Required for @nhost/nextjs\nexport { NHOST_REFRESH_TOKEN_KEY } from '@nhost/nhost-js'\nexport type { AuthMachine, NhostAuthConstructorParams } from '@nhost/nhost-js'\n","import { NhostSession } from '@nhost/nhost-js'\nimport { useInterpret } from '@xstate/react'\nimport React, { createContext, PropsWithChildren, useEffect, useRef } from 'react'\nimport { NhostClient } from './client'\nexport const NhostReactContext = createContext<NhostClient>({} as NhostClient)\nexport interface NhostProviderProps {\n  nhost: NhostClient\n  initial?: NhostSession\n}\n\nexport const NhostProvider: React.FC<PropsWithChildren<NhostProviderProps>> = ({\n  nhost,\n  initial,\n  ...props\n}) => {\n  const interpreter = useInterpret(nhost.auth.client.machine, { devTools: nhost.devTools })\n\n  nhost.auth.client.start({ interpreter, initialSession: initial, devTools: nhost.devTools })\n\n  // * Hook to send session update everytime the 'initial' props changed\n  const isInitialMount = useRef(true)\n  useEffect(() => {\n    if (isInitialMount.current) {\n      isInitialMount.current = false\n    } else {\n      if (initial) {\n        interpreter.send('SESSION_UPDATE', { data: { session: initial } })\n      }\n    }\n  }, [initial, interpreter])\n\n  return <NhostReactContext.Provider value={nhost}>{props.children}</NhostReactContext.Provider>\n}\n\n/**\n * @deprecated use `NhostProvider` instead\n */\nexport const NhostReactProvider = NhostProvider\n","import { AuthMachine } from '@nhost/nhost-js'\nimport { useContext } from 'react'\nimport { InterpreterFrom } from 'xstate'\nimport { NhostReactContext } from './provider'\n\n/** @internal */\nexport const useAuthInterpreter = (): InterpreterFrom<AuthMachine> => {\n  const nhost = useContext(NhostReactContext)\n  const interpreter = nhost.auth?.client.interpreter\n  if (!interpreter)\n    throw Error('Could not find the Nhost auth client. Did you wrap your app in <NhostProvider />?')\n  return interpreter\n}\n","import { ErrorPayload } from '@nhost/nhost-js'\nimport { useSelector } from '@xstate/react'\n\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\n/**\n * Use `useAuthenticationStatus` to get the authentication status for the user.\n *\n * @example\n * ```tsx\n * const { isAuthenticated, isLoading } = useAuthenticationStatus();\n * ```\n */\nexport const useAuthenticationStatus = (): {\n  isAuthenticated: boolean\n  isLoading: boolean\n  error: ErrorPayload | null\n  isError: boolean\n  connectionAttempts: number\n} => {\n  const service = useAuthInterpreter()\n  return useSelector(\n    service,\n    (state) => ({\n      isAuthenticated: state.matches({ authentication: 'signedIn' }),\n      isLoading: state.hasTag('loading'),\n      error: state.context.errors.authentication || null,\n      isError: state.matches({ authentication: { signedOut: 'failed' } }),\n      connectionAttempts: state.context.importTokenAttempts\n    }),\n    (a, b) =>\n      a.isAuthenticated === b.isAuthenticated &&\n      a.isLoading === b.isLoading &&\n      a.connectionAttempts === b.connectionAttempts\n  )\n}\n","import { Fragment, PropsWithChildren, createElement } from 'react'\nimport { useAuthenticationStatus } from '../useAuthenticationStatus'\n\n/**\n * Use `<SignedIn />` to control the rendering of components for users. Components inside `<SignedIn />` are only rendered if the user is authenticated.\n *\n * @example\n * ```tsx\n * import { NhostProvider, SignedIn } from \"@nhost/react\";\n * import { nhost } from '@/utils/nhost';\n *\n * function Page() {\n *   return (\n *     <NhostProvider nhost={nhost}>\n *       <SignedIn>\n *         <h1>Only rendered if the user is authenticated</h1>\n *       </SignedIn>\n *     </NhostProvider>\n *   )\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/signed-in\n * @category Components\n */\n\nexport function SignedIn({ children }: PropsWithChildren<unknown>) {\n  const { isAuthenticated } = useAuthenticationStatus()\n\n  if (!isAuthenticated) {\n    return null\n  }\n\n  return createElement(Fragment, null, children)\n}\n","import { Fragment, PropsWithChildren, createElement } from 'react'\nimport { useAuthenticationStatus } from '../useAuthenticationStatus'\n\n/**\n * Use `<SignedOut />` to control the rendering of components for users. Components inside `<SignedOut />` are only rendered if the user is not authenticated.\n *\n * @example\n * ```tsx\n * import { NhostProvider, SignedOut } from \"@nhost/react\";\n * import { nhost } from '@/utils/nhost';\n *\n * function Page() {\n *   return (\n *     <NhostProvider nhost={nhost}>\n *       <SignedOut>\n *         <h1>Only rendered if the user is not authenticated</h1>\n *       </SignedOut>\n *     </NhostProvider>\n *   )\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/signed-out\n * @category Components\n */\n\nexport function SignedOut({ children }: PropsWithChildren<unknown>) {\n  const { isAuthenticated } = useAuthenticationStatus()\n\n  if (isAuthenticated) {\n    return null\n  }\n\n  return createElement(Fragment, null, children)\n}\n","import { useSelector } from '@xstate/react'\n\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\n/**\n * Use `useAccessToken` to get the access token of the user.\n *\n * @example\n * ```ts\n * const accessToken = useAccessToken();\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-access-token\n */\nexport const useAccessToken = (): string | null => {\n  const service = useAuthInterpreter()\n  return useSelector(service, (state) => state.context.accessToken.value)\n}\n","import { useContext } from 'react'\n\nimport { NhostClient } from '@nhost/nhost-js'\n\nimport { NhostReactContext } from './provider'\n\n/**\n * Use the hook `useNhostClient` to get the Nhost JavaScript client (https://docs.nhost.io/reference/javascript).\n *\n * @example\n * ```tsx\n * const nhost = useNhostClient()\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-nhost-client\n */\nexport const useNhostClient = (): NhostClient => {\n  const nhost = useContext(NhostReactContext)\n  return nhost\n}\n","import {\n  ActionErrorState,\n  ActionSuccessState,\n  AddSecurityKeyHandlerResult,\n  addSecurityKeyPromise,\n  ErrorPayload\n} from '@nhost/nhost-js'\nimport { useState } from 'react'\nimport { useNhostClient } from './useNhostClient'\n\ninterface AddSecurityKeyHandler {\n  (\n    /** Optional human-readable name of the security key */\n    nickname?: string\n  ): Promise<AddSecurityKeyHandlerResult>\n}\n\nexport interface AddSecuritKeyHookResult extends ActionErrorState, ActionSuccessState {\n  /** Add a security key to the current user with the WebAuthn API */\n  add: AddSecurityKeyHandler\n}\n\ninterface AddSecuritKeyHook {\n  (): AddSecuritKeyHookResult\n}\n\n/**\n * Use the hook `useAddSecurityKey` to add a WebAuthn security key.\n *\n * @example\n * ```tsx\n * const { add, isLoading, isSuccess, isError, error } = useAddSecurityKey()\n *\n * const handleFormSubmit = async (e) => {\n *   e.preventDefault();\n *\n *   await add('key nickname')\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-add-security-key\n */\nexport const useAddSecurityKey: AddSecuritKeyHook = () => {\n  const nhost = useNhostClient()\n  const [error, setError] = useState<ErrorPayload | null>(null)\n  const isSuccess = !error\n  const isError = !!error\n\n  const [isLoading, setIsLoading] = useState(false)\n\n  const add: AddSecurityKeyHandler = async (nickname) => {\n    setIsLoading(true)\n    const result = await addSecurityKeyPromise(nhost.auth.client, nickname)\n    const { error } = result\n    if (error) {\n      setError(error)\n    }\n    setIsLoading(false)\n    return result\n  }\n\n  return { add, isLoading, isSuccess, isError, error }\n}\n","import { useEffect, useState } from 'react'\n\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\n/**\n * Use `useAuthenticated` to get the authentication status of the user.\n *\n * @example\n * ```ts\n * const isAuthenticated = useAuthenticated();\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-access-token\n */\nexport const useAuthenticated = (): boolean => {\n  const service = useAuthInterpreter()\n  const [isAuthenticated, setIsAuthenticated] = useState(\n    !!service.status && service.getSnapshot().matches({ authentication: 'signedIn' })\n  )\n  useEffect(() => {\n    const subscription = service.subscribe((state) => {\n      const newValue = state.matches({ authentication: 'signedIn' })\n      setIsAuthenticated(newValue)\n    })\n    return subscription.unsubscribe\n  }, [service])\n  return isAuthenticated\n}\n","import {\n  ChangeEmailHandlerResult,\n  ChangeEmailOptions,\n  changeEmailPromise,\n  ChangeEmailState,\n  createChangeEmailMachine\n} from '@nhost/nhost-js'\nimport { useInterpret, useSelector } from '@xstate/react'\nimport { useCallback, useMemo } from 'react'\nimport { useNhostClient } from './useNhostClient'\n\ninterface ChangeEmailHandler {\n  (email: string, options?: ChangeEmailOptions): Promise<ChangeEmailHandlerResult>\n}\n\nexport interface ChangeEmailHookResult extends ChangeEmailState {\n  /** Requests the email change. Returns a promise with the current context  */\n  changeEmail: ChangeEmailHandler\n}\n\n/**\n * Use the hook `useChangeEmail` to change email for the user.\n *\n * @example\n * ```tsx\n * const { changeEmail, isLoading, needsEmailVerification, isError, error } = useChangeEmail();\n *\n * console.log({ isLoading, needsEmailVerification, isError, error });\n *\n * const handleFormSubmit = async (e) => {\n *   e.preventDefault();\n *\n *   await changeEmail('new@example.com')\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-change-email\n */\nexport function useChangeEmail(options?: ChangeEmailOptions) {\n  const nhost = useNhostClient()\n  const machine = useMemo(() => createChangeEmailMachine(nhost.auth.client), [nhost])\n\n  const service = useInterpret(machine)\n\n  const isLoading = useSelector(service, (s) => s.matches('requesting'))\n  const error = useSelector(service, (state) => state.context.error)\n  const isError = useSelector(service, (state) => state.matches('idle.error'))\n  const needsEmailVerification = useSelector(service, (state) => state.matches('idle.success'))\n\n  const changeEmail: ChangeEmailHandler = useCallback(\n    async (valueEmail, valueOptions = options) =>\n      changeEmailPromise(service, valueEmail, valueOptions),\n    [service, options]\n  )\n\n  return { changeEmail, isLoading, needsEmailVerification, isError, error }\n}\n","import {\n  ActionErrorState,\n  ActionLoadingState,\n  ActionSuccessState,\n  ChangePasswordHandlerResult,\n  changePasswordPromise,\n  createChangePasswordMachine\n} from '@nhost/nhost-js'\nimport { useInterpret, useSelector } from '@xstate/react'\nimport { useMemo } from 'react'\nimport { useNhostClient } from './useNhostClient'\n\ninterface ChangePasswordHandler {\n  (password: string): Promise<ChangePasswordHandlerResult>\n}\n\nexport interface ChangePasswordHookResult extends ActionErrorState, ActionLoadingState, ActionSuccessState {\n  /** Requests the password change. Returns a promise with the current context */\n  changePassword: ChangePasswordHandler\n}\n\ninterface ChangePasswordHook {\n  (): ChangePasswordHookResult\n}\n\n/**\n * Use the hook `useChangePassword` to change password for the user.\n *\n * @example\n * ```tsx\n * const { changePassword, isLoading, isSuccess, isError, error } = useChangePassword();\n *\n * console.log({ isLoading, isSuccess, isError, error });\n *\n * const handleFormSubmit = async (e) => {\n *   e.preventDefault();\n *\n *   await changePassword('my-new-password')\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-change-password\n */\nexport const useChangePassword: ChangePasswordHook = () => {\n  const nhost = useNhostClient()\n  const machine = useMemo(() => createChangePasswordMachine(nhost.auth.client), [nhost])\n  const service = useInterpret(machine)\n\n  const isError = useSelector(service, (state) => state.matches({ idle: 'error' }))\n  const isSuccess = useSelector(service, (state) => state.matches({ idle: 'success' }))\n  const error = useSelector(service, (state) => state.context.error)\n  const isLoading = useSelector(service, (state) => state.matches('requesting'))\n\n  const changePassword: ChangePasswordHandler = (valuePassword) =>\n    changePasswordPromise(service, valuePassword)\n\n  return { changePassword, isLoading, isSuccess, isError, error }\n}\n","import {\n  ActivateMfaHandlerResult,\n  activateMfaPromise,\n  ActivateMfaState,\n  createEnableMfaMachine,\n  DisableMfaHandlerResult,\n  disableMfaPromise,\n  GenerateQrCodeHandlerResult,\n  generateQrCodePromise,\n  GenerateQrCodeState\n} from '@nhost/nhost-js'\nimport { useInterpret, useSelector } from '@xstate/react'\nimport { useMemo } from 'react'\nimport { useNhostClient } from './useNhostClient'\n\ninterface ConfigMfaState extends ActivateMfaState, GenerateQrCodeState {\n  generateQrCode: () => Promise<GenerateQrCodeHandlerResult>\n  activateMfa: (code: string) => Promise<ActivateMfaHandlerResult>\n  disableMfa: (code: string) => Promise<DisableMfaHandlerResult>\n  isDisabling: boolean\n}\n\n// TODO documentation when available in Nhost Cloud - see changelog\nexport const useConfigMfa = (): ConfigMfaState => {\n  const nhost = useNhostClient()\n\n  const machine = useMemo(() => createEnableMfaMachine(nhost.auth.client), [nhost])\n  const service = useInterpret(machine)\n\n  const isError = useSelector(\n    service,\n    (state) => state.matches({ idle: 'error' }) || state.matches({ generated: { idle: 'error' } })\n  )\n  const isGenerating = useSelector(service, (state) => state.matches('generating'))\n  const isGenerated = useSelector(service, (state) => state.matches('generated'))\n  const isActivating = useSelector(service, (state) => state.matches({ generated: 'activating' }))\n  const isActivated = useSelector(service, (state) => state.matches({ generated: 'activated' }))\n  const isDisabling = useSelector(service, (state) => state.matches('disabling'))\n  const error = useSelector(service, (state) => state.context.error)\n  const qrCodeDataUrl = useSelector(service, (state) => state.context.imageUrl || '')\n  const totpSecret = useSelector(service, (state) => state.context.secret || '')\n\n  const generateQrCode = () => generateQrCodePromise(service)\n\n  const activateMfa = (code: string) => activateMfaPromise(service, code)\n  const disableMfa = (code: string) => disableMfaPromise(service, code)\n\n  return {\n    generateQrCode,\n    isGenerating,\n    qrCodeDataUrl,\n    isGenerated,\n    activateMfa,\n    isActivating,\n    isActivated,\n    isDisabling,\n    isError,\n    error,\n    disableMfa,\n    totpSecret\n  }\n}\n","import { JWTClaims } from '@nhost/nhost-js'\nimport { jwtDecode } from 'jwt-decode'\nimport { useAccessToken } from './useAccessToken'\n\n/**\n * Use the hook `useDecodedAccessToken` to get the decoded access token of the user.\n *\n * @example\n * ```tsx\n * const decodedAccessToken = useDecodedAccessToken()\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-decoded-access-token\n */\nexport const useDecodedAccessToken = (): JWTClaims | null => {\n  const jwt = useAccessToken()\n  return jwt ? jwtDecode<JWTClaims>(jwt) : null\n}\n","import {\n  createFileUploadMachine,\n  FileItemRef,\n  FileUploadMachine,\n  FileUploadState,\n  StorageUploadFileParams,\n  UploadFileHandlerResult,\n  uploadFilePromise\n} from '@nhost/nhost-js'\nimport { useInterpret, useSelector } from '@xstate/react'\nimport { InterpreterFrom } from 'xstate'\nimport { useNhostClient } from './useNhostClient'\n\nexport interface FileUploadHookResult extends FileUploadState {\n  /**\n   * Add the file without uploading it.\n   */\n  add: (params: StorageUploadFileParams) => void\n\n  /**\n   * Upload the file given as a parameter, or that has been previously added.\n   */\n  upload: (params: Partial<StorageUploadFileParams>) => Promise<UploadFileHandlerResult>\n\n  /**\n   * Cancel the ongoing upload.\n   */\n  cancel: () => void\n\n  /**\n   * @internal - used by the MultipleFilesUpload component to notice the file should be removed from the list.\n   */\n  destroy: () => void\n}\n\nexport type { FileItemRef }\n\n/**\n * Use the hook `useFileUploadItem` to control the file upload of a file in a multiple file upload.\n *\n * It has the same signature as `useFileUpload`.\n *\n * @example\n * ```tsx\n * const Item = ({itemRef}) => {\n *    const { name, progress} = useFileUploadItem(itemRef)\n *    return <li>{name} {progress}</li>\n * }\n *\n * const List = () => {\n *    const { list } = useMultipleFilesUpload()\n *    return <ul>\n *            {list.map((itemRef) => <Item key={item.id} itemRef={item} />)}\n *           </ul>\n * }\n *\n * ```\n */\nexport const useFileUploadItem = (\n  ref: FileItemRef | InterpreterFrom<FileUploadMachine>\n): FileUploadHookResult => {\n  const nhost = useNhostClient()\n\n  const add = (params: StorageUploadFileParams) => {\n    ref.send({\n      type: 'ADD',\n      file: params.file,\n      bucketId: params.bucketId || bucketId\n    })\n  }\n\n  const upload = (params: Partial<StorageUploadFileParams>) =>\n    uploadFilePromise(\n      {\n        url: nhost.storage.url,\n        accessToken: nhost.auth.getAccessToken(),\n        adminSecret: nhost.adminSecret,\n        ...params\n      },\n      ref\n    )\n\n  const cancel = () => {\n    ref.send('CANCEL')\n  }\n\n  const destroy = () => {\n    ref.send('DESTROY')\n  }\n\n  const isUploading = useSelector(ref, (state) => state.matches('uploading'))\n  const isUploaded = useSelector(ref, (state) => state.matches('uploaded'))\n  const isError = useSelector(ref, (state) => state.matches('error'))\n  const error = useSelector(ref, (state) => state.context.error || null)\n  const progress = useSelector(ref, (state) => state.context.progress)\n  const id = useSelector(ref, (state) => state.context.id)\n  const bucketId = useSelector(ref, (state) => state.context.bucketId)\n  const name = useSelector(ref, (state) => state.context.file?.name)\n\n  return {\n    add,\n    upload,\n    cancel,\n    destroy,\n    isUploaded,\n    isUploading,\n    isError,\n    error,\n    progress,\n    id,\n    bucketId,\n    name\n  }\n}\n\n/**\n * Use the hook `useFileUpload` to upload a file.\n *\n * @example\n * ```tsx\n * const {  add,\n *  upload,\n *  cancel,\n *  isUploaded,\n *  isUploading,\n *  isError,\n *  progress,\n *  id,\n *  bucketId,\n *  name\n * } = useFileUpload();\n *\n *\n * const handleFormSubmit = async (e) => {\n *   e.preventDefault();\n *\n *   await upload({ file })\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-file-upload\n */\nexport const useFileUpload = (): FileUploadHookResult => {\n  const service = useInterpret(createFileUploadMachine)\n\n  return useFileUploadItem(service)\n}\n","import { JWTHasuraClaims } from '@nhost/nhost-js'\nimport { useDecodedAccessToken } from './useDecodedAccessToken'\n\n/**\n * Use the hook `useHasuraClaims` to get the Hasura claims of the user.\n *\n * @example\n * ```tsx\n * const hasuraClaims = useHasuraClaims()\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-hasura-claims\n */\nexport const useHasuraClaims = (): JWTHasuraClaims | null => {\n  const claims = useDecodedAccessToken()\n  return claims?.['https://hasura.io/jwt/claims'] || null\n}\n","import { useHasuraClaims } from './useHasuraClaims'\n\n/**\n * Use the hook `useHasuraClaim` to get the value of a specific Hasura claim of the user.\n *\n * @example\n * ```tsx\n * // if `x-hasura-company-id` exists as a custom claim\n * const companyId = useHasuraClaim('company-id')\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-hasura-claim\n */\nexport const useHasuraClaim = (name: string): string | string[] | null => {\n  const hasuraClaims = useHasuraClaims()\n  return hasuraClaims?.[name.startsWith('x-hasura-') ? name : `x-hasura-${name}`] || null\n}\n","import {\n  createMultipleFilesUploadMachine,\n  FileItemRef,\n  MultipleFilesHandlerResult,\n  MultipleFilesUploadState,\n  UploadMultipleFilesActionParams,\n  uploadMultipleFilesPromise\n} from '@nhost/nhost-js'\nimport { useInterpret, useSelector } from '@xstate/react'\nimport { useState } from 'react'\nimport { useNhostClient } from './useNhostClient'\n\nexport interface MultipleFilesHookResult extends MultipleFilesUploadState {\n  /**\n   * Add one or multiple files to add to the list of files to upload.\n   */\n  add: (\n    params: Required<Pick<UploadMultipleFilesActionParams, 'files'>> &\n      UploadMultipleFilesActionParams\n  ) => void\n  /**\n   * Upload the files that has been previously added to the list.\n   */\n  upload: (params?: UploadMultipleFilesActionParams) => Promise<MultipleFilesHandlerResult>\n  /**\n   * Cancel the ongoing upload. The files that have been successfully uploaded will not be deleted from the server.\n   */\n  cancel: () => void\n  /**\n   * Clear the list of files.\n   */\n  clear: () => void\n}\n\n/**\n * Use the hook `useMultipleFilesUpload` to upload multiple files.\n *\n * @example\n * ```tsx\n * const { upload, add, clear, progress, isUploaded, isUploading, files, isError, cancel } = useMultipleFilesUpload()\n *\n * const addFile = async (files: File | File[] | FileList) => {\n *   add({ files })\n * }\n *\n * const handleSubmit = async (e) => {\n *   e.preventDefault();\n *   upload()\n * }\n * ```\n * @docs https://docs.nhost.io/reference/react/use-multiple-files-upload\n */\nexport const useMultipleFilesUpload = (): MultipleFilesHookResult => {\n  const nhost = useNhostClient()\n\n  const [errors, setErrors] = useState<FileItemRef[]>([])\n  const service = useInterpret(createMultipleFilesUploadMachine, {}, (state) => {\n    if (state.event.type === 'UPLOAD_ERROR') {\n      setErrors(state.context.files.filter((ref) => ref.getSnapshot()?.context.error))\n    } else if ((state.matches('uploaded') || state.event.type === 'CLEAR') && errors.length > 0) {\n      setErrors([])\n    }\n  })\n\n  const add = (\n    params: Required<Pick<UploadMultipleFilesActionParams, 'files'>> &\n      UploadMultipleFilesActionParams\n  ) => {\n    service.send({ type: 'ADD', ...params })\n  }\n\n  const upload = (params?: UploadMultipleFilesActionParams) =>\n    uploadMultipleFilesPromise(\n      {\n        url: nhost.storage.url,\n        accessToken: nhost.auth.getAccessToken(),\n        adminSecret: nhost.adminSecret,\n        ...params\n      },\n      service\n    )\n\n  const cancel = () => {\n    service.send('CANCEL')\n  }\n\n  const clear = () => {\n    service.send('CLEAR')\n  }\n\n  const isUploading = useSelector(service, (state) => state.matches('uploading'))\n  const isUploaded = useSelector(service, (state) => state.matches('uploaded'))\n  const isError = useSelector(service, (state) => state.matches('error'))\n\n  const progress = useSelector(service, (state) => state.context.progress)\n  const files = useSelector(service, (state) => state.context.files)\n\n  return {\n    upload,\n    add,\n    clear,\n    cancel,\n    progress,\n    isUploaded,\n    isUploading,\n    files,\n    isError,\n    errors\n  }\n}\n","import {\n  encodeQueryParameters,\n  Provider,\n  ProviderOptions,\n  rewriteRedirectTo\n} from '@nhost/nhost-js'\nimport { useContext, useEffect, useState } from 'react'\nimport { NhostReactContext } from './provider'\nimport { useAccessToken } from './useAccessToken'\n\n/**\n *  Use the hook `useProviderLink` to get an OAuth provider URL that can be used to sign in users.\n *\n * @example\n * ```js\n * const providerLink = useProviderLink();\n * ```\n *\n * @example\n *\n *  Pass in the `connect` option to connect the user's account to the OAuth provider when different emails are used.\n *\n * ```js\n * const providerLink = useProviderLink({ connect: true });\n * ```\n *\n * @example\n * ```jsx\n * import { useProviderLink } from '@nhost/react';\n *\n * const Component = () => {\n *   const { facebook, github } = useProviderLink();\n *\n *   return (\n *     <div>\n *       <a href={facebook}>Sign in with Facebook</a>\n *       <a href={github}>Sign in with GitHub</a>\n *     </div>\n *   );\n * };\n * ```\n */\nexport const useProviderLink = (options?: ProviderOptions): Record<Provider, string> => {\n  /**\n   * @internal When using Nextjs or any SSR framework, nhost.auth.client.clientUrl will be set to `undefined`\n   * as its value is set to window.location.origin.\n   * This is because the request context is not available when setting up the client `new NhostClient()` outside of\n   * the React/Nextjs context.\n   */\n  const [isSSR, setIsSSR] = useState(true)\n  const accessToken = useAccessToken()\n\n  useEffect(() => {\n    setIsSSR(false)\n  }, [])\n\n  const nhost = useContext(NhostReactContext)\n\n  return new Proxy({} as Record<Provider, string>, {\n    get(_, provider: string) {\n      let providerLink = `${nhost.auth.client.backendUrl}/signin/provider/${provider}`\n\n      const connectOptions = options?.connect ? { connect: accessToken } : {}\n\n      return encodeQueryParameters(\n        providerLink,\n        rewriteRedirectTo(isSSR ? undefined : nhost.auth.client.clientUrl, {\n          ...options,\n          ...connectOptions\n        } as any)\n      )\n    }\n  })\n}\n","import {\n  createResetPasswordMachine,\n  ResetPasswordHandlerResult,\n  ResetPasswordOptions,\n  resetPasswordPromise,\n  ResetPasswordState\n} from '@nhost/nhost-js'\nimport { useInterpret, useSelector } from '@xstate/react'\nimport { useMemo } from 'react'\nimport { useNhostClient } from './useNhostClient'\n\ninterface ResetPasswordHandler {\n  (email: string, options?: ResetPasswordOptions): Promise<ResetPasswordHandlerResult>\n}\n\nexport interface ResetPasswordHookResult extends ResetPasswordState {\n  /**\n   * Sends an email with a temporary connection link. Returns a promise with the current context\n   */\n  resetPassword: ResetPasswordHandler\n}\n\ninterface ResetPasswordHook {\n  (options?: ResetPasswordOptions): ResetPasswordHookResult\n}\n\n/**\n * Use the hook `useResetPassword` to reset the password for a user. This will send a reset password link in an email to the user. When the user clicks on the reset-password link the user is automatically signed in and can change their password using the hook `useChangePassword`.\n *\n * @example\n * ```tsx\n * const { resetPassword, isLoading, isSent, isError, error } = useResetPassword();\n *\n * console.log({ isLoading, isSent, isError, error });\n *\n * const handleFormSubmit = async (e) => {\n *   e.preventDefault();\n *\n *   await resetPassword('joe@example.com', {\n *     redirectTo: 'http://localhost:3000/settings/change-password'\n *   })\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-reset-password\n */\nexport const useResetPassword: ResetPasswordHook = (options) => {\n  const nhost = useNhostClient()\n  const machine = useMemo(() => createResetPasswordMachine(nhost.auth.client), [nhost])\n  const service = useInterpret(machine)\n\n  const isLoading = useSelector(service, (s) => s.matches('requesting'))\n  const error = useSelector(service, (state) => state.context.error)\n  const isError = useSelector(service, (state) => state.matches('idle.error'))\n  const isSent = useSelector(service, (state) => state.matches('idle.success'))\n\n  const resetPassword: ResetPasswordHandler = (valueEmail, valueOptions = options) =>\n    resetPasswordPromise(service, valueEmail, valueOptions)\n\n  return { resetPassword, isLoading, isSent, isError, error }\n}\n","import {\n  createSendVerificationEmailMachine,\n  SendVerificationEmailHandlerResult,\n  SendVerificationEmailOptions,\n  sendVerificationEmailPromise,\n  SendVerificationEmailState\n} from '@nhost/nhost-js'\nimport { useInterpret, useSelector } from '@xstate/react'\nimport { useMemo } from 'react'\nimport { useNhostClient } from './useNhostClient'\n\ninterface SendVerificationEmailHandler {\n  (\n    email: string,\n    options?: SendVerificationEmailOptions\n  ): Promise<SendVerificationEmailHandlerResult>\n}\n\nexport interface SendVerificationEmailHookResult extends SendVerificationEmailState {\n  /** Resend the verification email. Returns a promise with the current context */\n  sendEmail: SendVerificationEmailHandler\n}\n\ninterface SendVerificationEmailHook {\n  (options?: SendVerificationEmailOptions): SendVerificationEmailHookResult\n}\n\n/**\n * Use the hook `useSendVerificationEmail` to send a verification email. The verification email is sent to the user's email address and includes a link to verify the email address.\n *\n * @example\n * ```tsx\n * const { sendEmail, isLoading, isSent, isError, error } =\n  useSendVerificationEmail();\n *\n * console.log({ isLoading, isSent, isError, error });\n *\n * const handleFormSubmit = async (e) => {\n *   e.preventDefault();\n *\n *   await sendEmail({\n *     email: 'joe@example.com',\n *   })\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-send-verification-email\n */\nexport const useSendVerificationEmail: SendVerificationEmailHook = (options) => {\n  const nhost = useNhostClient()\n  const machine = useMemo(() => createSendVerificationEmailMachine(nhost.auth.client), [nhost])\n  const service = useInterpret(machine)\n  const isError = useSelector(service, (state) => state.matches({ idle: 'error' }))\n  const isSent = useSelector(service, (state) => state.matches({ idle: 'success' }))\n  const error = useSelector(service, (state) => state.context.error)\n  const isLoading = useSelector(service, (state) => state.matches('requesting'))\n\n  const sendEmail: SendVerificationEmailHandler = (valueEmail, valueOptions = options) =>\n    sendVerificationEmailPromise(service, valueEmail, valueOptions)\n\n  return { sendEmail, isLoading, isSent, isError, error }\n}\n","import { signInAnonymousPromise } from '@nhost/nhost-js'\nimport { useSelector } from '@xstate/react'\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\n/**\n * Use the hook `useSignInAnonymous` to sign in a user anonymously.\n *\n * As a result, the user will have the `anonymous` role and subsequent set of permissions.\n * The user can then be converted to a regular user at a later stage using email+password sign-up, passwordless email (magic link), or passwordless SMS.\n *\n * @example\n * ```tsx\n * const { signInAnonymous, isLoading, isSuccess, isError, error } = useSignInAnonymous()\n *\n * console.log({ isLoading, isSuccess, isError, error });\n *\n * const handleFormSubmit = async (e) => {\n *   e.preventDefault();\n *\n *   await signInAnonymous();\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-sign-in-anonymous\n */\nexport const useSignInAnonymous = () => {\n  const service = useAuthInterpreter()\n  const signInAnonymous = () => signInAnonymousPromise(service)\n\n  const error = useSelector(\n    service,\n    (state) => state.context.errors.authentication || null,\n    (a, b) => a?.error === b?.error\n  )\n  const isLoading = useSelector(service, (state) =>\n    state.matches({ authentication: { authenticating: 'anonymous' } })\n  )\n  const isSuccess = useSelector(service, (state) =>\n    state.matches({\n      authentication: 'signedIn'\n    })\n  )\n  const isError = useSelector(service, (state) =>\n    state.matches({ authentication: { signedOut: 'failed' } })\n  )\n  const user = useSelector(\n    service,\n    (state) => state.context.user,\n    (a, b) => a?.id === b?.id\n  )\n  const accessToken = useSelector(service, (state) => state.context.accessToken.value)\n  return { accessToken, error, isError, isLoading, isSuccess, signInAnonymous, user }\n}\n","import {\n  SignInEmailPasswordHandlerResult,\n  signInEmailPasswordPromise,\n  SignInEmailPasswordState,\n  SignInMfaTotpHandlerResult,\n  signInMfaTotpPromise\n} from '@nhost/nhost-js'\nimport { useSelector } from '@xstate/react'\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\ninterface SignInEmailPasswordHandler {\n  (email: string, password: string): Promise<SignInEmailPasswordHandlerResult>\n}\n\nexport interface SendMfaOtpHandler {\n  (otp: string): Promise<SignInMfaTotpHandlerResult>\n}\n\nexport interface SignInEmailPasswordHookResult extends SignInEmailPasswordState {\n  signInEmailPassword: SignInEmailPasswordHandler\n  sendMfaOtp: SendMfaOtpHandler\n}\n\ninterface SignInEmailPasswordHook {\n  (): SignInEmailPasswordHookResult\n}\n\n// TODO: Add MFA example once MFA is available at Nhost Cloud.\n/**\n * Use the hook `useSignInEmailPassword` to sign in a user using email and password.\n *\n * @example\n * ```tsx\n * const { signInEmailPassword, needsEmailVerification, isLoading, isSuccess, isError, error } = useSignInEmailPassword()\n *\n * console.log({ needsEmailVerification, isLoading, isSuccess, isError, error });\n *\n * const handleFormSubmit = async (e) => {\n *   e.preventDefault();\n *\n *   await signInEmailPassword('joe@example.com','secret-password')\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-sign-in-email-password\n */\nexport const useSignInEmailPassword: SignInEmailPasswordHook = () => {\n  const service = useAuthInterpreter()\n  const signInEmailPassword: SignInEmailPasswordHandler = (email, password) =>\n    signInEmailPasswordPromise(service, email, password)\n\n  const sendMfaOtp: SendMfaOtpHandler = (otp) => signInMfaTotpPromise(service, otp)\n\n  const user = useSelector(\n    service,\n    (state) => state.context.user,\n    (a, b) => a?.id === b?.id\n  )\n  const accessToken = useSelector(service, (state) => state.context.accessToken.value)\n\n  const refreshToken = useSelector(service, (state) => state.context.refreshToken.value)\n\n  const error = useSelector(\n    service,\n    (state) => state.context.errors.authentication || null,\n    (a, b) => a?.error === b?.error\n  )\n  const isSuccess = useSelector(service, (state) =>\n    state.matches({\n      authentication: 'signedIn'\n    })\n  )\n  const isLoading = useSelector(\n    service,\n    (state) => state.matches({ authentication: { authenticating: 'password' } }),\n    (a, b) => a === b\n  )\n  const needsEmailVerification = useSelector(\n    service,\n    (state) =>\n      state.matches({\n        authentication: { signedOut: 'noErrors' },\n        registration: { incomplete: 'needsEmailVerification' }\n      }),\n    (a, b) => a === b\n  )\n\n  const needsMfaOtp = useSelector(service, (state) => state.context.mfa !== null)\n\n  const isError = useSelector(\n    service,\n    (state) => state.matches({ authentication: { signedOut: 'failed' } }),\n    (a, b) => a === b\n  )\n\n  const mfa = useSelector(service, (state) => state.context.mfa)\n\n  return {\n    accessToken,\n    refreshToken,\n    error,\n    isError,\n    isLoading,\n    isSuccess,\n    needsEmailVerification,\n    needsMfaOtp,\n    mfa,\n    sendMfaOtp,\n    signInEmailPassword,\n    user\n  }\n}\n","import {\n  ActionErrorState,\n  ActionLoadingState,\n  ActionSuccessState,\n  PasswordlessOptions,\n  SignInEmailPasswordlessHandlerResult,\n  signInEmailPasswordlessPromise\n} from '@nhost/nhost-js'\nimport { useSelector } from '@xstate/react'\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\ninterface SignInEmailPasswordlessHandler {\n  (email: string, options?: PasswordlessOptions): Promise<SignInEmailPasswordlessHandlerResult>\n}\n\nexport interface SignInEmailPasswordlessHookResult\n  extends ActionLoadingState,\n    ActionSuccessState,\n    ActionErrorState {\n  /** Sends a magic link to the given email */\n  signInEmailPasswordless: SignInEmailPasswordlessHandler\n}\n\n/**\n * Use the hook `useSignInEmailPasswordless` to sign in a user using passwordless email (Magic Link).\n *\n * @example\n * ```tsx\n * const { signInEmailPasswordless, isLoading, isSuccess, isError, error } = useSignInEmailPasswordless()\n *\n * console.log({ isLoading, isSuccess, isError, error });\n *\n * const handleFormSubmit = async (e) => {\n *   e.preventDefault();\n *\n *   await signInEmailPasswordless('joe@example.com');\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-sign-in-email-passwordless\n */\nexport function useSignInEmailPasswordless(\n  options?: PasswordlessOptions\n): SignInEmailPasswordlessHookResult {\n  const service = useAuthInterpreter()\n\n  const signInEmailPasswordless: SignInEmailPasswordlessHandler = (\n    valueEmail,\n    valueOptions = options\n  ) => signInEmailPasswordlessPromise(service, valueEmail, valueOptions)\n\n  const error = useSelector(\n    service,\n    (state) => state.context.errors.registration || null,\n    (a, b) => a?.error === b?.error\n  )\n  const isLoading = useSelector(service, (state) => state.matches('registration.passwordlessEmail'))\n\n  const isSuccess = useSelector(service, (state) =>\n    state.matches('registration.incomplete.needsEmailVerification')\n  )\n\n  const isError = useSelector(service, (state) => state.matches('registration.incomplete.failed'))\n\n  return { signInEmailPasswordless, isLoading, isSuccess, isError, error }\n}\n","import {\n  signInEmailSecurityKeyPromise,\n  SignInSecurityKeyPasswordlessHandlerResult,\n  SignInSecurityKeyPasswordlessState\n} from '@nhost/nhost-js'\nimport { useSelector } from '@xstate/react'\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\ninterface SignInSecurityKeyPasswordlessHandler {\n  (email: string): Promise<SignInSecurityKeyPasswordlessHandlerResult>\n}\n\nexport interface SignInSecurityKeyPasswordlessHookResult\n  extends SignInSecurityKeyPasswordlessState {\n  signInEmailSecurityKey: SignInSecurityKeyPasswordlessHandler\n}\n\ninterface SignInSecurityKeyPasswordlessHook {\n  (): SignInSecurityKeyPasswordlessHookResult\n}\n\n/**\n * Use the hook `useSignInEmailSecurityKey` to sign in a user using their email and a security key using the WebAuthn API.\n *\n * @example\n * ```tsx\n * const { signInEmailSecurityKey, needsEmailVerification, isLoading, isSuccess, isError, error } = useSignInEmailSecurityKey()\n *\n * console.log({ needsEmailVerification, isLoading, isSuccess, isError, error });\n *\n * const handleFormSubmit = async (e) => {\n *   e.preventDefault();\n *\n *   await signInEmailSecurityKey('joe@example.com')\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-sign-in-web-authn\n */\nexport const useSignInEmailSecurityKey: SignInSecurityKeyPasswordlessHook = () => {\n  const service = useAuthInterpreter()\n  const signInEmailSecurityKey: SignInSecurityKeyPasswordlessHandler = (email: string) =>\n    signInEmailSecurityKeyPromise(service, email)\n\n  const user = useSelector(\n    service,\n    (state) => state.context.user,\n    (a, b) => a?.id === b?.id\n  )\n  const accessToken = useSelector(service, (state) => state.context.accessToken.value)\n\n  const refreshToken = useSelector(service, (state) => state.context.refreshToken.value)\n\n  const error = useSelector(\n    service,\n    (state) => state.context.errors.authentication || null,\n    (a, b) => a?.error === b?.error\n  )\n  const isSuccess = useSelector(service, (state) =>\n    state.matches({\n      authentication: 'signedIn'\n    })\n  )\n  const isLoading = useSelector(\n    service,\n    (state) => state.matches({ authentication: { authenticating: 'securityKeyEmail' } }),\n    (a, b) => a === b\n  )\n  const needsEmailVerification = useSelector(\n    service,\n    (state) =>\n      state.matches({\n        authentication: { signedOut: 'noErrors' },\n        registration: { incomplete: 'needsEmailVerification' }\n      }),\n    (a, b) => a === b\n  )\n  const isError = useSelector(\n    service,\n    (state) => state.matches({ authentication: { signedOut: 'failed' } }),\n    (a, b) => a === b\n  )\n\n  return {\n    accessToken,\n    refreshToken,\n    error,\n    isError,\n    isLoading,\n    isSuccess,\n    needsEmailVerification,\n    signInEmailSecurityKey,\n    user\n  }\n}\n","import { User } from '@nhost/nhost-js'\nimport { useSelector } from '@xstate/react'\n\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\n/**\n * Use the hook `useUserData` to get the user data of the user.\n *\n * @example\n * ```tsx\n * const userData = useUserData();\n * ```\n * \n   * @example Example of user data\n```json\n{\n  \"avatarUrl\": \"https://s.gravatar.com/avatar\",\n  \"createdAt\": \"2022-04-11T16:33:14.780439+00:00\",\n  \"defaultRole\": \"user\",\n  \"displayName\": \"John Doe\",\n  \"email\": \"john@nhost.io\",\n  \"id\": \"05e054c7-a722-42e7-90a6-3f77a2f118c8\",\n  \"isAnonymous\": false,\n  \"locale\": \"en\",\n  \"metadata\": {\n    \"lastName\": \"Doe\",\n    \"firstName\": \"John\"\n  },\n  \"roles\": [\"user\", \"me\"]\n}\n```\n *\n * @docs https://docs.nhost.io/reference/react/use-user-data\n */\nexport const useUserData = (): User | null => {\n  const service = useAuthInterpreter()\n  return useSelector(\n    service,\n    (state) => state.context.user,\n    (a, b) => (a && JSON.stringify(a)) === (b && JSON.stringify(b))\n  )\n}\n","import {\n  elevateEmailSecurityKeyPromise,\n  ElevateWithSecurityKeyHandlerResult\n} from '@nhost/nhost-js'\nimport { useEffect, useState } from 'react'\nimport { useHasuraClaims } from './useHasuraClaims'\nimport { useNhostClient } from './useNhostClient'\nimport { useUserData } from './useUserData'\n\ninterface ElevateWithSecurityKeyHandler {\n  (email: string): Promise<ElevateWithSecurityKeyHandlerResult>\n}\n\ninterface ElevateWithSecurityKeyHook {\n  elevateEmailSecurityKey: ElevateWithSecurityKeyHandler\n  elevated: boolean\n}\n\n/**\n * Use the hook `useElevateSecurityKeyEmail` to elevate the user auth permission in order to perform sensitive operations\n *\n * @example\n * ```tsx\n * const { elevateEmailSecurityKey, elevated } = useElevateSecurityKeyEmail()\n *\n * console.log({ elevated });\n *\n * await elevateEmailSecurityKey('joe@example.com')\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/elevate-web-authn\n */\nexport const useElevateSecurityKeyEmail = (): ElevateWithSecurityKeyHook => {\n  const user = useUserData()\n  const nhost = useNhostClient()\n  const claims = useHasuraClaims()\n\n  const hasElevatedClaim = user ? claims?.['x-hasura-auth-elevated'] === user?.id : false\n\n  const [elevated, setElevated] = useState(!!hasElevatedClaim)\n\n  const elevateEmailSecurityKey: ElevateWithSecurityKeyHandler = (email: string) =>\n    elevateEmailSecurityKeyPromise(nhost.auth.client, email)\n\n  useEffect(() => {\n    setElevated(!!hasElevatedClaim)\n  }, [hasElevatedClaim])\n\n  return {\n    elevated,\n    elevateEmailSecurityKey\n  }\n}\n","import { SignInPATHandlerResult, SignInPATState, signInPATPromise } from '@nhost/nhost-js'\nimport { useSelector } from '@xstate/react'\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\ninterface SignInPATHandler {\n  (pat: string): Promise<SignInPATHandlerResult>\n}\n\nexport interface SignInPATHookResult extends SignInPATState {\n  signInPAT: SignInPATHandler\n}\n\ninterface SignInPATHook {\n  (): SignInPATHookResult\n}\n\n/**\n * Use the hook `useSignInPAT` to sign in a user using a personal access token.\n *\n * @example\n * ```tsx\n * const { signInPAT, isLoading, isSuccess, isError, error } = useSignInPAT()\n *\n * console.log({ isLoading, isSuccess, isError, error });\n *\n * const handleFormSubmit = async (e) => {\n *   e.preventDefault();\n *\n *   await signInPAT('8c5402d1-b05d-4825-a3ae-52d26402b89b')\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-sign-in-pat\n */\nexport const useSignInPAT: SignInPATHook = () => {\n  const service = useAuthInterpreter()\n  const signInPAT: SignInPATHandler = (pat: string) => signInPATPromise(service, pat)\n\n  const user = useSelector(\n    service,\n    (state) => state.context.user,\n    (a, b) => a?.id === b?.id\n  )\n\n  const accessToken = useSelector(service, (state) => state.context.accessToken.value)\n\n  const refreshToken = useSelector(service, (state) => state.context.refreshToken.value)\n\n  const error = useSelector(\n    service,\n    (state) => state.context.errors.authentication || null,\n    (a, b) => a?.error === b?.error\n  )\n\n  const isSuccess = useSelector(service, (state) => state.matches({ authentication: 'signedIn' }))\n\n  const isLoading = useSelector(\n    service,\n    (state) => state.matches({ authentication: { authenticating: 'password' } }),\n    (a, b) => a === b\n  )\n\n  const isError = useSelector(\n    service,\n    (state) => state.matches({ authentication: { signedOut: 'failed' } }),\n    (a, b) => a === b\n  )\n\n  return {\n    accessToken,\n    refreshToken,\n    error,\n    isError,\n    isLoading,\n    isSuccess,\n    signInPAT,\n    user\n  }\n}\n","import {\n  PasswordlessOptions,\n  SignInSmsPasswordlessHandlerResult,\n  SignInSmsPasswordlessOtpHandlerResult,\n  signInSmsPasswordlessOtpPromise,\n  signInSmsPasswordlessPromise,\n  SignInSmsPasswordlessState\n} from '@nhost/nhost-js'\nimport { useSelector } from '@xstate/react'\nimport { useState } from 'react'\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\nexport interface SignInSmsPasswordlessHandler {\n  (phoneNumber: string, options?: PasswordlessOptions): Promise<SignInSmsPasswordlessHandlerResult>\n}\n\nexport interface SignInSmsPasswordlessOtpHandler {\n  (code: string): Promise<SignInSmsPasswordlessOtpHandlerResult>\n  (phoneNumber: string, code: string): Promise<SignInSmsPasswordlessOtpHandlerResult>\n}\n\nexport interface SignInSmsPasswordlessHookResult extends SignInSmsPasswordlessState {\n  /** Sends a one-time code to the given phoneNumber */\n  signInSmsPasswordless: SignInSmsPasswordlessHandler\n  sendOtp: SignInSmsPasswordlessOtpHandler\n}\n\n/**\n * Use the hook `useSignInSmsPasswordless` to sign in a user with a one-time password sent via SMS to a phone.\n *\n * 1. The `signInSmsPasswordless` action sends a one-time password to the given phone number.\n * 2. The client is then awaiting the OTP. `needsOtp` equals true.\n * 3. After the code is received by SMS, the client sends the code with `sendOtp`. On success, the client is authenticated, and `isSuccess` equals `true`.\n *\n * Any error is monitored through `isError` and `error`. While the `signInSmsPasswordless` and `sendOtp` actions are running, `isLoading` equals `true`.\n *\n * @example\n * ```tsx\n * const { signInSmsPasswordless, sendOtp, needsOtp, isLoading, isSuccess, isError, error } = useSignInSmsPasswordless()\n *\n * console.log({ isLoading, isSuccess, isError, error });\n *\n * const askCode = async (e) => {\n *   e.preventDefault();\n *   await signInSmsPasswordless('+32455555555');\n * }\n *\n * const sendCode = async (e) => {\n *   e.preventDefault();\n *   await sendOtp('123456');\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-sign-in-sms-passwordless\n */\nexport function useSignInSmsPasswordless(\n  stateOptions?: PasswordlessOptions\n): SignInSmsPasswordlessHookResult {\n  const service = useAuthInterpreter()\n  const [_phoneNumber, setPhoneNumber] = useState('')\n\n  const signInSmsPasswordless: SignInSmsPasswordlessHandler = (\n    phoneNumber: string,\n    valueOptions = stateOptions\n  ) => {\n    setPhoneNumber(phoneNumber)\n    return signInSmsPasswordlessPromise(service, phoneNumber, valueOptions)\n  }\n\n  const sendOtp: SignInSmsPasswordlessOtpHandler = async (...args: string[]) => {\n    if (args.length === 2) {\n      const [phoneNumber, code] = args\n      return signInSmsPasswordlessOtpPromise(service, phoneNumber, code)\n    }\n    const [code] = args\n    return signInSmsPasswordlessOtpPromise(service, _phoneNumber, code)\n  }\n\n  const error = useSelector(\n    service,\n    (state) => state.context.errors.registration || null,\n    (a, b) => a?.error === b?.error\n  )\n  const isLoading = useSelector(\n    service,\n    (state) =>\n      state.matches('registration.passwordlessSms') ||\n      state.matches('registration.passwordlessSmsOtp')\n  )\n\n  const isSuccess = useSelector(service, (state) => state.matches('authentication.signedIn'))\n\n  const needsOtp = useSelector(service, (state) =>\n    state.matches('registration.incomplete.needsOtp')\n  )\n\n  const isError = useSelector(service, (state) => state.matches('registration.incomplete.failed'))\n\n  return { signInSmsPasswordless, sendOtp, isLoading, isSuccess, needsOtp, isError, error }\n}\n","import { signOutPromise } from '@nhost/nhost-js'\nimport { useSelector } from '@xstate/react'\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\n/**\n * Use the hook `useSignOut` to sign out the user.\n *\n * @example\n * ```tsx\n * import { useSignOut, useAuthenticated } from '@nhost/react'\n *\n * const Component = () => {\n *   const { signOut } = useSignOut()\n *   const isAuthenticated = useAuthenticated()\n *\n *   if (isAuthenticated) {\n *     return (\n *       <button onClick={() => signOut()}>Sign Out</button>\n *     )\n *   }\n *\n *   return <div>Not authenticated</div>\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-sign-out\n */\nexport const useSignOut = (stateAll: boolean = false) => {\n  const service = useAuthInterpreter()\n  const signOut = (valueAll?: boolean | unknown) =>\n    signOutPromise(service, typeof valueAll === 'boolean' ? valueAll : stateAll)\n\n  const isSuccess = useSelector(\n    service,\n    (state) => state.matches({ authentication: { signedOut: 'success' } }),\n    (a, b) => a === b\n  )\n\n  const error = useSelector(\n    service,\n    (state) => state.context.errors.signout || null,\n    (a, b) => a?.error === b?.error\n  )\n\n  return { signOut, isSuccess, error }\n}\n","import {\n  signUpEmailPasswordPromise,\n  SignUpEmailPasswordState,\n  SignUpOptions,\n  RequestOptions\n} from '@nhost/nhost-js'\nimport { useSelector } from '@xstate/react'\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\ntype SignUpEmailPasswordHandlerResult = Omit<SignUpEmailPasswordState, 'isLoading'>\n\ninterface SignUpEmailPasswordHandler {\n  (\n    email: string,\n    password: string,\n    options?: SignUpOptions,\n    requestOptions?: RequestOptions\n  ): Promise<SignUpEmailPasswordHandlerResult>\n}\n\nexport interface SignUpEmailPasswordHookResult extends SignUpEmailPasswordState {\n  /** Used for a new user to sign up. Returns a promise with the current context */\n  signUpEmailPassword: SignUpEmailPasswordHandler\n}\n\ninterface SignUpEmailPasswordHook {\n  (options?: SignUpOptions): SignUpEmailPasswordHookResult\n}\n\n/**\n * Use the hook `useSignUpEmailPassword` to sign up a user using email and password.\n *\n * @example\n * ```tsx\n * const { signUpEmailPassword, needsEmailVerification, isLoading, isSuccess, isError, error } = useSignUpEmailPassword()\n *\n * console.log({ needsEmailVerification, isLoading, isSuccess, isError, error });\n *\n * const handleFormSubmit = async (e) => {\n *   e.preventDefault();\n *\n *   await signUpEmailPassword('joe@example.com','secret-password')\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-sign-up-email-password\n */\nexport const useSignUpEmailPassword: SignUpEmailPasswordHook = (options) => {\n  const service = useAuthInterpreter()\n  const isError = useSelector(service, (state) => !!state.context.errors.registration)\n\n  const error = useSelector(\n    service,\n    (state) => state.context.errors.registration || null,\n    (a, b) => a?.error === b?.error\n  )\n\n  const isLoading = useSelector(service, (state) => state.matches('registration.emailPassword'))\n\n  const needsEmailVerification = useSelector(service, (state) =>\n    state.matches('registration.incomplete.needsEmailVerification')\n  )\n\n  const isSuccess = useSelector(service, (state) =>\n    state.matches({\n      authentication: 'signedIn',\n      registration: 'complete'\n    })\n  )\n\n  const signUpEmailPassword: SignUpEmailPasswordHandler = (\n    email,\n    password,\n    valueOptions = options,\n    requestOptions\n  ) => signUpEmailPasswordPromise(service, email, password, valueOptions, requestOptions)\n\n  const user = useSelector(\n    service,\n    (state) => state.context.user,\n    (a, b) => a?.id === b?.id\n  )\n  const accessToken = useSelector(service, (state) => state.context.accessToken.value)\n\n  const refreshToken = useSelector(service, (state) => state.context.refreshToken.value)\n\n  return {\n    accessToken,\n    refreshToken,\n    error,\n    isError,\n    isLoading,\n    isSuccess,\n    needsEmailVerification,\n    signUpEmailPassword,\n    user\n  }\n}\n","import {\n  RequestOptions,\n  signUpEmailSecurityKeyPromise,\n  SignUpSecurityKeyOptions,\n  SignUpSecurityKeyState\n} from '@nhost/nhost-js'\nimport { useSelector } from '@xstate/react'\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\ntype SignUpSecurityKeyHandlerResult = Omit<SignUpSecurityKeyState, 'isLoading'>\n\ninterface SignUpSecurityKeyHandler {\n  (\n    email: string,\n    options?: SignUpSecurityKeyOptions,\n    requestOptions?: RequestOptions\n  ): Promise<SignUpSecurityKeyHandlerResult>\n}\n\nexport interface SignUpSecurityKeyHookResult extends SignUpSecurityKeyState {\n  /** Used for a new user to sign up with a security key. Returns a promise with the current context */\n  signUpEmailSecurityKey: SignUpSecurityKeyHandler\n}\n\ninterface SignUpSecurityKeyHook {\n  (options?: SignUpSecurityKeyOptions): SignUpSecurityKeyHookResult\n}\n\n/**\n * Use the hook `useSignUpEmailSecurityKeyEmail` to sign up a user with security key and an email using the WebAuthn API.\n *\n * @example\n * ```tsx\n * const { signUpEmailSecurityKey, needsEmailVerification, isLoading, isSuccess, isError, error } = useSignUpEmailSecurityKeyEmail()\n *\n * console.log({ needsEmailVerification, isLoading, isSuccess, isError, error });\n *\n * const handleFormSubmit = async (e) => {\n *   e.preventDefault();\n *\n *   await signUpEmailSecurityKey('joe@example.com')\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-sign-up-security-key\n */\nexport const useSignUpEmailSecurityKeyEmail: SignUpSecurityKeyHook = (\n  hookOptions?: SignUpSecurityKeyOptions\n) => {\n  const service = useAuthInterpreter()\n  const isError = useSelector(service, (state) => !!state.context.errors.registration)\n\n  const error = useSelector(\n    service,\n    (state) => state.context.errors.registration || null,\n    (a, b) => a?.error === b?.error\n  )\n\n  const isLoading = useSelector(service, (state) => state.matches('registration.securityKey'))\n\n  const needsEmailVerification = useSelector(service, (state) =>\n    state.matches('registration.incomplete.needsEmailVerification')\n  )\n\n  const isSuccess = useSelector(service, (state) =>\n    state.matches({\n      authentication: 'signedIn',\n      registration: 'complete'\n    })\n  )\n\n  const signUpEmailSecurityKey: SignUpSecurityKeyHandler = (\n    email,\n    options = hookOptions,\n    requestOptions?: RequestOptions\n  ) => signUpEmailSecurityKeyPromise(service, email, options, requestOptions)\n\n  const user = useSelector(\n    service,\n    (state) => state.context.user,\n    (a, b) => a?.id === b?.id\n  )\n  const accessToken = useSelector(service, (state) => state.context.accessToken.value)\n\n  const refreshToken = useSelector(service, (state) => state.context.refreshToken.value)\n\n  return {\n    accessToken,\n    refreshToken,\n    error,\n    isError,\n    isLoading,\n    isSuccess,\n    needsEmailVerification,\n    signUpEmailSecurityKey,\n    user\n  }\n}\n","import { useSelector } from '@xstate/react'\n\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\n/**\n * Use the hook `useUserAvatarUrl` to get the avatar URL of the user.\n *\n * @example\n * ```tsx\n * const userAvatarUrl = useUserAvatarUrl();\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-user-avatar-url\n */\nexport const useUserAvatarUrl = (): string | undefined => {\n  const service = useAuthInterpreter()\n  return useSelector(\n    service,\n    (state) => state.context.user?.avatarUrl,\n    (a, b) => a === b\n  )\n}\n","import { useSelector } from '@xstate/react'\n\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\n/**\n * Use the hook `useUserDefaultRole` to get the default role of the user.\n *\n * @example\n * ```tsx\n * const userDefaultRole = useUserDefaultRole();\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-user-default-role\n */\nexport const useUserDefaultRole = (): string | undefined => {\n  const service = useAuthInterpreter()\n  return useSelector(\n    service,\n    (state) => state.context.user?.defaultRole,\n    (a, b) => a === b\n  )\n}\n","import { useSelector } from '@xstate/react'\n\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\n/**\n * Use the hook `useUserDisplayName` to get the display name of the user.\n *\n * @example\n * ```tsx\n * const userDisplayName = useUserDisplayName();\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-user-display-name\n */\nexport const useUserDisplayName = (): string | undefined => {\n  const service = useAuthInterpreter()\n  return useSelector(\n    service,\n    (state) => state.context.user?.displayName,\n    (a, b) => a === b\n  )\n}\n","import { useSelector } from '@xstate/react'\n\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\n/**\n * Use the hook `useUserEmail` to get the email of the user.\n *\n * @example\n * ```tsx\n * const userEmail = useUserEmail();\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-user-email\n */\nexport const useUserEmail = (): string | undefined => {\n  const service = useAuthInterpreter()\n  return useSelector(\n    service,\n    (state) => state.context.user?.email,\n    (a, b) => a === b\n  )\n}\n","import { useSelector } from '@xstate/react'\n\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\n/**\n * Use the hook `useUserId` to get the id of the user.\n *\n * @example\n * ```tsx\n * const userId = useUserId();\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-user-id\n */\nexport const useUserId = (): string | undefined => {\n  const service = useAuthInterpreter()\n  return useSelector(\n    service,\n    (state) => state.context.user?.id,\n    (a, b) => a === b\n  )\n}\n","import { useSelector } from '@xstate/react'\n\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\n/**\n * Use the hook `useUserIsAnonymous` to see if the user is anonymous or not.\n *\n * @example\n * ```tsx\n * const userIsAnonymous = useUserIsAnonymous();\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-user-is-anonymous\n */\nexport const useUserIsAnonymous = (): boolean | undefined => {\n  const service = useAuthInterpreter()\n  return useSelector(\n    service,\n    (state) => state.context.user?.isAnonymous,\n    (a, b) => a === b\n  )\n}\n","import { useSelector } from '@xstate/react'\n\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\n/**\n * Use the hook `useUserLocale` to get the locale of the user.\n *\n * @example\n * ```tsx\n * const userLocale = useUserLocale();\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-user-locale\n */\nexport const useUserLocale = (): string | undefined => {\n  const service = useAuthInterpreter()\n  return useSelector(\n    service,\n    (state) => state.context.user?.locale,\n    (a, b) => a === b\n  )\n}\n","import { useSelector } from '@xstate/react'\n\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\n/**\n * Use the hook `useUserRoles` to get all allowed roles of the user.\n *\n * @example\n * ```tsx\n * const userRoles = useUserRoles();\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-user-roles\n */\nexport const useUserRoles = (): string[] => {\n  const service = useAuthInterpreter()\n  return useSelector(service, (state) => {\n    if (!state.matches('authentication.signedIn')) {\n      return []\n    }\n    return state.context.user?.roles || []\n  })\n}\n","import {\n  EmailOTPOptions,\n  SignInEmailOTPHandlerResult,\n  signInEmailOTPPromise,\n  SignInEmailOTPState,\n  VerifyEmailOTPHandlerResult,\n  verifyEmailOTPPromise\n} from '@nhost/nhost-js'\nimport { useSelector } from '@xstate/react'\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\nexport interface SignInEmailOTPHandler {\n  (email: string, options?: EmailOTPOptions): Promise<SignInEmailOTPHandlerResult>\n}\n\nexport interface VerifyEmailOTPHandler {\n  (email: string, otp: string): Promise<VerifyEmailOTPHandlerResult>\n}\n\nexport interface SignInEmailOTPHookResult extends SignInEmailOTPState {\n  signInEmailOTP: SignInEmailOTPHandler\n  verifyEmailOTP: VerifyEmailOTPHandler\n}\n\n/**\n * Use the hook `useSignInEmailOTP` to sign in a user with a one-time password sent via email.\n *\n * ## Usage\n *\n * 1. Call the `signInEmailOTP` function with the user's email to send a one-time password (OTP) to that email address.\n * 2. The state `needsOtp` will be `true`, indicating that an OTP is required.\n * 3. Once the user receives the OTP via email, call the `verifyEmailOTP` function with the email and the received OTP.\n * 4. On successful verification, the user is authenticated, and `isSuccess` becomes `true`.\n *\n * Any error is monitored through `isError` and `error`. While the `signInEmailOTP` and `verifyEmailOTP` actions are running, `isLoading` equals `true`.\n *\n * @example\n * ```tsx\n * const { signInEmailOTP, verifyEmailOTP, isLoading, isSuccess, isError, error } = useSignInEmailOTP()\n *\n * const signIn = async (e) => {\n *   e.preventDefault();\n *   await signInEmailOTP('john@gmail.com');\n * }\n *\n * const verify = async (e) => {\n *   e.preventDefault();\n *   await verifyEmailOTP('123456');\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-sign-in-email-otp\n */\nexport function useSignInEmailOTP(options?: EmailOTPOptions): SignInEmailOTPHookResult {\n  const service = useAuthInterpreter()\n\n  const signInEmailOTP: SignInEmailOTPHandler = (email: string, overrideOptions = options) =>\n    signInEmailOTPPromise(service, email, overrideOptions)\n\n  const verifyEmailOTP: VerifyEmailOTPHandler = async (email: string, otp: string) =>\n    verifyEmailOTPPromise(service, email, otp)\n\n  const error = useSelector(\n    service,\n    (state) => state.context.errors.registration || null,\n    (a, b) => a?.error === b?.error\n  )\n  const isLoading = useSelector(\n    service,\n    (state) =>\n      state.matches('registration.signInEmailOTP') || state.matches('registration.verifyEmailOTP')\n  )\n\n  const isSuccess = useSelector(service, (state) => state.matches('authentication.signedIn'))\n\n  const needsOtp = useSelector(service, (state) =>\n    state.matches('registration.incomplete.needsOtp')\n  )\n\n  const isError = useSelector(service, (state) => state.matches('registration.incomplete.failed'))\n\n  return { signInEmailOTP, verifyEmailOTP, isLoading, isSuccess, isError, error, needsOtp }\n}\n","import {\n  SignInIdTokenHandlerResult,\n  SignInIdTokenState,\n  signInIdTokenPromise,\n  Provider\n} from '@nhost/nhost-js'\nimport { useSelector } from '@xstate/react'\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\ninterface SignInIdTokenHandler {\n  (provider: Provider, idToken: string, nonce?: string): Promise<SignInIdTokenHandlerResult>\n}\n\nexport interface SignInIdTokenHookResult extends SignInIdTokenState {\n  signInIdToken: SignInIdTokenHandler\n}\n\ninterface SignInIdTokenHook {\n  (): SignInIdTokenHookResult\n}\n\n/**\n * Use the hook `useSignInIdToken` to sign in a user using an `idToken`.\n *\n * @example\n * ```tsx\n * const { signInIdToken, isLoading, isSuccess, isError, error } = useSignInIdToken()\n *\n * console.log({ isLoading, isSuccess, isError, error });\n *\n * const handleFormSubmit = async (e) => {\n *   e.preventDefault();\n *\n *   await signInIdToken({ provider: 'google', idToken: '...' })\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-sign-in-idtoken\n */\nexport const useSignInIdToken: SignInIdTokenHook = () => {\n  const service = useAuthInterpreter()\n  const signInIdToken: SignInIdTokenHandler = (\n    provider: Provider,\n    idToken: string,\n    nonce?: string\n  ) =>\n    signInIdTokenPromise(service, {\n      provider,\n      idToken,\n      nonce\n    })\n\n  const user = useSelector(\n    service,\n    (state) => state.context.user,\n    (a, b) => a?.id === b?.id\n  )\n\n  const accessToken = useSelector(service, (state) => state.context.accessToken.value)\n\n  const refreshToken = useSelector(service, (state) => state.context.refreshToken.value)\n\n  const error = useSelector(\n    service,\n    (state) => state.context.errors.authentication || null,\n    (a, b) => a?.error === b?.error\n  )\n\n  const isSuccess = useSelector(service, (state) => state.matches({ authentication: 'signedIn' }))\n\n  const isLoading = useSelector(\n    service,\n    (state) => state.matches({ authentication: { authenticating: 'idToken' } }),\n    (a, b) => a === b\n  )\n\n  const isError = useSelector(\n    service,\n    (state) => state.matches({ authentication: { signedOut: 'failed' } }),\n    (a, b) => a === b\n  )\n\n  return {\n    accessToken,\n    refreshToken,\n    error,\n    isError,\n    isLoading,\n    isSuccess,\n    signInIdToken,\n    user\n  }\n}\n","import {\n  ActionErrorState,\n  ActionSuccessState,\n  ErrorPayload,\n  LinkIdTokenHandlerParams,\n  LinkIdTokenHandlerResult,\n  linkIdTokenPromise\n} from '@nhost/nhost-js'\nimport { useState } from 'react'\nimport { useNhostClient } from './useNhostClient'\n\ninterface LinkIdTokenHandler {\n  (params: LinkIdTokenHandlerParams): Promise<LinkIdTokenHandlerResult>\n}\n\nexport interface LinkIdTokenHookResult extends ActionErrorState, ActionSuccessState {\n  linkIdToken: LinkIdTokenHandler\n}\n\ninterface LinkIdTokenHook {\n  (): LinkIdTokenHookResult\n}\n\n/**\n * Use the hook `useLinkIdToken` to link a user account with the provider's account using an id token\n *\n * @example\n * ```tsx\n * const { linkIdToken, isLoading, isSuccess, isError, error } = useLinkIdToken()\n *\n * const handleFormSubmit = async (e) => {\n *   e.preventDefault();\n *\n *   await linkIdToken({\n *      provider: 'google',\n *      idToken: '...',\n *      nonce: '...'\n *   })\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-link-id-token\n */\nexport const useLinkIdToken: LinkIdTokenHook = () => {\n  const nhost = useNhostClient()\n  const [error, setError] = useState<ErrorPayload | null>(null)\n  const isSuccess = !error\n  const isError = !!error\n  const [isLoading, setIsLoading] = useState(false)\n\n  const linkIdToken: LinkIdTokenHandler = async ({\n    provider,\n    idToken,\n    nonce\n  }: LinkIdTokenHandlerParams) => {\n    setIsLoading(true)\n\n    const result = await linkIdTokenPromise(nhost.auth.client, {\n      provider,\n      idToken,\n      ...(nonce && { nonce })\n    })\n\n    const { error } = result\n\n    if (error) {\n      setError(error)\n    }\n\n    setIsLoading(false)\n\n    return result\n  }\n\n  return { linkIdToken, isLoading, isSuccess, isError, error }\n}\n","import {\n  signInSecurityKeyPromise,\n  SignInSecurityKeyHandlerResult,\n  SignInSecurityKeyState\n} from '@nhost/nhost-js'\nimport { useSelector } from '@xstate/react'\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\ninterface SignInSecurityKeyHandler {\n  (): Promise<SignInSecurityKeyHandlerResult>\n}\n\nexport interface SignInSecurityKeyHookResult extends SignInSecurityKeyState {\n  signInSecurityKey: SignInSecurityKeyHandler\n}\n\ninterface SignInSecurityKeyHook {\n  (): SignInSecurityKeyHookResult\n}\n\n/**\n * Use the hook `useSignInSecurityKey` to sign in a user with a security key using the WebAuthn API.\n *\n * @example\n * ```tsx\n * const { signInSecurityKey, needsEmailVerification, isLoading, isSuccess, isError, error } = useSignInSecurityKey()\n *\n * console.log({ needsEmailVerification, isLoading, isSuccess, isError, error });\n *\n * const handleFormSubmit = async (e) => {\n *   e.preventDefault();\n *\n *   await signInSecurityKey()\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/react/use-sign-in-security-key\n */\nexport const useSignInSecurityKey: SignInSecurityKeyHook = () => {\n  const service = useAuthInterpreter()\n\n  const signInSecurityKey: SignInSecurityKeyHandler = () => signInSecurityKeyPromise(service)\n\n  const user = useSelector(\n    service,\n    (state) => state.context.user,\n    (a, b) => a?.id === b?.id\n  )\n  const accessToken = useSelector(service, (state) => state.context.accessToken.value)\n\n  const refreshToken = useSelector(service, (state) => state.context.refreshToken.value)\n\n  const error = useSelector(\n    service,\n    (state) => state.context.errors.authentication || null,\n    (a, b) => a?.error === b?.error\n  )\n  const isSuccess = useSelector(service, (state) =>\n    state.matches({\n      authentication: 'signedIn'\n    })\n  )\n  const isLoading = useSelector(\n    service,\n    (state) => state.matches({ authentication: { authenticating: 'securityKeyEmail' } }),\n    (a, b) => a === b\n  )\n  const needsEmailVerification = useSelector(\n    service,\n    (state) =>\n      state.matches({\n        authentication: { signedOut: 'noErrors' },\n        registration: { incomplete: 'needsEmailVerification' }\n      }),\n    (a, b) => a === b\n  )\n  const isError = useSelector(\n    service,\n    (state) => state.matches({ authentication: { signedOut: 'failed' } }),\n    (a, b) => a === b\n  )\n\n  return {\n    accessToken,\n    refreshToken,\n    error,\n    isError,\n    isLoading,\n    isSuccess,\n    needsEmailVerification,\n    signInSecurityKey,\n    user\n  }\n}\n"],"names":["VanillaNhostClient","_VanillaNhostClient","NhostClient","params","NhostReactContext","createContext","NhostProvider","nhost","initial","props","interpreter","useInterpret","isInitialMount","useRef","useEffect","NhostReactProvider","useAuthInterpreter","_a","useContext","useAuthenticationStatus","service","useSelector","state","a","b","SignedIn","children","isAuthenticated","createElement","Fragment","SignedOut","useAccessToken","useNhostClient","useAddSecurityKey","error","setError","useState","isSuccess","isError","isLoading","setIsLoading","nickname","result","addSecurityKeyPromise","useAuthenticated","setIsAuthenticated","newValue","useChangeEmail","options","machine","useMemo","createChangeEmailMachine","needsEmailVerification","useCallback","valueEmail","valueOptions","changeEmailPromise","useChangePassword","createChangePasswordMachine","valuePassword","changePasswordPromise","useConfigMfa","createEnableMfaMachine","isGenerating","isGenerated","isActivating","isActivated","isDisabling","qrCodeDataUrl","totpSecret","generateQrCodePromise","code","activateMfaPromise","disableMfaPromise","useDecodedAccessToken","jwt","jwtDecode","useFileUploadItem","ref","add","bucketId","upload","uploadFilePromise","cancel","destroy","isUploading","isUploaded","progress","id","name","useFileUpload","createFileUploadMachine","useHasuraClaims","claims","useHasuraClaim","hasuraClaims","useMultipleFilesUpload","errors","setErrors","createMultipleFilesUploadMachine","uploadMultipleFilesPromise","clear","files","useProviderLink","isSSR","setIsSSR","accessToken","_","provider","providerLink","connectOptions","encodeQueryParameters","rewriteRedirectTo","useResetPassword","createResetPasswordMachine","isSent","resetPasswordPromise","useSendVerificationEmail","createSendVerificationEmailMachine","sendVerificationEmailPromise","useSignInAnonymous","signInAnonymous","signInAnonymousPromise","user","useSignInEmailPassword","signInEmailPassword","email","password","signInEmailPasswordPromise","sendMfaOtp","otp","signInMfaTotpPromise","refreshToken","needsMfaOtp","mfa","useSignInEmailPasswordless","signInEmailPasswordless","signInEmailPasswordlessPromise","useSignInEmailSecurityKey","signInEmailSecurityKey","signInEmailSecurityKeyPromise","useUserData","useElevateSecurityKeyEmail","hasElevatedClaim","elevated","setElevated","elevateEmailSecurityKey","elevateEmailSecurityKeyPromise","useSignInPAT","signInPAT","pat","signInPATPromise","useSignInSmsPasswordless","stateOptions","_phoneNumber","setPhoneNumber","signInSmsPasswordless","phoneNumber","signInSmsPasswordlessPromise","sendOtp","args","signInSmsPasswordlessOtpPromise","needsOtp","useSignOut","stateAll","signOut","valueAll","signOutPromise","useSignUpEmailPassword","signUpEmailPassword","requestOptions","signUpEmailPasswordPromise","useSignUpEmailSecurityKeyEmail","hookOptions","signUpEmailSecurityKey","signUpEmailSecurityKeyPromise","useUserAvatarUrl","useUserDefaultRole","useUserDisplayName","useUserEmail","useUserId","useUserIsAnonymous","useUserLocale","useUserRoles","useSignInEmailOTP","signInEmailOTP","overrideOptions","signInEmailOTPPromise","verifyEmailOTP","verifyEmailOTPPromise","useSignInIdToken","signInIdToken","idToken","nonce","signInIdTokenPromise","useLinkIdToken","linkIdTokenPromise","useSignInSecurityKey","signInSecurityKey","signInSecurityKeyPromise"],"mappings":"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"}},
    {"offset": {"line": 3674, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@nhost+nextjs@2.3.1_@types+react@19.2.7_next@16.1.1_@babel+core@7.28.5_react-dom@19.2.3_a6ca12aedbce5d8cfa4157182c419292/node_modules/@nhost/nextjs/dist/index.esm.js","sources":["turbopack:///[project]/node_modules/.pnpm/@nhost+nextjs@2.3.1_@types+react@19.2.7_next@16.1.1_@babel+core@7.28.5_react-dom@19.2.3_a6ca12aedbce5d8cfa4157182c419292/node_modules/@nhost/nextjs/src/utils.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+nextjs@2.3.1_@types+react@19.2.7_next@16.1.1_@babel+core@7.28.5_react-dom@19.2.3_a6ca12aedbce5d8cfa4157182c419292/node_modules/@nhost/nextjs/src/create-server-side-client.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+nextjs@2.3.1_@types+react@19.2.7_next@16.1.1_@babel+core@7.28.5_react-dom@19.2.3_a6ca12aedbce5d8cfa4157182c419292/node_modules/@nhost/nextjs/src/get-session.ts","turbopack:///[project]/node_modules/.pnpm/@nhost+nextjs@2.3.1_@types+react@19.2.7_next@16.1.1_@babel+core@7.28.5_react-dom@19.2.3_a6ca12aedbce5d8cfa4157182c419292/node_modules/@nhost/nextjs/src/index.ts"],"sourcesContent":["import { NhostClient, NhostSession } from '@nhost/react'\nimport fetch from 'isomorphic-unfetch'\nimport Cookies from 'js-cookie'\n\nexport const refresh = async (nhostUrl: string, refreshToken: string): Promise<NhostSession> => {\n  const result = await fetch(`${nhostUrl}/v1/auth/token`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ refreshToken })\n  })\n  if (result.ok) {\n    return result.json()\n  }\n  return Promise.reject(result.statusText)\n}\n\nexport const NHOST_SESSION_KEY = 'nhostSession'\n\nexport const setNhostSessionInCookie = (param: NhostClient | NhostSession | null) => {\n  const session = param && 'auth' in param ? param.auth.getSession() : param\n  if (!session) {\n    Cookies.remove(NHOST_SESSION_KEY)\n    return\n  }\n  const { refreshToken, ...rest } = session\n  const expires = new Date()\n  // * Expire the cookie 60 seconds before the token expires\n  expires.setSeconds(expires.getSeconds() + session.accessTokenExpiresIn - 60)\n  Cookies.set(NHOST_SESSION_KEY, JSON.stringify(rest), {\n    sameSite: 'strict',\n    expires\n  })\n}\n","import {\n  AuthMachine,\n  NhostClient,\n  NhostReactClientConstructorParams,\n  NhostSession,\n  NHOST_REFRESH_TOKEN_KEY,\n  VanillaNhostClient\n} from '@nhost/react'\nimport Cookies from 'js-cookie'\nimport { GetServerSidePropsContext } from 'next'\nimport { StateFrom } from 'xstate'\nimport { waitFor } from 'xstate/lib/waitFor'\nimport { NHOST_SESSION_KEY } from './utils'\n\nexport type CreateServerSideClientParams = Partial<\n  Pick<\n    NhostReactClientConstructorParams,\n    'subdomain' | 'region' | 'authUrl' | 'functionsUrl' | 'graphqlUrl' | 'storageUrl'\n  >\n>\n\n/**\n * Creates an Nhost client that runs on the server side.\n * It will try to get the refresh token in cookies, or from the request URL\n * If a refresh token is found, it uses it to get an up to date access token (JWT) and a user session\n * This method resolves when the authentication status is known eventually\n * @param config - An object containing connection information\n * @param context - Server side context\n * @returns instance of `NhostClient` that is ready to use on the server side (signed in or signed out)\n */\nexport const createServerSideClient = async (\n  params: CreateServerSideClientParams,\n  context: GetServerSidePropsContext\n): Promise<NhostClient> => {\n  const nhost = new VanillaNhostClient({\n    ...params,\n    clientStorageType: 'custom',\n    clientStorage: {\n      getItem: (key) => {\n        // TODO does not perfectly work in the same way as the 'regular' client:\n        // in the authentication machine, if the refresh token is null but an error is found in the url, then the authentication stops and fails.\n        // * When the requested key is `NHOST_REFRESH_TOKEN_KEY`, we have to look for the given 'refreshToken' value\n        // * in the url as this is the key sent by hasura-auth\n        const urlKey = key === NHOST_REFRESH_TOKEN_KEY ? 'refreshToken' : key\n        const urlValue = context.query[urlKey]\n        const cookieValue = Cookies.get(key) ?? null\n        const nextCtxValue = context.req.cookies[key]\n\n        return typeof urlValue === 'string' ? urlValue : cookieValue ?? nextCtxValue\n      },\n      setItem: (key, value) => {\n        // TODO: Set expires based on the actual refresh token expire time\n        // For now, we're using 30 days so the cookie is not removed when the browser is closed because if `expiers` is omitted, the cookie becomes a session cookie.\n        Cookies.set(key, value, { httpOnly: false, sameSite: 'strict', expires: 30 })\n      },\n      removeItem: (key) => {\n        Cookies.remove(key)\n      }\n    },\n    start: false,\n    autoRefreshToken: false,\n    autoSignIn: true\n  })\n\n  const strSession = context.req.cookies[NHOST_SESSION_KEY]\n  const refreshToken = context.req.cookies[NHOST_REFRESH_TOKEN_KEY]\n  const initialSession: NhostSession = strSession &&\n    refreshToken && { ...JSON.parse(strSession), refreshToken }\n\n  nhost.auth.client.start({ initialSession })\n  await waitFor(\n    nhost.auth.client.interpreter!,\n    (state: StateFrom<AuthMachine>) => !state.hasTag('loading')\n  )\n  return nhost\n}\n","import { NhostSession } from '@nhost/react'\nimport { GetServerSidePropsContext } from 'next'\nimport { createServerSideClient, CreateServerSideClientParams } from './create-server-side-client'\n\n/**\n * Refreshes the access token if there is any and returns the Nhost session.\n *\n * @example\n * ### Using an arrow function\n *\n * ```js\n * export const getServerSideProps: GetServerSideProps = async (context) => {\n *   const nhostSession = await getNhostSession(\n *     { subdomain: '<project_subdomain>', region: '<project_region>' },\n *     context\n *   )\n *\n *   return {\n *     props: {\n *       nhostSession\n *     }\n *   }\n * }\n * ```\n *\n * @example\n * ### Using a regular function\n *\n * ```js\n * export async function getServerSideProps(context: GetServerSidePropsContext) { // or NextPageContext\n *   const nhostSession = await getNhostSession(\n *     { subdomain: '<project_subdomain>', region: '<project_region>' },\n *     context\n *   )\n *\n *   return {\n *     props: {\n *       nhostSession\n *     }\n *   }\n * }\n * ```\n *\n * @param subdomain - URL of your Nhost application\n * @param region - Region of your Nhost application\n * @param context - Next.js context\n * @returns Nhost session\n */\nexport const getNhostSession = async (\n  params: CreateServerSideClientParams,\n  context: GetServerSidePropsContext\n): Promise<NhostSession | null> => {\n  const nhost = await createServerSideClient(params, context)\n  const { accessToken, refreshToken, user } = nhost.auth.client.interpreter!.getSnapshot().context\n  return nhost.auth.isAuthenticated()\n    ? {\n        accessToken: accessToken.value!,\n        accessTokenExpiresIn: (accessToken.expiresAt!.getTime() - Date.now()) / 1_000,\n        refreshToken: refreshToken.value!,\n        user: user!\n      }\n    : null\n}\n","import {\n  NhostClient as ReactNhostClient,\n  NhostProvider,\n  NhostReactClientConstructorParams\n} from '@nhost/react'\nimport { setNhostSessionInCookie } from './utils'\n\nexport * from '@nhost/react'\nexport * from './create-server-side-client'\nexport * from './get-session'\n/**\n * @deprecated use `NhostProvider` instead\n */\nexport const NhostNextProvider: typeof NhostProvider = NhostProvider\n\nconst isBrowser = typeof window !== 'undefined'\n\nexport interface NhostNextClientConstructorParams\n  extends Omit<\n    NhostReactClientConstructorParams,\n    'clientStorage' | 'clientStorageType' | 'clientStorageGetter' | 'clientStorageSetter'\n  > {}\n\nexport class NhostClient extends ReactNhostClient {\n  constructor(params: NhostNextClientConstructorParams) {\n    super({\n      ...params,\n      autoSignIn: isBrowser && params.autoSignIn,\n      autoRefreshToken: isBrowser && params.autoRefreshToken,\n      clientStorageType: 'cookie'\n    })\n\n    this.auth.onAuthStateChanged(() => {\n      setNhostSessionInCookie(this)\n    })\n    this.auth.onTokenChanged(setNhostSessionInCookie)\n  }\n}\n"],"names":["NHOST_SESSION_KEY","setNhostSessionInCookie","param","session","Cookies","refreshToken","rest","expires","createServerSideClient","params","context","nhost","VanillaNhostClient","key","urlKey","NHOST_REFRESH_TOKEN_KEY","urlValue","cookieValue","_a","nextCtxValue","value","strSession","initialSession","waitFor","state","getNhostSession","accessToken","user","NhostNextProvider","NhostProvider","isBrowser","NhostClient","ReactNhostClient"],"mappings":"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"}}]
}